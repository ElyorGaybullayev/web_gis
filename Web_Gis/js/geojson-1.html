<!DOCTYPE html>
<html lang="" xml:lang="">

<!-- Mirrored from 132.72.155.230:3838/js/geojson-1.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jan 2022 06:35:16 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 GeoJSON | Introduction to Web Mapping</title>
  <meta name="description" content="Chapter 7 GeoJSON | Introduction to Web Mapping" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 GeoJSON | Introduction to Web Mapping" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chapter 7 GeoJSON | Introduction to Web Mapping" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 GeoJSON | Introduction to Web Mapping" />
  
  <meta name="twitter:description" content="Chapter 7 GeoJSON | Introduction to Web Mapping" />
  

<meta name="author" content="Michael Dorman" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="leaflet.html"/>
<link rel="next" href="symbology-and-interactivity.html"/>
<script src="libs/header-attrs/header-attrs.js"></script>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-134641614-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-134641614-1');
</script>



<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<a href="index.html"><img width="90%" style="margin: 5% 5% 0% 5%" src="images/BGUsig3E.svg"></a>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#what-is-web-mapping"><i class="fa fa-check"></i><b>0.1</b> What is web mapping?</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#what-is-javascript"><i class="fa fa-check"></i><b>0.2</b> What is JavaScript?</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#why-use-javascript-for-web-mapping"><i class="fa fa-check"></i><b>0.3</b> Why use JavaScript for web mapping?</a></li>
<li class="chapter" data-level="0.4" data-path="index.html"><a href="index.html#learning-objectives"><i class="fa fa-check"></i><b>0.4</b> Learning objectives</a></li>
<li class="chapter" data-level="0.5" data-path="index.html"><a href="index.html#software"><i class="fa fa-check"></i><b>0.5</b> Software</a></li>
<li class="chapter" data-level="0.6" data-path="index.html"><a href="index.html#background-knowledge"><i class="fa fa-check"></i><b>0.6</b> Background knowledge</a></li>
<li class="chapter" data-level="0.7" data-path="index.html"><a href="index.html#online-version"><i class="fa fa-check"></i><b>0.7</b> Online version</a></li>
<li class="chapter" data-level="0.8" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i><b>0.8</b> Acknowledgments</a></li>
</ul></li>
<li class="part"><span><b>I Introduction to Web Technologies</b></span></li>
<li class="chapter" data-level="1" data-path="html.html"><a href="html.html"><i class="fa fa-check"></i><b>1</b> HTML</a>
<ul>
<li class="chapter" data-level="1.1" data-path="html.html"><a href="html.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a></li>
<li class="chapter" data-level="1.2" data-path="html.html"><a href="html.html#how-do-people-access-the-web"><i class="fa fa-check"></i><b>1.2</b> How do people access the web?</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="html.html"><a href="html.html#web-browsers"><i class="fa fa-check"></i><b>1.2.1</b> Web browsers</a></li>
<li class="chapter" data-level="1.2.2" data-path="html.html"><a href="html.html#web-servers"><i class="fa fa-check"></i><b>1.2.2</b> Web servers</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="html.html"><a href="html.html#web-pages"><i class="fa fa-check"></i><b>1.3</b> Web pages</a></li>
<li class="chapter" data-level="1.4" data-path="html.html"><a href="html.html#text-editors"><i class="fa fa-check"></i><b>1.4</b> Text editors</a></li>
<li class="chapter" data-level="1.5" data-path="html.html"><a href="html.html#what-is-html"><i class="fa fa-check"></i><b>1.5</b> What is HTML?</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="html.html"><a href="html.html#overview-html"><i class="fa fa-check"></i><b>1.5.1</b> Overview</a></li>
<li class="chapter" data-level="1.5.2" data-path="html.html"><a href="html.html#html-comments"><i class="fa fa-check"></i><b>1.5.2</b> HTML comments</a></li>
<li class="chapter" data-level="1.5.3" data-path="html.html"><a href="html.html#block-vs-inline"><i class="fa fa-check"></i><b>1.5.3</b> Block vs. inline</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="html.html"><a href="html.html#common-html-elements"><i class="fa fa-check"></i><b>1.6</b> Common HTML elements</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="html.html"><a href="html.html#html-element-types"><i class="fa fa-check"></i><b>1.6.1</b> HTML element types</a></li>
<li class="chapter" data-level="1.6.2" data-path="html.html"><a href="html.html#html-structure"><i class="fa fa-check"></i><b>1.6.2</b> Structure</a></li>
<li class="chapter" data-level="1.6.3" data-path="html.html"><a href="html.html#title-and-metadata"><i class="fa fa-check"></i><b>1.6.3</b> Title and metadata</a></li>
<li class="chapter" data-level="1.6.4" data-path="html.html"><a href="html.html#styling-and-scripts"><i class="fa fa-check"></i><b>1.6.4</b> Styling and scripts</a></li>
<li class="chapter" data-level="1.6.5" data-path="html.html"><a href="html.html#headings-and-paragraphs"><i class="fa fa-check"></i><b>1.6.5</b> Headings and paragraphs</a></li>
<li class="chapter" data-level="1.6.6" data-path="html.html"><a href="html.html#font-formatting"><i class="fa fa-check"></i><b>1.6.6</b> Font formatting</a></li>
<li class="chapter" data-level="1.6.7" data-path="html.html"><a href="html.html#spacing"><i class="fa fa-check"></i><b>1.6.7</b> Spacing</a></li>
<li class="chapter" data-level="1.6.8" data-path="html.html"><a href="html.html#html-lists"><i class="fa fa-check"></i><b>1.6.8</b> Lists</a></li>
<li class="chapter" data-level="1.6.9" data-path="html.html"><a href="html.html#html-links"><i class="fa fa-check"></i><b>1.6.9</b> Links</a></li>
<li class="chapter" data-level="1.6.10" data-path="html.html"><a href="html.html#images"><i class="fa fa-check"></i><b>1.6.10</b> Images</a></li>
<li class="chapter" data-level="1.6.11" data-path="html.html"><a href="html.html#tables"><i class="fa fa-check"></i><b>1.6.11</b> Tables</a></li>
<li class="chapter" data-level="1.6.12" data-path="html.html"><a href="html.html#grouping"><i class="fa fa-check"></i><b>1.6.12</b> Grouping</a></li>
<li class="chapter" data-level="1.6.13" data-path="html.html"><a href="html.html#input-elements"><i class="fa fa-check"></i><b>1.6.13</b> Input elements</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="html.html"><a href="html.html#id-class-and-style-attributes"><i class="fa fa-check"></i><b>1.7</b> <code>id</code>, <code>class</code>, and <code>style</code> attributes</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="html.html"><a href="html.html#overview-id-class-and-style-attributes"><i class="fa fa-check"></i><b>1.7.1</b> Overview</a></li>
<li class="chapter" data-level="1.7.2" data-path="html.html"><a href="html.html#id"><i class="fa fa-check"></i><b>1.7.2</b> <code>id</code></a></li>
<li class="chapter" data-level="1.7.3" data-path="html.html"><a href="html.html#html-class"><i class="fa fa-check"></i><b>1.7.3</b> <code>class</code></a></li>
<li class="chapter" data-level="1.7.4" data-path="html.html"><a href="html.html#style-2"><i class="fa fa-check"></i><b>1.7.4</b> <code>style</code></a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="html.html"><a href="html.html#code-layout"><i class="fa fa-check"></i><b>1.8</b> Code layout</a></li>
<li class="chapter" data-level="1.9" data-path="html.html"><a href="html.html#inspecting-elements"><i class="fa fa-check"></i><b>1.9</b> Inspecting elements</a></li>
<li class="chapter" data-level="1.10" data-path="html.html"><a href="html.html#exercise"><i class="fa fa-check"></i><b>1.10</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="css.html"><a href="css.html"><i class="fa fa-check"></i><b>2</b> CSS</a>
<ul>
<li class="chapter" data-level="2.1" data-path="css.html"><a href="css.html#introduction-1"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="css.html"><a href="css.html#what-is-css"><i class="fa fa-check"></i><b>2.2</b> What is CSS?</a></li>
<li class="chapter" data-level="2.3" data-path="css.html"><a href="css.html#css-rules"><i class="fa fa-check"></i><b>2.3</b> CSS rules</a></li>
<li class="chapter" data-level="2.4" data-path="css.html"><a href="css.html#css-selectors"><i class="fa fa-check"></i><b>2.4</b> CSS selectors</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="css.html"><a href="css.html#overview-css-selectors"><i class="fa fa-check"></i><b>2.4.1</b> Overview</a></li>
<li class="chapter" data-level="2.4.2" data-path="css.html"><a href="css.html#type-selector"><i class="fa fa-check"></i><b>2.4.2</b> Type selector</a></li>
<li class="chapter" data-level="2.4.3" data-path="css.html"><a href="css.html#class-selector"><i class="fa fa-check"></i><b>2.4.3</b> Class selector</a></li>
<li class="chapter" data-level="2.4.4" data-path="css.html"><a href="css.html#id-selector"><i class="fa fa-check"></i><b>2.4.4</b> ID selector</a></li>
<li class="chapter" data-level="2.4.5" data-path="css.html"><a href="css.html#descendant-selector"><i class="fa fa-check"></i><b>2.4.5</b> Descendant selector</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="css.html"><a href="css.html#css-conflicts"><i class="fa fa-check"></i><b>2.5</b> CSS conflicts</a></li>
<li class="chapter" data-level="2.6" data-path="css.html"><a href="css.html#css-inheritance"><i class="fa fa-check"></i><b>2.6</b> CSS inheritance</a></li>
<li class="chapter" data-level="2.7" data-path="css.html"><a href="css.html#linking-css-to-html"><i class="fa fa-check"></i><b>2.7</b> Linking CSS to HTML</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="css.html"><a href="css.html#methods-for-linking-css"><i class="fa fa-check"></i><b>2.7.1</b> Methods for linking CSS</a></li>
<li class="chapter" data-level="2.7.2" data-path="css.html"><a href="css.html#inline-css"><i class="fa fa-check"></i><b>2.7.2</b> Inline CSS</a></li>
<li class="chapter" data-level="2.7.3" data-path="css.html"><a href="css.html#embedded-css"><i class="fa fa-check"></i><b>2.7.3</b> Embedded CSS</a></li>
<li class="chapter" data-level="2.7.4" data-path="css.html"><a href="css.html#external-css"><i class="fa fa-check"></i><b>2.7.4</b> External CSS</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="css.html"><a href="css.html#css-properties"><i class="fa fa-check"></i><b>2.8</b> CSS properties</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="css.html"><a href="css.html#overview-css-properties"><i class="fa fa-check"></i><b>2.8.1</b> Overview</a></li>
<li class="chapter" data-level="2.8.2" data-path="css.html"><a href="css.html#color"><i class="fa fa-check"></i><b>2.8.2</b> Color</a></li>
<li class="chapter" data-level="2.8.3" data-path="css.html"><a href="css.html#text"><i class="fa fa-check"></i><b>2.8.3</b> Text</a></li>
<li class="chapter" data-level="2.8.4" data-path="css.html"><a href="css.html#boxes"><i class="fa fa-check"></i><b>2.8.4</b> Boxes</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="css.html"><a href="css.html#hurricane-scale"><i class="fa fa-check"></i><b>2.9</b> Hurricane scale example</a>
<ul>
<li class="chapter" data-level="2.9.1" data-path="css.html"><a href="css.html#html-contents"><i class="fa fa-check"></i><b>2.9.1</b> HTML contents</a></li>
<li class="chapter" data-level="2.9.2" data-path="css.html"><a href="css.html#css-styling"><i class="fa fa-check"></i><b>2.9.2</b> CSS styling</a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="css.html"><a href="css.html#example-map-description"><i class="fa fa-check"></i><b>2.10</b> Map description example</a>
<ul>
<li class="chapter" data-level="2.10.1" data-path="css.html"><a href="css.html#html-contents-1"><i class="fa fa-check"></i><b>2.10.1</b> HTML contents</a></li>
<li class="chapter" data-level="2.10.2" data-path="css.html"><a href="css.html#example-map-description-box-position"><i class="fa fa-check"></i><b>2.10.2</b> CSS styling: box position</a></li>
<li class="chapter" data-level="2.10.3" data-path="css.html"><a href="css.html#css-styling-final-touches"><i class="fa fa-check"></i><b>2.10.3</b> CSS styling: final touches</a></li>
<li class="chapter" data-level="2.10.4" data-path="css.html"><a href="css.html#adding-map-in-the-background"><i class="fa fa-check"></i><b>2.10.4</b> Adding map in the background</a></li>
</ul></li>
<li class="chapter" data-level="2.11" data-path="css.html"><a href="css.html#exercise-1"><i class="fa fa-check"></i><b>2.11</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="javascript-basics.html"><a href="javascript-basics.html"><i class="fa fa-check"></i><b>3</b> JavaScript Basics</a>
<ul>
<li class="chapter" data-level="3.1" data-path="javascript-basics.html"><a href="javascript-basics.html#introduction-2"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="javascript-basics.html"><a href="javascript-basics.html#what-is-javascript-1"><i class="fa fa-check"></i><b>3.2</b> What is JavaScript?</a></li>
<li class="chapter" data-level="3.3" data-path="javascript-basics.html"><a href="javascript-basics.html#client-side-vs.-server-side"><i class="fa fa-check"></i><b>3.3</b> Client-side vs. server-side</a></li>
<li class="chapter" data-level="3.4" data-path="javascript-basics.html"><a href="javascript-basics.html#the-javascript-console"><i class="fa fa-check"></i><b>3.4</b> The JavaScript console</a></li>
<li class="chapter" data-level="3.5" data-path="javascript-basics.html"><a href="javascript-basics.html#assignment"><i class="fa fa-check"></i><b>3.5</b> Assignment</a></li>
<li class="chapter" data-level="3.6" data-path="javascript-basics.html"><a href="javascript-basics.html#data-types"><i class="fa fa-check"></i><b>3.6</b> Data types</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="javascript-basics.html"><a href="javascript-basics.html#overview-data-types"><i class="fa fa-check"></i><b>3.6.1</b> Overview</a></li>
<li class="chapter" data-level="3.6.2" data-path="javascript-basics.html"><a href="javascript-basics.html#primitive-data-types"><i class="fa fa-check"></i><b>3.6.2</b> Primitive data types</a></li>
<li class="chapter" data-level="3.6.3" data-path="javascript-basics.html"><a href="javascript-basics.html#objects-data-type"><i class="fa fa-check"></i><b>3.6.3</b> Objects</a></li>
<li class="chapter" data-level="3.6.4" data-path="javascript-basics.html"><a href="javascript-basics.html#checking-type-of-variables"><i class="fa fa-check"></i><b>3.6.4</b> Checking type of variables</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="javascript-basics.html"><a href="javascript-basics.html#functions"><i class="fa fa-check"></i><b>3.7</b> Functions</a></li>
<li class="chapter" data-level="3.8" data-path="javascript-basics.html"><a href="javascript-basics.html#methods"><i class="fa fa-check"></i><b>3.8</b> Methods</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="javascript-basics.html"><a href="javascript-basics.html#what-are-methods"><i class="fa fa-check"></i><b>3.8.1</b> What are methods?</a></li>
<li class="chapter" data-level="3.8.2" data-path="javascript-basics.html"><a href="javascript-basics.html#array-methods"><i class="fa fa-check"></i><b>3.8.2</b> Array methods</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="javascript-basics.html"><a href="javascript-basics.html#scope"><i class="fa fa-check"></i><b>3.9</b> Scope</a></li>
<li class="chapter" data-level="3.10" data-path="javascript-basics.html"><a href="javascript-basics.html#flow-control"><i class="fa fa-check"></i><b>3.10</b> Flow control</a>
<ul>
<li class="chapter" data-level="3.10.1" data-path="javascript-basics.html"><a href="javascript-basics.html#what-is-flow-control"><i class="fa fa-check"></i><b>3.10.1</b> What is flow control?</a></li>
<li class="chapter" data-level="3.10.2" data-path="javascript-basics.html"><a href="javascript-basics.html#conditionals"><i class="fa fa-check"></i><b>3.10.2</b> Conditionals</a></li>
<li class="chapter" data-level="3.10.3" data-path="javascript-basics.html"><a href="javascript-basics.html#loops"><i class="fa fa-check"></i><b>3.10.3</b> Loops</a></li>
</ul></li>
<li class="chapter" data-level="3.11" data-path="javascript-basics.html"><a href="javascript-basics.html#javascript-object-notation-json"><i class="fa fa-check"></i><b>3.11</b> JavaScript Object Notation (JSON)</a>
<ul>
<li class="chapter" data-level="3.11.1" data-path="javascript-basics.html"><a href="javascript-basics.html#javascript-json"><i class="fa fa-check"></i><b>3.11.1</b> JSON</a></li>
<li class="chapter" data-level="3.11.2" data-path="javascript-basics.html"><a href="javascript-basics.html#geojson"><i class="fa fa-check"></i><b>3.11.2</b> GeoJSON</a></li>
</ul></li>
<li class="chapter" data-level="3.12" data-path="javascript-basics.html"><a href="javascript-basics.html#exercise-2"><i class="fa fa-check"></i><b>3.12</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html"><i class="fa fa-check"></i><b>4</b> JavaScript Interactivity</a>
<ul>
<li class="chapter" data-level="4.1" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#introduction-3"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#the-document-object-model"><i class="fa fa-check"></i><b>4.2</b> The Document Object Model (DOM)</a></li>
<li class="chapter" data-level="4.3" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#accessing-and-modifying-elements"><i class="fa fa-check"></i><b>4.3</b> Accessing and modifying elements</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#overview-accessing-and_modifying"><i class="fa fa-check"></i><b>4.3.1</b> Overview</a></li>
<li class="chapter" data-level="4.3.2" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#accessing-elements"><i class="fa fa-check"></i><b>4.3.2</b> Accessing elements</a></li>
<li class="chapter" data-level="4.3.3" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#getting-element-properties"><i class="fa fa-check"></i><b>4.3.3</b> Getting element properties</a></li>
<li class="chapter" data-level="4.3.4" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#modifying-elements"><i class="fa fa-check"></i><b>4.3.4</b> Modifying elements</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#event-listeners"><i class="fa fa-check"></i><b>4.4</b> Event listeners</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#event-types"><i class="fa fa-check"></i><b>4.4.1</b> Event types</a></li>
<li class="chapter" data-level="4.4.2" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#binding-event-listeners"><i class="fa fa-check"></i><b>4.4.2</b> Binding event listeners</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#hello-example"><i class="fa fa-check"></i><b>4.5</b> Hello example</a></li>
<li class="chapter" data-level="4.6" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#poles-example"><i class="fa fa-check"></i><b>4.6</b> Poles example</a></li>
<li class="chapter" data-level="4.7" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#operating-on-selection"><i class="fa fa-check"></i><b>4.7</b> Operating on multiple selections</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#example-page"><i class="fa fa-check"></i><b>4.7.1</b> Example page</a></li>
<li class="chapter" data-level="4.7.2" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#making-multiple-selections"><i class="fa fa-check"></i><b>4.7.2</b> Making multiple selections</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#getting-and-setting-input-values"><i class="fa fa-check"></i><b>4.8</b> Getting and setting input values</a></li>
<li class="chapter" data-level="4.9" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#multiple-event-listeners"><i class="fa fa-check"></i><b>4.9</b> Multiple event listeners</a></li>
<li class="chapter" data-level="4.10" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#the-event-object"><i class="fa fa-check"></i><b>4.10</b> The event object</a>
<ul>
<li class="chapter" data-level="4.10.1" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#event-object-properties"><i class="fa fa-check"></i><b>4.10.1</b> Event object properties</a></li>
<li class="chapter" data-level="4.10.2" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#event-target"><i class="fa fa-check"></i><b>4.10.2</b> The <code>.target</code> property</a></li>
</ul></li>
<li class="chapter" data-level="4.11" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#modifying-page-based-on-data"><i class="fa fa-check"></i><b>4.11</b> Modifying page based on data</a></li>
<li class="chapter" data-level="4.12" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#working-with-user-input"><i class="fa fa-check"></i><b>4.12</b> Calculator example</a></li>
<li class="chapter" data-level="4.13" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#exercise-3"><i class="fa fa-check"></i><b>4.13</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="web-servers-1.html"><a href="web-servers-1.html"><i class="fa fa-check"></i><b>5</b> Web Servers</a>
<ul>
<li class="chapter" data-level="5.1" data-path="web-servers-1.html"><a href="web-servers-1.html#introduction-4"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="web-servers-1.html"><a href="web-servers-1.html#web-servers-2"><i class="fa fa-check"></i><b>5.2</b> Web servers</a></li>
<li class="chapter" data-level="5.3" data-path="web-servers-1.html"><a href="web-servers-1.html#communicating-through-http"><i class="fa fa-check"></i><b>5.3</b> Communicating through HTTP</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="web-servers-1.html"><a href="web-servers-1.html#web-protocols-and-http"><i class="fa fa-check"></i><b>5.3.1</b> Web protocols and HTTP</a></li>
<li class="chapter" data-level="5.3.2" data-path="web-servers-1.html"><a href="web-servers-1.html#http-methods"><i class="fa fa-check"></i><b>5.3.2</b> HTTP methods</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="web-servers-1.html"><a href="web-servers-1.html#static-vs-dynamic-servers"><i class="fa fa-check"></i><b>5.4</b> Static vs. dynamic servers</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="web-servers-1.html"><a href="web-servers-1.html#overview"><i class="fa fa-check"></i><b>5.4.1</b> Overview</a></li>
<li class="chapter" data-level="5.4.2" data-path="web-servers-1.html"><a href="web-servers-1.html#static-servers"><i class="fa fa-check"></i><b>5.4.2</b> Static servers</a></li>
<li class="chapter" data-level="5.4.3" data-path="web-servers-1.html"><a href="web-servers-1.html#dynamic-servers"><i class="fa fa-check"></i><b>5.4.3</b> Dynamic servers</a></li>
<li class="chapter" data-level="5.4.4" data-path="web-servers-1.html"><a href="web-servers-1.html#software-1"><i class="fa fa-check"></i><b>5.4.4</b> Software</a></li>
<li class="chapter" data-level="5.4.5" data-path="web-servers-1.html"><a href="web-servers-1.html#practical-considerations"><i class="fa fa-check"></i><b>5.4.5</b> Practical considerations</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="web-servers-1.html"><a href="web-servers-1.html#urls-and-file-structure"><i class="fa fa-check"></i><b>5.5</b> URLs and file structure</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="web-servers-1.html"><a href="web-servers-1.html#urls-and-index-html"><i class="fa fa-check"></i><b>5.5.1</b> URLs and <code>index.html</code></a></li>
<li class="chapter" data-level="5.5.2" data-path="web-servers-1.html"><a href="web-servers-1.html#file-structure"><i class="fa fa-check"></i><b>5.5.2</b> File structure</a></li>
<li class="chapter" data-level="5.5.3" data-path="web-servers-1.html"><a href="web-servers-1.html#relative-paths"><i class="fa fa-check"></i><b>5.5.3</b> Relative paths</a></li>
<li class="chapter" data-level="5.5.4" data-path="web-servers-1.html"><a href="web-servers-1.html#css-and-javasccript"><i class="fa fa-check"></i><b>5.5.4</b> CSS and JavaScript</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="web-servers-1.html"><a href="web-servers-1.html#running-a-static-server"><i class="fa fa-check"></i><b>5.6</b> Running a static server</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="web-servers-1.html"><a href="web-servers-1.html#overview-running-static-server"><i class="fa fa-check"></i><b>5.6.1</b> Overview</a></li>
<li class="chapter" data-level="5.6.2" data-path="web-servers-1.html"><a href="web-servers-1.html#local-with-python"><i class="fa fa-check"></i><b>5.6.2</b> Local with Python</a></li>
<li class="chapter" data-level="5.6.3" data-path="web-servers-1.html"><a href="web-servers-1.html#remote-with-github-pages"><i class="fa fa-check"></i><b>5.6.3</b> Remote with GitHub Pages</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Web Mapping with Leaflet</b></span></li>
<li class="chapter" data-level="6" data-path="leaflet.html"><a href="leaflet.html"><i class="fa fa-check"></i><b>6</b> Leaflet</a>
<ul>
<li class="chapter" data-level="6.1" data-path="leaflet.html"><a href="leaflet.html#introduction-5"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="leaflet.html"><a href="leaflet.html#what-is-web-map"><i class="fa fa-check"></i><b>6.2</b> What is a web map?</a></li>
<li class="chapter" data-level="6.3" data-path="leaflet.html"><a href="leaflet.html#what-is-leaflet"><i class="fa fa-check"></i><b>6.3</b> What is Leaflet?</a></li>
<li class="chapter" data-level="6.4" data-path="leaflet.html"><a href="leaflet.html#alternatives-to-leaflet"><i class="fa fa-check"></i><b>6.4</b> Alternatives to Leaflet</a></li>
<li class="chapter" data-level="6.5" data-path="leaflet.html"><a href="leaflet.html#creating-a-basic-web-map"><i class="fa fa-check"></i><b>6.5</b> Creating a basic web map</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="leaflet.html"><a href="leaflet.html#overview-creating-a-basic-web-map"><i class="fa fa-check"></i><b>6.5.1</b> Overview</a></li>
<li class="chapter" data-level="6.5.2" data-path="leaflet.html"><a href="leaflet.html#web-page-setup"><i class="fa fa-check"></i><b>6.5.2</b> Web page setup</a></li>
<li class="chapter" data-level="6.5.3" data-path="leaflet.html"><a href="leaflet.html#javascript-libraries"><i class="fa fa-check"></i><b>6.5.3</b> JavaScript libraries</a></li>
<li class="chapter" data-level="6.5.4" data-path="leaflet.html"><a href="leaflet.html#including-a-library"><i class="fa fa-check"></i><b>6.5.4</b> Including a library</a></li>
<li class="chapter" data-level="6.5.5" data-path="leaflet.html"><a href="leaflet.html#loading-a-local-script"><i class="fa fa-check"></i><b>6.5.5</b> Loading a local script</a></li>
<li class="chapter" data-level="6.5.6" data-path="leaflet.html"><a href="leaflet.html#loading-a-remote-script"><i class="fa fa-check"></i><b>6.5.6</b> Loading a remote script</a></li>
<li class="chapter" data-level="6.5.7" data-path="leaflet.html"><a href="leaflet.html#including-leaflet-css-js"><i class="fa fa-check"></i><b>6.5.7</b> Including Leaflet CSS and JavaScript</a></li>
<li class="chapter" data-level="6.5.8" data-path="leaflet.html"><a href="leaflet.html#adding-map-div"><i class="fa fa-check"></i><b>6.5.8</b> Adding map <code>&lt;div&gt;</code></a></li>
<li class="chapter" data-level="6.5.9" data-path="leaflet.html"><a href="leaflet.html#creating-map-object"><i class="fa fa-check"></i><b>6.5.9</b> Creating a map object</a></li>
<li class="chapter" data-level="6.5.10" data-path="leaflet.html"><a href="leaflet.html#what-are-tile-layers"><i class="fa fa-check"></i><b>6.5.10</b> What are tile layers?</a></li>
<li class="chapter" data-level="6.5.11" data-path="leaflet.html"><a href="leaflet.html#adding-a-tile-layer"><i class="fa fa-check"></i><b>6.5.11</b> Adding a tile layer</a></li>
<li class="chapter" data-level="6.5.12" data-path="leaflet.html"><a href="leaflet.html#tile-layer-providers"><i class="fa fa-check"></i><b>6.5.12</b> Tile layer providers</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="leaflet.html"><a href="leaflet.html#adding-vector-layers"><i class="fa fa-check"></i><b>6.6</b> Adding vector layers</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="leaflet.html"><a href="leaflet.html#overview-adding-vector-layers"><i class="fa fa-check"></i><b>6.6.1</b> Overview</a></li>
<li class="chapter" data-level="6.6.2" data-path="leaflet.html"><a href="leaflet.html#adding-markers"><i class="fa fa-check"></i><b>6.6.2</b> Adding markers</a></li>
<li class="chapter" data-level="6.6.3" data-path="leaflet.html"><a href="leaflet.html#adding-lines"><i class="fa fa-check"></i><b>6.6.3</b> Adding lines</a></li>
<li class="chapter" data-level="6.6.4" data-path="leaflet.html"><a href="leaflet.html#adding-polygons"><i class="fa fa-check"></i><b>6.6.4</b> Adding polygons</a></li>
<li class="chapter" data-level="6.6.5" data-path="leaflet.html"><a href="leaflet.html#other-layer-types"><i class="fa fa-check"></i><b>6.6.5</b> Other layer types</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="leaflet.html"><a href="leaflet.html#adding-popups"><i class="fa fa-check"></i><b>6.7</b> Adding popups</a></li>
<li class="chapter" data-level="6.8" data-path="leaflet.html"><a href="leaflet.html#adding-a-description"><i class="fa fa-check"></i><b>6.8</b> Adding a description</a></li>
<li class="chapter" data-level="6.9" data-path="leaflet.html"><a href="leaflet.html#introducing-map-events"><i class="fa fa-check"></i><b>6.9</b> Introducing map events</a></li>
<li class="chapter" data-level="6.10" data-path="leaflet.html"><a href="leaflet.html#exercise-06"><i class="fa fa-check"></i><b>6.10</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="geojson-1.html"><a href="geojson-1.html"><i class="fa fa-check"></i><b>7</b> GeoJSON</a>
<ul>
<li class="chapter" data-level="7.1" data-path="geojson-1.html"><a href="geojson-1.html#introduction-6"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="geojson-1.html"><a href="geojson-1.html#what-is-geojson"><i class="fa fa-check"></i><b>7.2</b> What is GeoJSON?</a></li>
<li class="chapter" data-level="7.3" data-path="geojson-1.html"><a href="geojson-1.html#geojson-structure"><i class="fa fa-check"></i><b>7.3</b> GeoJSON structure</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="geojson-1.html"><a href="geojson-1.html#overview-geojson"><i class="fa fa-check"></i><b>7.3.1</b> Overview</a></li>
<li class="chapter" data-level="7.3.2" data-path="geojson-1.html"><a href="geojson-1.html#geometries"><i class="fa fa-check"></i><b>7.3.2</b> Geometries</a></li>
<li class="chapter" data-level="7.3.3" data-path="geojson-1.html"><a href="geojson-1.html#features"><i class="fa fa-check"></i><b>7.3.3</b> Features</a></li>
<li class="chapter" data-level="7.3.4" data-path="geojson-1.html"><a href="geojson-1.html#feature-collections"><i class="fa fa-check"></i><b>7.3.4</b> Feature collections</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="geojson-1.html"><a href="geojson-1.html#editing-geojson"><i class="fa fa-check"></i><b>7.4</b> Editing GeoJSON</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="geojson-1.html"><a href="geojson-1.html#geojson-io"><i class="fa fa-check"></i><b>7.4.1</b> geojson.io</a></li>
<li class="chapter" data-level="7.4.2" data-path="geojson-1.html"><a href="geojson-1.html#mapshaper"><i class="fa fa-check"></i><b>7.4.2</b> mapshaper</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="geojson-1.html"><a href="geojson-1.html#adding-geojson-to-leaflet-map"><i class="fa fa-check"></i><b>7.5</b> Adding GeoJSON to Leaflet map</a></li>
<li class="chapter" data-level="7.6" data-path="geojson-1.html"><a href="geojson-1.html#geojson-viewer"><i class="fa fa-check"></i><b>7.6</b> GeoJSON viewer example</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="geojson-1.html"><a href="geojson-1.html#viewer-structure"><i class="fa fa-check"></i><b>7.6.1</b> Viewer structure</a></li>
<li class="chapter" data-level="7.6.2" data-path="geojson-1.html"><a href="geojson-1.html#viewer-html-and-css"><i class="fa fa-check"></i><b>7.6.2</b> HTML and CSS</a></li>
<li class="chapter" data-level="7.6.3" data-path="geojson-1.html"><a href="geojson-1.html#base-map"><i class="fa fa-check"></i><b>7.6.3</b> Base map</a></li>
<li class="chapter" data-level="7.6.4" data-path="geojson-1.html"><a href="geojson-1.html#adding-an-event-listener"><i class="fa fa-check"></i><b>7.6.4</b> Adding an event listener</a></li>
<li class="chapter" data-level="7.6.5" data-path="geojson-1.html"><a href="geojson-1.html#using-layer-groups"><i class="fa fa-check"></i><b>7.6.5</b> Using layer groups</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="geojson-1.html"><a href="geojson-1.html#ajax"><i class="fa fa-check"></i><b>7.7</b> Ajax and the <code>fetch</code> API</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="geojson-1.html"><a href="geojson-1.html#overview-ajax"><i class="fa fa-check"></i><b>7.7.1</b> What is Ajax?</a></li>
<li class="chapter" data-level="7.7.2" data-path="geojson-1.html"><a href="geojson-1.html#ajax-examples"><i class="fa fa-check"></i><b>7.7.2</b> Ajax examples</a></li>
<li class="chapter" data-level="7.7.3" data-path="geojson-1.html"><a href="geojson-1.html#making-ajax-requests-with-fetch"><i class="fa fa-check"></i><b>7.7.3</b> The <code>fetch</code> API</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="geojson-1.html"><a href="geojson-1.html#loading-geojson-files"><i class="fa fa-check"></i><b>7.8</b> Loading GeoJSON files</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="geojson-1.html"><a href="geojson-1.html#loading-local-files"><i class="fa fa-check"></i><b>7.8.1</b> Loading local files</a></li>
<li class="chapter" data-level="7.8.2" data-path="geojson-1.html"><a href="geojson-1.html#loading-remote-files"><i class="fa fa-check"></i><b>7.8.2</b> Loading remote files</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="geojson-1.html"><a href="geojson-1.html#exercise-4"><i class="fa fa-check"></i><b>7.9</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html"><i class="fa fa-check"></i><b>8</b> Symbology and Interactivity</a>
<ul>
<li class="chapter" data-level="8.1" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#introduction-7"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#l-geojson-options"><i class="fa fa-check"></i><b>8.2</b> <code>L.geoJSON</code> options</a></li>
<li class="chapter" data-level="8.3" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#constant-style"><i class="fa fa-check"></i><b>8.3</b> Constant style</a></li>
<li class="chapter" data-level="8.4" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#varying-style"><i class="fa fa-check"></i><b>8.4</b> Varying style</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#setting-varying-style"><i class="fa fa-check"></i><b>8.4.1</b> Setting varying style</a></li>
<li class="chapter" data-level="8.4.2" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#states-example"><i class="fa fa-check"></i><b>8.4.2</b> States example</a></li>
<li class="chapter" data-level="8.4.3" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#towns-example"><i class="fa fa-check"></i><b>8.4.3</b> Towns example</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#constructing-popups-from-data"><i class="fa fa-check"></i><b>8.5</b> Constructing popups from data</a></li>
<li class="chapter" data-level="8.6" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#adding-a-legend"><i class="fa fa-check"></i><b>8.6</b> Adding a legend</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#setting-legend-contents-with-l.control"><i class="fa fa-check"></i><b>8.6.1</b> Setting legend contents with <code>L.control</code></a></li>
<li class="chapter" data-level="8.6.2" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#using-css-to-style-the-legend"><i class="fa fa-check"></i><b>8.6.2</b> Using CSS to style the legend</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#dynamic-style"><i class="fa fa-check"></i><b>8.7</b> Dynamic style</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#styling-in-response-to-events"><i class="fa fa-check"></i><b>8.7.1</b> Styling in response to events</a></li>
<li class="chapter" data-level="8.7.2" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#dynamic-control-contents"><i class="fa fa-check"></i><b>8.7.2</b> Dynamic control contents</a></li>
<li class="chapter" data-level="8.7.3" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#linked-views"><i class="fa fa-check"></i><b>8.7.3</b> Linked views</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#exercise-08"><i class="fa fa-check"></i><b>8.8</b> Exercise</a></li>
</ul></li>
<li class="part"><span><b>III Databases</b></span></li>
<li class="chapter" data-level="9" data-path="databases.html"><a href="databases.html"><i class="fa fa-check"></i><b>9</b> Databases</a>
<ul>
<li class="chapter" data-level="9.1" data-path="databases.html"><a href="databases.html#introduction-databases"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="databases.html"><a href="databases.html#what-is-carto"><i class="fa fa-check"></i><b>9.2</b> What is CARTO?</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="databases.html"><a href="databases.html#the-carto-platform"><i class="fa fa-check"></i><b>9.2.1</b> The CARTO platform</a></li>
<li class="chapter" data-level="9.2.2" data-path="databases.html"><a href="databases.html#alternatives-to-carto"><i class="fa fa-check"></i><b>9.2.2</b> Alternatives to CARTO</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="databases.html"><a href="databases.html#databases-1"><i class="fa fa-check"></i><b>9.3</b> Databases</a></li>
<li class="chapter" data-level="9.4" data-path="databases.html"><a href="databases.html#spatial-databases"><i class="fa fa-check"></i><b>9.4</b> Spatial databases</a></li>
<li class="chapter" data-level="9.5" data-path="databases.html"><a href="databases.html#what-is-postgis"><i class="fa fa-check"></i><b>9.5</b> What is PostGIS?</a></li>
<li class="chapter" data-level="9.6" data-path="databases.html"><a href="databases.html#what-is-sql"><i class="fa fa-check"></i><b>9.6</b> What is SQL?</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="databases.html"><a href="databases.html#overview-sql"><i class="fa fa-check"></i><b>9.6.1</b> Overview</a></li>
<li class="chapter" data-level="9.6.2" data-path="databases.html"><a href="databases.html#non-spatial-queries"><i class="fa fa-check"></i><b>9.6.2</b> Non-spatial queries</a></li>
<li class="chapter" data-level="9.6.3" data-path="databases.html"><a href="databases.html#the-geometry-column"><i class="fa fa-check"></i><b>9.6.3</b> The geometry column</a></li>
<li class="chapter" data-level="9.6.4" data-path="databases.html"><a href="databases.html#spatial-queries"><i class="fa fa-check"></i><b>9.6.4</b> Spatial queries</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="databases.html"><a href="databases.html#the-carto-sql-api"><i class="fa fa-check"></i><b>9.7</b> The CARTO SQL API</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="databases.html"><a href="databases.html#api-usage"><i class="fa fa-check"></i><b>9.7.1</b> API usage</a></li>
<li class="chapter" data-level="9.7.2" data-path="databases.html"><a href="databases.html#query-example"><i class="fa fa-check"></i><b>9.7.2</b> Query example</a></li>
<li class="chapter" data-level="9.7.3" data-path="databases.html"><a href="databases.html#uploading-your-data"><i class="fa fa-check"></i><b>9.7.3</b> Uploading your data</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="databases.html"><a href="databases.html#carto-and-leaflet"><i class="fa fa-check"></i><b>9.8</b> CARTO and Leaflet</a></li>
<li class="chapter" data-level="9.9" data-path="databases.html"><a href="databases.html#exercise-09"><i class="fa fa-check"></i><b>9.9</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html"><i class="fa fa-check"></i><b>10</b> Non-spatial Queries</a>
<ul>
<li class="chapter" data-level="10.1" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#introduction-8"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#subsetting-with-sql"><i class="fa fa-check"></i><b>10.2</b> Subsetting with SQL</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#filtering-based-on-attributes"><i class="fa fa-check"></i><b>10.2.1</b> Filtering based on attributes</a></li>
<li class="chapter" data-level="10.2.2" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#displaying-on-a-map"><i class="fa fa-check"></i><b>10.2.2</b> Displaying on a map</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#creating-a-dropdown-menu"><i class="fa fa-check"></i><b>10.3</b> Creating a dropdown menu</a></li>
<li class="chapter" data-level="10.4" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#populating-dropdown-options"><i class="fa fa-check"></i><b>10.4</b> Populating dropdown options</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#how-many-species-do-we-have"><i class="fa fa-check"></i><b>10.4.1</b> How many species do we have?</a></li>
<li class="chapter" data-level="10.4.2" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#dropdown-menu-placeholder"><i class="fa fa-check"></i><b>10.4.2</b> Dropdown menu placeholder</a></li>
<li class="chapter" data-level="10.4.3" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#finding-unique-values"><i class="fa fa-check"></i><b>10.4.3</b> Finding unique values</a></li>
<li class="chapter" data-level="10.4.4" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#adding-options"><i class="fa fa-check"></i><b>10.4.4</b> Adding the options</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#updating-the-map"><i class="fa fa-check"></i><b>10.5</b> Updating the map</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#overview-updating-map"><i class="fa fa-check"></i><b>10.5.1</b> Overview</a></li>
<li class="chapter" data-level="10.5.2" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#manual-example"><i class="fa fa-check"></i><b>10.5.2</b> Manual example</a></li>
<li class="chapter" data-level="10.5.3" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#automatic-updating"><i class="fa fa-check"></i><b>10.5.3</b> Automatic updating</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#rearranging-the-code"><i class="fa fa-check"></i><b>10.6</b> Refactoring the code</a></li>
<li class="chapter" data-level="10.7" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#exercise-10"><i class="fa fa-check"></i><b>10.7</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html"><i class="fa fa-check"></i><b>11</b> Spatial Queries</a>
<ul>
<li class="chapter" data-level="11.1" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html#introduction-9"><i class="fa fa-check"></i><b>11.1</b> Introduction</a></li>
<li class="chapter" data-level="11.2" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html#adding-marker-on-click"><i class="fa fa-check"></i><b>11.2</b> Adding markers on click</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html#getting-click-coordinates"><i class="fa fa-check"></i><b>11.2.1</b> Getting click coordinates</a></li>
<li class="chapter" data-level="11.2.2" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html#adding-custom-marker"><i class="fa fa-check"></i><b>11.2.2</b> Adding a custom marker</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html#spatial-postgis-operators"><i class="fa fa-check"></i><b>11.3</b> Spatial PostGIS operators</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html#overview-postgis-operators"><i class="fa fa-check"></i><b>11.3.1</b> Overview</a></li>
<li class="chapter" data-level="11.3.2" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html#geographical-distance"><i class="fa fa-check"></i><b>11.3.2</b> Geographical distance</a></li>
<li class="chapter" data-level="11.3.3" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html#sphere-vs-spheroid"><i class="fa fa-check"></i><b>11.3.3</b> Sphere vs. spheroid</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html#adding-nearest-points-to-map"><i class="fa fa-check"></i><b>11.4</b> Adding nearest points to map</a></li>
<li class="chapter" data-level="11.5" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html#drawing-line-connectors"><i class="fa fa-check"></i><b>11.5</b> Drawing line connectors</a></li>
<li class="chapter" data-level="11.6" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html#exercise-5"><i class="fa fa-check"></i><b>11.6</b> Exercise</a></li>
</ul></li>
<li class="part"><span><b>IV Advanced Topics</b></span></li>
<li class="chapter" data-level="12" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html"><i class="fa fa-check"></i><b>12</b> Client-side Geoprocessing</a>
<ul>
<li class="chapter" data-level="12.1" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#introduction-10"><i class="fa fa-check"></i><b>12.1</b> Introduction</a></li>
<li class="chapter" data-level="12.2" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#geoprocessing-with-turfjs"><i class="fa fa-check"></i><b>12.2</b> Geoprocessing with Turf.js</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#overview-turfjs"><i class="fa fa-check"></i><b>12.2.1</b> Overview</a></li>
<li class="chapter" data-level="12.2.2" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#including-the-turf-js-library"><i class="fa fa-check"></i><b>12.2.2</b> Including the Turf.js library</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#great-circle-line"><i class="fa fa-check"></i><b>12.3</b> Great Circle line</a></li>
<li class="chapter" data-level="12.4" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#continuously-updated-tin"><i class="fa fa-check"></i><b>12.4</b> Continuously updated TIN</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#overview-continuous-tin"><i class="fa fa-check"></i><b>12.4.1</b> Overview</a></li>
<li class="chapter" data-level="12.4.2" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#generating-random-points"><i class="fa fa-check"></i><b>12.4.2</b> Generating random points</a></li>
<li class="chapter" data-level="12.4.3" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#adding-a-tin-layer"><i class="fa fa-check"></i><b>12.4.3</b> Adding a TIN layer</a></li>
<li class="chapter" data-level="12.4.4" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#draggable-circle-markers"><i class="fa fa-check"></i><b>12.4.4</b> Draggable circle markers</a></li>
<li class="chapter" data-level="12.4.5" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#continuous-updating"><i class="fa fa-check"></i><b>12.4.5</b> Continuous updating</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#clustering"><i class="fa fa-check"></i><b>12.5</b> Clustering</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#overview-clustering"><i class="fa fa-check"></i><b>12.5.1</b> Overview</a></li>
<li class="chapter" data-level="12.5.2" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#processing-sets-of-features"><i class="fa fa-check"></i><b>12.5.2</b> Processing sets of features</a></li>
<li class="chapter" data-level="12.5.3" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#adding-a-convex-hull"><i class="fa fa-check"></i><b>12.5.3</b> Adding a Convex Hull</a></li>
<li class="chapter" data-level="12.5.4" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#dbscan-clustering"><i class="fa fa-check"></i><b>12.5.4</b> DBSCAN clustering</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#heatmaps-with-leafletheat"><i class="fa fa-check"></i><b>12.6</b> Heatmaps with Leaflet.heat</a></li>
<li class="chapter" data-level="12.7" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#exercise-6"><i class="fa fa-check"></i><b>12.7</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html"><i class="fa fa-check"></i><b>13</b> Collaborative Mapping</a>
<ul>
<li class="chapter" data-level="13.1" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html#introduction-11"><i class="fa fa-check"></i><b>13.1</b> Introduction</a></li>
<li class="chapter" data-level="13.2" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html#crowdsourcing"><i class="fa fa-check"></i><b>13.2</b> Crowdsourcing</a></li>
<li class="chapter" data-level="13.3" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html#the-drawing-control"><i class="fa fa-check"></i><b>13.3</b> The drawing control</a></li>
<li class="chapter" data-level="13.4" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html#working-with-drawn-items"><i class="fa fa-check"></i><b>13.4</b> Working with drawn items</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html#printing-drawn-items-geojson"><i class="fa fa-check"></i><b>13.4.1</b> Printing drawn items GeoJSON</a></li>
<li class="chapter" data-level="13.4.2" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html#expanded-geojson-viewer"><i class="fa fa-check"></i><b>13.4.2</b> Expanded GeoJSON viewer</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html#submission-form"><i class="fa fa-check"></i><b>13.5</b> Submission form</a></li>
<li class="chapter" data-level="13.6" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html#sending-features-to-the-database"><i class="fa fa-check"></i><b>13.6</b> Sending features to the database</a>
<ul>
<li class="chapter" data-level="13.6.1" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html#setting-database-permissions"><i class="fa fa-check"></i><b>13.6.1</b> Setting database permissions</a></li>
<li class="chapter" data-level="13.6.2" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html#adding-draw-control"><i class="fa fa-check"></i><b>13.6.2</b> Adding the drawing control</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html#exercise-7"><i class="fa fa-check"></i><b>13.7</b> Exercise</a></li>
</ul></li>
<li class="part"><span><b>V Appendices</b></span></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="associated-files.html"><a href="associated-files.html"><i class="fa fa-check"></i><b>A</b> Associated Files</a></li>
<li class="chapter" data-level="B" data-path="list-of-examples.html"><a href="list-of-examples.html"><i class="fa fa-check"></i><b>B</b> List of Examples</a>
<ul>
<li class="chapter" data-level="B.1" data-path="list-of-examples.html"><a href="list-of-examples.html#main"><i class="fa fa-check"></i><b>B.1</b> Main</a></li>
<li class="chapter" data-level="B.2" data-path="list-of-examples.html"><a href="list-of-examples.html#additional"><i class="fa fa-check"></i><b>B.2</b> Additional</a>
<ul>
<li class="chapter" data-level="B.2.1" data-path="list-of-examples.html"><a href="list-of-examples.html#html-and-css"><i class="fa fa-check"></i><b>B.2.1</b> HTML and CSS</a></li>
<li class="chapter" data-level="B.2.2" data-path="list-of-examples.html"><a href="list-of-examples.html#javascript"><i class="fa fa-check"></i><b>B.2.2</b> JavaScript</a></li>
<li class="chapter" data-level="B.2.3" data-path="list-of-examples.html"><a href="list-of-examples.html#leaflet-1"><i class="fa fa-check"></i><b>B.2.3</b> Leaflet</a></li>
<li class="chapter" data-level="B.2.4" data-path="list-of-examples.html"><a href="list-of-examples.html#geo-processing"><i class="fa fa-check"></i><b>B.2.4</b> Geo-processing</a></li>
<li class="chapter" data-level="B.2.5" data-path="list-of-examples.html"><a href="list-of-examples.html#d-maps"><i class="fa fa-check"></i><b>B.2.5</b> 2.5D Maps</a></li>
<li class="chapter" data-level="B.2.6" data-path="list-of-examples.html"><a href="list-of-examples.html#d-maps-1"><i class="fa fa-check"></i><b>B.2.6</b> 3D maps</a></li>
<li class="chapter" data-level="B.2.7" data-path="list-of-examples.html"><a href="list-of-examples.html#animation"><i class="fa fa-check"></i><b>B.2.7</b> Animation</a></li>
<li class="chapter" data-level="B.2.8" data-path="list-of-examples.html"><a href="list-of-examples.html#real-time-data"><i class="fa fa-check"></i><b>B.2.8</b> Real-time data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="C" data-path="list-of-exercise-solutions.html"><a href="list-of-exercise-solutions.html"><i class="fa fa-check"></i><b>C</b> List of Exercise Solutions</a></li>
<li class="chapter" data-level="D" data-path="bgu-course-2021.html"><a href="bgu-course-2021.html"><i class="fa fa-check"></i><b>D</b> BGU course 2021</a>
<ul>
<li class="chapter" data-level="D.1" data-path="bgu-course-2021.html"><a href="bgu-course-2021.html#place-and-time"><i class="fa fa-check"></i><b>D.1</b> Place and Time</a></li>
<li class="chapter" data-level="D.2" data-path="bgu-course-2021.html"><a href="bgu-course-2021.html#lecture-plan"><i class="fa fa-check"></i><b>D.2</b> Lecture plan</a></li>
<li class="chapter" data-level="D.3" data-path="bgu-course-2021.html"><a href="bgu-course-2021.html#project-submission-dates"><i class="fa fa-check"></i><b>D.3</b> Project submission dates</a></li>
<li class="chapter" data-level="D.4" data-path="bgu-course-2021.html"><a href="bgu-course-2021.html#additional-resources"><i class="fa fa-check"></i><b>D.4</b> Additional resources</a>
<ul>
<li class="chapter" data-level="D.4.1" data-path="bgu-course-2021.html"><a href="bgu-course-2021.html#html-css"><i class="fa fa-check"></i><b>D.4.1</b> HTML &amp; CSS</a></li>
<li class="chapter" data-level="D.4.2" data-path="bgu-course-2021.html"><a href="bgu-course-2021.html#javascript-1"><i class="fa fa-check"></i><b>D.4.2</b> JavaScript</a></li>
<li class="chapter" data-level="D.4.3" data-path="bgu-course-2021.html"><a href="bgu-course-2021.html#web-mapping"><i class="fa fa-check"></i><b>D.4.3</b> Web mapping</a></li>
<li class="chapter" data-level="D.4.4" data-path="bgu-course-2021.html"><a href="bgu-course-2021.html#postgis"><i class="fa fa-check"></i><b>D.4.4</b> PostGIS</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="E" data-path="projects.html"><a href="projects.html"><i class="fa fa-check"></i><b>E</b> Projects</a>
<ul>
<li class="chapter" data-level="E.1" data-path="projects.html"><a href="projects.html#overview-3"><i class="fa fa-check"></i><b>E.1</b> Overview</a></li>
<li class="chapter" data-level="E.2" data-path="projects.html"><a href="projects.html#carto-account"><i class="fa fa-check"></i><b>E.2</b> CARTO Account</a></li>
<li class="chapter" data-level="E.3" data-path="projects.html"><a href="projects.html#data"><i class="fa fa-check"></i><b>E.3</b> Data</a></li>
<li class="chapter" data-level="E.4" data-path="projects.html"><a href="projects.html#project-requirements"><i class="fa fa-check"></i><b>E.4</b> Project requirements</a>
<ul>
<li class="chapter" data-level="E.4.1" data-path="projects.html"><a href="projects.html#project-01"><i class="fa fa-check"></i><b>E.4.1</b> Project 01</a></li>
<li class="chapter" data-level="E.4.2" data-path="projects.html"><a href="projects.html#project-02"><i class="fa fa-check"></i><b>E.4.2</b> Project 02</a></li>
<li class="chapter" data-level="E.4.3" data-path="projects.html"><a href="projects.html#project-03"><i class="fa fa-check"></i><b>E.4.3</b> Project 03</a></li>
</ul></li>
<li class="chapter" data-level="E.5" data-path="projects.html"><a href="projects.html#submission"><i class="fa fa-check"></i><b>E.5</b> Submission</a></li>
<li class="chapter" data-level="E.6" data-path="projects.html"><a href="projects.html#grading"><i class="fa fa-check"></i><b>E.6</b> Grading</a></li>
</ul></li>
<li class="chapter" data-level="F" data-path="exam.html"><a href="exam.html"><i class="fa fa-check"></i><b>F</b> Exam</a>
<ul>
<li class="chapter" data-level="F.1" data-path="exam.html"><a href="exam.html#topics"><i class="fa fa-check"></i><b>F.1</b> Topics</a></li>
<li class="chapter" data-level="F.2" data-path="exam.html"><a href="exam.html#sample-questions"><i class="fa fa-check"></i><b>F.2</b> Sample questions</a>
<ul>
<li class="chapter" data-level="F.2.1" data-path="exam.html"><a href="exam.html#question-1"><i class="fa fa-check"></i><b>F.2.1</b> Question 1</a></li>
<li class="chapter" data-level="F.2.3" data-path="exam.html"><a href="exam.html#question-3"><i class="fa fa-check"></i><b>F.2.3</b> Question 3</a></li>
<li class="chapter" data-level="F.2.4" data-path="exam.html"><a href="exam.html#question-4"><i class="fa fa-check"></i><b>F.2.4</b> Question 4</a></li>
<li class="chapter" data-level="F.2.5" data-path="exam.html"><a href="exam.html#question-5"><i class="fa fa-check"></i><b>F.2.5</b> Question 5</a></li>
<li class="chapter" data-level="F.2.6" data-path="exam.html"><a href="exam.html#question-6"><i class="fa fa-check"></i><b>F.2.6</b> Question 6</a></li>
<li class="chapter" data-level="F.2.7" data-path="exam.html"><a href="exam.html#question-7"><i class="fa fa-check"></i><b>F.2.7</b> Question 7</a></li>
<li class="chapter" data-level="F.2.8" data-path="exam.html"><a href="exam.html#question-8"><i class="fa fa-check"></i><b>F.2.8</b> Question 8</a></li>
<li class="chapter" data-level="F.2.9" data-path="exam.html"><a href="exam.html#question-9"><i class="fa fa-check"></i><b>F.2.9</b> Question 9</a></li>
<li class="chapter" data-level="F.2.10" data-path="exam.html"><a href="exam.html#question-10"><i class="fa fa-check"></i><b>F.2.10</b> Question 10</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="G" data-path="additional-questions.html"><a href="additional-questions.html"><i class="fa fa-check"></i><b>G</b> Additional Questions</a>
<ul>
<li class="chapter" data-level="G.1" data-path="additional-questions.html"><a href="additional-questions.html#chapter-3"><i class="fa fa-check"></i><b>G.1</b> Chapter 3</a>
<ul>
<li class="chapter" data-level="G.1.1" data-path="additional-questions.html"><a href="additional-questions.html#modifying-global-variable"><i class="fa fa-check"></i><b>G.1.1</b> Modifying global variable</a></li>
<li class="chapter" data-level="G.1.2" data-path="additional-questions.html"><a href="additional-questions.html#insertingremoving-array-element"><i class="fa fa-check"></i><b>G.1.2</b> Inserting/removing array element</a></li>
<li class="chapter" data-level="G.1.3" data-path="additional-questions.html"><a href="additional-questions.html#object-oriented-language"><i class="fa fa-check"></i><b>G.1.3</b> Object Oriented language</a></li>
</ul></li>
<li class="chapter" data-level="G.2" data-path="additional-questions.html"><a href="additional-questions.html#chapter-4"><i class="fa fa-check"></i><b>G.2</b> Chapter 4</a>
<ul>
<li class="chapter" data-level="G.2.1" data-path="additional-questions.html"><a href="additional-questions.html#removing-collection-of-html-elements"><i class="fa fa-check"></i><b>G.2.1</b> Removing collection of HTML elements</a></li>
<li class="chapter" data-level="G.2.2" data-path="additional-questions.html"><a href="additional-questions.html#constraining-event-listener-frequency"><i class="fa fa-check"></i><b>G.2.2</b> Constraining event listener frequency</a></li>
<li class="chapter" data-level="G.2.3" data-path="additional-questions.html"><a href="additional-questions.html#saving-.getelementbyid-method-in-variable"><i class="fa fa-check"></i><b>G.2.3</b> Saving <code>.getElementById</code> method in variable</a></li>
</ul></li>
<li class="chapter" data-level="G.3" data-path="additional-questions.html"><a href="additional-questions.html#chapter-6"><i class="fa fa-check"></i><b>G.3</b> Chapter 6</a>
<ul>
<li class="chapter" data-level="G.3.1" data-path="additional-questions.html"><a href="additional-questions.html#routing"><i class="fa fa-check"></i><b>G.3.1</b> Routing</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="H" data-path="setting-up-an-sql-api.html"><a href="setting-up-an-sql-api.html"><i class="fa fa-check"></i><b>H</b> Setting up an SQL API</a>
<ul>
<li class="chapter" data-level="H.1" data-path="setting-up-an-sql-api.html"><a href="setting-up-an-sql-api.html#introduction-12"><i class="fa fa-check"></i><b>H.1</b> Introduction</a></li>
<li class="chapter" data-level="H.2" data-path="setting-up-an-sql-api.html"><a href="setting-up-an-sql-api.html#computer-with-fixed-ip-address"><i class="fa fa-check"></i><b>H.2</b> Computer with fixed IP address</a></li>
<li class="chapter" data-level="H.3" data-path="setting-up-an-sql-api.html"><a href="setting-up-an-sql-api.html#installing-postgresql-postgis"><i class="fa fa-check"></i><b>H.3</b> Installing PostgreSQL and PostGIS</a></li>
<li class="chapter" data-level="H.4" data-path="setting-up-an-sql-api.html"><a href="setting-up-an-sql-api.html#loading-data-into-the-database"><i class="fa fa-check"></i><b>H.4</b> Loading data into the database</a></li>
<li class="chapter" data-level="H.5" data-path="setting-up-an-sql-api.html"><a href="setting-up-an-sql-api.html#adding-read-only-database-user"><i class="fa fa-check"></i><b>H.5</b> Adding a read-only database user</a></li>
<li class="chapter" data-level="H.6" data-path="setting-up-an-sql-api.html"><a href="setting-up-an-sql-api.html#installing-nodejs-and-required-modules"><i class="fa fa-check"></i><b>H.6</b> Installing Node.js and required modules</a></li>
<li class="chapter" data-level="H.7" data-path="setting-up-an-sql-api.html"><a href="setting-up-an-sql-api.html#creating-a-service"><i class="fa fa-check"></i><b>H.7</b> Creating a service</a></li>
<li class="chapter" data-level="H.8" data-path="setting-up-an-sql-api.html"><a href="setting-up-an-sql-api.html#testing-the-sql-api"><i class="fa fa-check"></i><b>H.8</b> Testing the SQL API</a></li>
</ul></li>
<li class="chapter" data-level="I" data-path="setting-up-a-static-server-using-r.html"><a href="setting-up-a-static-server-using-r.html"><i class="fa fa-check"></i><b>I</b> Setting up a static server using R</a>
<ul>
<li class="chapter" data-level="I.1" data-path="setting-up-a-static-server-using-r.html"><a href="setting-up-a-static-server-using-r.html#introduction-13"><i class="fa fa-check"></i><b>I.1</b> Introduction</a></li>
<li class="chapter" data-level="I.2" data-path="setting-up-a-static-server-using-r.html"><a href="setting-up-a-static-server-using-r.html#installing-r"><i class="fa fa-check"></i><b>I.2</b> Installing R</a></li>
<li class="chapter" data-level="I.3" data-path="setting-up-a-static-server-using-r.html"><a href="setting-up-a-static-server-using-r.html#installing-the-servr-package"><i class="fa fa-check"></i><b>I.3</b> Installing the <code>servr</code> package</a></li>
<li class="chapter" data-level="I.4" data-path="setting-up-a-static-server-using-r.html"><a href="setting-up-a-static-server-using-r.html#starting-the-server"><i class="fa fa-check"></i><b>I.4</b> Starting the server</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org/" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="index-2.html">Introduction to Web Mapping</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="geojson-1" class="section level1" number="7">
<h1><span class="header-section-number">Chapter 7</span> GeoJSON</h1>
<p><i>Last updated: 2021-08-24 14:54:58 </i></p>
<div id="introduction-6" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Introduction</h2>
<p>In this chapter, we are going to learn about <strong>GeoJSON</strong>—a plain text format for vector layers. On the one hand, GeoJSON is a special case of JSON, which makes it fully compatible and easy to process with web technologies such as JavaScript. On the other hand, it is a fully-featured vector layer format, capable of representing complex vector layers and their non-spatial attributes. GeoJSON is, therefore, widely-used in web mapping and deserves its own chapter.</p>
<p>We are going to start with the definition of GeoJSON (Section <a href="geojson-1.html#what-is-geojson">7.2</a>) and an overview of its syntax and usage for representing various types of geometries (Sections <a href="geojson-1.html#geojson-structure">7.3</a>–<a href="geojson-1.html#editing-geojson">7.4</a>). Then, we will discuss ways in which GeoJSON can be loaded and displayed on a Leaflet map (Sections <a href="geojson-1.html#adding-geojson-to-leaflet-map">7.5</a>–<a href="geojson-1.html#loading-geojson-files">7.8</a>).</p>
</div>
<div id="what-is-geojson" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> What is GeoJSON?</h2>
<p><strong>GeoJSON</strong> is an plain-text format designed for representing vector geometries, with or without non-spatial attributes, based on the JavaScript Object Notation, JSON (Section <a href="javascript-basics.html#javascript-json">3.11.1</a>). We briefly introduced the GeoJSON format in Section <a href="javascript-basics.html#geojson">3.11.2</a>. This chapter is devoted to more in-depth treatment of the format and its use in web maps.</p>
<p>GeoJSON has become a very popular data format in many GIS technologies and services related to web mapping. It is actually the standard format for passing spatial vector layer data between the client and the server in web applications. As mentioned in Section <a href="javascript-basics.html#geojson">3.11.2</a>, the main reason for its popularity is the fact that GeoJSON is a special case of JSON, which means that it can be easily parsed and processed with JavaScript. As a result, GeoJSON is the best (sometimes even the only) supported format by JavaScript web-mapping libraries and platforms, including those we learn about in this book: <strong>Leaflet</strong> (Chapters <a href="leaflet.html#leaflet">6</a>–<a href="symbology-and-interactivity.html#symbology-and-interactivity">8</a>), <strong>CARTO</strong> (Chapters <a href="databases.html#databases">9</a>–<a href="spatial-queries-1.html#spatial-queries-1">11</a>), and <strong>Turf.js</strong> (Chapter <a href="client-side-geoprocessing.html#client-side-geoprocessing">12</a>). </p>
<p>Other advantages of GeoJSON are that it is simple and human-readable, being a plain-text format. A disadvantage of GeoJSON is that its file size can get relatively large compared to other spatial vector layer formats, such as the <a href="https://en.wikipedia.org/wiki/Shapefile"><strong>Shapefile</strong></a> or <a href="https://en.wikipedia.org/wiki/GeoPackage"><strong>GeoPackage</strong></a> formats. However, there are ways to reduce GeoJSON file size by simplifying its geometry and removing unnecessary attributes (Section <a href="geojson-1.html#mapshaper">7.4.2</a>).</p>
<p>In this chapter, we learn about how the GeoJSON format is structured (Section <a href="geojson-1.html#geojson-structure">7.3</a>), how we can to create GeoJSON instances and edit them (Section <a href="geojson-1.html#editing-geojson">7.4</a>), and how we can add GeoJSON layers on a Leaflet map (Sections <a href="geojson-1.html#adding-geojson-to-leaflet-map">7.5</a>–<a href="geojson-1.html#loading-geojson-files">7.8</a>). Keep in mind that, for simplicity, we will use the term GeoJSON interchangeably referring to both the original GeoJSON string, as well as the parsed object derived from that string in a JavaScript environment. Mapping library documentation often also uses the term GeoJSON for both cases. However, strictly speaking, the term GeoJSON refers just to text string instances, not to the derived JavaScript objects (see Section <a href="javascript-basics.html#javascript-object-notation-json">3.11</a>).</p>
</div>
<div id="geojson-structure" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> GeoJSON structure</h2>
<div id="overview-geojson" class="section level3" number="7.3.1">
<h3><span class="header-section-number">7.3.1</span> Overview</h3>
<p>In this section, we go over the structure of different types of GeoJSON strings you may encounter when working with this format. If you are new to JSON and GeoJSON, it may seem difficult to grasp the exact syntax of the GeoJSON format right from the start. Don’t worry—we will come back to more examples later on in this chapter, as well as in the subsequent chapters. Moreover, rest assured one is almost never required to type GeoJSON strings <em>by hand</em>. Instead, web-map developers generally use pre-existing GeoJSON, exported from layers in other formats using GIS software, or coming from external web resources and databases. As we will see in the Section <a href="geojson-1.html#editing-geojson">7.4</a>, you can create and edit GeoJSON even without GIS software, using web interfaces such as the one called <strong>geojson.io</strong>. Nevertheless, it is important to be familiar with the general structure of GeoJSON to recognize what type of layer you have at hand, and how to extract meaningful information from it. </p>
<p>GeoJSON is a format for representing <a href="https://en.wikipedia.org/wiki/Simple_Features"><strong>Simple Feature</strong></a> geometries, possibly along with their non-spatial attributes. The Simple Features standard defines 20+ types of geometry types, and the <a href="https://en.wikipedia.org/wiki/Well-known_text"><strong>Well-Known Text (WKT)</strong></a> format for representing them<a href="#fn66" class="footnote-ref" id="fnref66"><sup>66</sup></a>. GeoJSON supports just the seven most commonly used Simple Feature geometry types (Figure <a href="geojson-1.html#fig:simple-feature-types">7.1</a>). Having non-spatial attributes is not required for valid GeoJSON, so the seven geometries alone are encountered when representing geometric shapes only, with no attributes. In case non-spatial attributes <em>are</em> present, their combination with a geometry forms a <code>"Feature"</code>. Finally, a collection of more than one feature forms a <code>"FeatureCollection"</code>. The <code>"FeatureCollection"</code> GeoJSON type most closely corresponds to the meaning of a “layer,” which you may be familiar with from GIS software (e.g., a Shapefile). The hierarchy of <strong>GeoJSON types</strong> thus includes nine types, which can be grouped into three “levels” of complexity: </p>
<ul>
<li>Geometry—One of seven Simple Feature geometry types, such as <code>"MultiPolygon"</code> (Table <a href="geojson-1.html#tab:geojson-geometry-types">7.1</a>, Figure <a href="geojson-1.html#fig:simple-feature-types">7.1</a>)</li>
<li><code>"Feature"</code>—A feature, i.e., a geometry along with its non-spatial attributes</li>
<li><code>"FeatureCollection"</code>—A collection of features</li>
</ul>
<p>The seven <strong>geometry types</strong> that GeoJSON supports are listed in Table <a href="geojson-1.html#tab:geojson-geometry-types">7.1</a>.</p>
<table>
<caption><span id="tab:geojson-geometry-types">TABLE 7.1: </span> GeoJSON geometry types</caption>
<colgroup>
<col width="33%" />
<col width="66%" />
</colgroup>
<thead>
<tr class="header">
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>"Point"</code></td>
<td>A single point</td>
</tr>
<tr class="even">
<td><code>"LineString"</code></td>
<td>Sequence of connected points forming a line</td>
</tr>
<tr class="odd">
<td><code>"Polygon"</code></td>
<td>Sequence of connected points “closed” to form a polygon, possibly having one or more holes</td>
</tr>
<tr class="even">
<td><code>"MultiPoint"</code></td>
<td>Set of points</td>
</tr>
<tr class="odd">
<td><code>"MultiLineString"</code></td>
<td>Set of lines</td>
</tr>
<tr class="even">
<td><code>"MultiPolygon"</code></td>
<td>Set of polygons</td>
</tr>
<tr class="odd">
<td><code>"GeometryCollection"</code></td>
<td>Set of geometries of any type except for <code>"GeometryCollection"</code></td>
</tr>
</tbody>
</table>
<p>A <code>"Feature"</code> in GeoJSON contains a geometry object and additional non-spatial properties, also known as <strong>attributes</strong>. Finally, a <code>"FeatureCollection"</code> represents a collection of features. The following Sections <a href="geojson-1.html#geometries">7.3.2</a>–<a href="geojson-1.html#feature-collections">7.3.4</a> demonstrate the formatting of GeoJSON strings from the nine above-mentioned GeoJSON types: </p>
<ul>
<li>Section <a href="geojson-1.html#geometries">7.3.2</a>—7 geometry types</li>
<li>Section <a href="geojson-1.html#features">7.3.3</a>—1 <code>"Feature"</code></li>
<li>Section <a href="geojson-1.html#feature-collections">7.3.4</a>—1 <code>"FeatureCollection"</code></li>
</ul>
</div>
<div id="geometries" class="section level3" number="7.3.2">
<h3><span class="header-section-number">7.3.2</span> Geometries</h3>
<div id="general-structure" class="section level4" number="7.3.2.1">
<h4><span class="header-section-number">7.3.2.1</span> General structure</h4>
<p>A GeoJSON string for representing either of the first six geometry types, i.e., all types except for <code>"GeometryCollection"</code>, is composed of two properties<a href="#fn67" class="footnote-ref" id="fnref67"><sup>67</sup></a>: </p>
<ul>
<li><code>"type"</code>—The geometry type (a string, such as <code>"Point"</code>)</li>
<li><code>"coordinates"</code>—The coordinates (an array, such as <code>[30, 10]</code>)</li>
</ul>
<p>For example, the following GeoJSON string is an example of a <code>"Point"</code> geometry:</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb242-1"><a href="geojson-1.html#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span> </span>
<span id="cb242-2"><a href="geojson-1.html#cb242-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;Point&quot;</span><span class="fu">,</span> </span>
<span id="cb242-3"><a href="geojson-1.html#cb242-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;coordinates&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="dv">30</span><span class="ot">,</span> <span class="dv">10</span><span class="ot">]</span></span>
<span id="cb242-4"><a href="geojson-1.html#cb242-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>The <code>"type"</code> property can take one of the seven strings: <code>"Point"</code>, <code>"LineString"</code>, <code>"Polygon"</code>, <code>"MultiPoint"</code>, <code>"MultiLineString"</code>, <code>"MultiPolygon"</code> or <code>"GeometryCollection"</code> (Table <a href="geojson-1.html#tab:geojson-geometry-types">7.1</a>). The <code>"coordinates"</code> property is specified with an array. The basic unit of the coordinate array is the <strong>point coordinate</strong>. According to the GeoJSON <a href="https://tools.ietf.org/html/rfc7946">specification</a>, point coordinates should refer to two-dimensional<a href="#fn68" class="footnote-ref" id="fnref68"><sup>68</sup></a> locations in geographical units of longitude and latitude (<code>ESPG:4326</code>), i.e., <code>[lon, lat]</code><a href="#fn69" class="footnote-ref" id="fnref69"><sup>69</sup></a>. The basic point coordinate can be used on its own (for <code>"Point"</code>, as shown in the above GeoJSON example), or as a component in higher hierarchical level arrays for the other geometry types (see below). </p>
<p>Now that we covered the things that are common to the seven GeoJSON geometry types, we focus on the specifics of each. Overall, the seven geometry types can be conceptually divided into three groups, based on their complexity: </p>
<ul>
<li><code>"Point"</code>, <code>"LineString"</code>, <code>"Polygon"</code>—<strong>Single-part</strong> geometries, where the geometry consists of <em>one</em> shape of one type (Section <a href="geojson-1.html#single-part-geometries">7.3.2.2</a>)</li>
<li><code>"MultiPoint"</code>, <code>"MultiLineString"</code>, <code>"MultiPolygon"</code>—<strong>Multi-part</strong> geometries, where the geometry consists of <em>one or more</em> shapes of one type (Section <a href="geojson-1.html#multi-part-geometries">7.3.2.3</a>)</li>
<li><code>"GeometryCollection"</code>—<strong>Geometry collections</strong>, where the geometry can consist of one or more shapes of <em>any</em> type (Section <a href="geojson-1.html#geometry-collections">7.3.2.4</a>)</li>
</ul>
<div class="figure" style="text-align: center"><span id="fig:simple-feature-types"></span>
<img src="images/simple_feature_types.png" alt="Seven Simple Feature geometry types supported by the GeoJSON format" width="100%" />
<p class="caption">
FIGURE 7.1: Seven Simple Feature geometry types supported by the GeoJSON format
</p>
</div>
</div>
<div id="single-part-geometries" class="section level4" number="7.3.2.2">
<h4><span class="header-section-number">7.3.2.2</span> Single-part geometries</h4>
<p>For single-part geometry types, coordinates are specified as follows:</p>
<ul>
<li><code>"Point"</code> coordinates are specified with a single point coordinate (e.g., <code>[30, 10]</code>).</li>
<li><code>"LineString"</code> coordinates are specified with an array of point coordinates (e.g., <code>[[30, 10], [10, 30], [40, 40]]</code>).</li>
<li><code>"Polygon"</code> coordinates are specified with an array of arrays of point coordinates, where each array of point coordinates specifies the <strong>exterior</strong> border ring (first array), or polygon <strong>holes</strong> (all other arrays, if any). Also, the last coordinate in each set is equal to the first one, to form a closed ring (e.g., <code>[[[30, 10], [40, 40], [20, 40], [10, 20], [30, 10]]]</code>).</li>
</ul>
<p>Note how there is an increasing number of hierarchical levels in the coordinates array for these three geometry types:</p>
<ul>
<li>A <code>"Point"</code> has <strong>one</strong> level <code>[...]</code>.</li>
<li>A <code>"LineString"</code> has <strong>two</strong> levels <code>[[...]]</code>.</li>
<li>A <code>"Polygon"</code> has <strong>three</strong> levels <code>[[[...]]]</code>.</li>
</ul>
<p>Table <a href="geojson-1.html#tab:geojson-single-part1">7.2</a> shows several examples of single-part geometry types, including two varieties of <code>"Polygon"</code> geometries: <em>with</em> holes and <em>without</em> holes.</p>
<table>
<caption>
<span id="tab:geojson-single-part1">TABLE 7.2: </span> GeoJSON single-part geometries
</caption>
<tr>
<th>
Type
</th>
<th colspan="2">
Examples
</th>
</tr>
<tr>
<td>
<code>Point</code>
</td>
<td>
<img src="images/SFA_Point.svg" width="51" height="51">
</td>
<td>
<div id="cb241" class="sourceCode">
<pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb241-1" data-line-number="1"><span class="fu">{</span> </a>
<a class="sourceLine" id="cb241-2" data-line-number="2">  <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"Point"</span><span class="fu">,</span> </a>
<a class="sourceLine" id="cb241-3" data-line-number="3">  <span class="dt">"coordinates"</span><span class="fu">:</span> <span class="ot">[</span><span class="dv">30</span><span class="ot">,</span> <span class="dv">10</span><span class="ot">]</span></a>
<a class="sourceLine" id="cb241-4" data-line-number="4"><span class="fu">}</span></a></code></pre>
</div>
</td>
</tr>
<tr>
<td>
<code>LineString</code>
</td>
<td>
<img src="images/SFA_LineString.svg" width="51" height="51">
</td>
<td>
<div id="cb242" class="sourceCode">
<pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb242-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb242-2" data-line-number="2">  <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"LineString"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb242-3" data-line-number="3">  <span class="dt">"coordinates"</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb242-4" data-line-number="4">      <span class="ot">[</span><span class="dv">30</span><span class="ot">,</span> <span class="dv">10</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">10</span><span class="ot">,</span> <span class="dv">30</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">40</span><span class="ot">,</span> <span class="dv">40</span><span class="ot">]</span></a>
<a class="sourceLine" id="cb242-5" data-line-number="5">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb242-6" data-line-number="6"><span class="fu">}</span></a></code></pre>
</div>
</td>
</tr>
<tr>
<td rowspan="2">
<code>Polygon</code>
</td>
<td>
<img src="images/SFA_Polygon.svg" width="51" height="51">
</td>
<td>
<div id="cb243" class="sourceCode">
<pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb243-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb243-2" data-line-number="2">  <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"Polygon"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb243-3" data-line-number="3">  <span class="dt">"coordinates"</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb243-4" data-line-number="4">      <span class="ot">[[</span><span class="dv">30</span><span class="ot">,</span> <span class="dv">10</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">40</span><span class="ot">,</span> <span class="dv">40</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">20</span><span class="ot">,</span> <span class="dv">40</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">10</span><span class="ot">,</span> <span class="dv">20</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">30</span><span class="ot">,</span> <span class="dv">10</span><span class="ot">]]</span></a>
<a class="sourceLine" id="cb243-5" data-line-number="5">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb243-6" data-line-number="6"><span class="fu">}</span></a></code></pre>
</div>
</td>
</tr>
<tr>
<td>
<img src="images/SFA_Polygon_with_hole.svg" width="51" height="51">
</td>
<td>
<div id="cb244" class="sourceCode">
<pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb244-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb244-2" data-line-number="2">  <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"Polygon"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb244-3" data-line-number="3">  <span class="dt">"coordinates"</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb244-4" data-line-number="4">      <span class="ot">[[</span><span class="dv">35</span><span class="ot">,</span> <span class="dv">10</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">45</span><span class="ot">,</span> <span class="dv">45</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">15</span><span class="ot">,</span> <span class="dv">40</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">10</span><span class="ot">,</span> <span class="dv">20</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">35</span><span class="ot">,</span> <span class="dv">10</span><span class="ot">]],</span></a>
<a class="sourceLine" id="cb244-5" data-line-number="5">      <span class="ot">[[</span><span class="dv">20</span><span class="ot">,</span> <span class="dv">30</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">35</span><span class="ot">,</span> <span class="dv">35</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">30</span><span class="ot">,</span> <span class="dv">20</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">20</span><span class="ot">,</span> <span class="dv">30</span><span class="ot">]]</span></a>
<a class="sourceLine" id="cb244-6" data-line-number="6">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb244-7" data-line-number="7"><span class="fu">}</span></a></code></pre>
</div>
</td>
</tr>
</table>
</div>
<div id="multi-part-geometries" class="section level4" number="7.3.2.3">
<h4><span class="header-section-number">7.3.2.3</span> Multi-part geometries</h4>
<p>Multi-part geometry types are similar to their single-part counterparts. The only difference is that one more hierarchical level is added into the coordinates array, for specifying <em>multiple shapes</em>. Therefore: </p>
<ul>
<li>A <code>"MultiPoint"</code> has <strong>two</strong> levels <code>[[...]]</code>.</li>
<li>A <code>"MultiLineString"</code> has <strong>three</strong> levels <code>[[[...]]]</code>.</li>
<li>A <code>"MultiPolygon"</code> has <strong>four</strong> levels <code>[[[[...]]]]</code>.</li>
</ul>
<p>For example, a <code>"MultiLineString"</code> consists of an array of arrays of arrays, or an array of <code>"LineString"</code> coordinates, for defining several line <strong>parts</strong>, as in <code>[[[10, 10], [20, 20], [10, 40]], [[40, 40], [30, 30], [40, 20], [30, 10]]]</code>. Table <a href="geojson-1.html#tab:geojson-multi-part1">7.3</a> gives examples of multi-part geometry types. </p>
<table>
<caption>
<span id="tab:geojson-multi-part1">TABLE 7.3: </span> GeoJSON multi-part geometries
</caption>
<tr>
<th>
Type
</th>
<th colspan="2">
Examples
</th>
</tr>
<tr>
<td>
<code>MultiPoint</code>
</td>
<td>
<img src="images/SFA_MultiPoint.svg" width="51" height="51">
</td>
<td>
<div id="cb242" class="sourceCode">
<pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb242-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb242-2" data-line-number="2">  <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"MultiPoint"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb242-3" data-line-number="3">  <span class="dt">"coordinates"</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb242-4" data-line-number="4">        <span class="ot">[</span><span class="dv">10</span><span class="ot">,</span> <span class="dv">40</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">40</span><span class="ot">,</span> <span class="dv">30</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">20</span><span class="ot">,</span> <span class="dv">20</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">30</span><span class="ot">,</span> <span class="dv">10</span><span class="ot">]</span></a>
<a class="sourceLine" id="cb242-5" data-line-number="5">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb242-6" data-line-number="6"><span class="fu">}</span></a></code></pre>
</div>
</td>
</tr>
<tr>
<td>
<code>MultiLineString</code>
</td>
<td>
<img src="images/SFA_MultiLineString.svg" width="51" height="51">
</td>
<td>
<div id="cb243" class="sourceCode">
<pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb243-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb243-2" data-line-number="2">  <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"MultiLineString"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb243-3" data-line-number="3">  <span class="dt">"coordinates"</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb243-4" data-line-number="4">        <span class="ot">[[</span><span class="dv">10</span><span class="ot">,</span> <span class="dv">10</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">20</span><span class="ot">,</span> <span class="dv">20</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">10</span><span class="ot">,</span> <span class="dv">40</span><span class="ot">]],</span> </a>
<a class="sourceLine" id="cb243-5" data-line-number="5">        <span class="ot">[[</span><span class="dv">40</span><span class="ot">,</span> <span class="dv">40</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">30</span><span class="ot">,</span> <span class="dv">30</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">40</span><span class="ot">,</span> <span class="dv">20</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">30</span><span class="ot">,</span> <span class="dv">10</span><span class="ot">]]</span></a>
<a class="sourceLine" id="cb243-6" data-line-number="6">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb243-7" data-line-number="7"><span class="fu">}</span></a></code></pre>
</div>
</td>
</tr>
<tr>
<td rowspan="2">
<code>MultiPolygon</code>
</td>
<td>
<img src="images/SFA_MultiPolygon.svg" width="51" height="51">
</td>
<td>
<div id="cb244" class="sourceCode">
<pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb244-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb244-2" data-line-number="2">  <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"MultiPolygon"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb244-3" data-line-number="3">  <span class="dt">"coordinates"</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb244-4" data-line-number="4">      <span class="ot">[</span></a>
<a class="sourceLine" id="cb244-5" data-line-number="5">        <span class="ot">[[</span><span class="dv">30</span><span class="ot">,</span> <span class="dv">20</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">45</span><span class="ot">,</span> <span class="dv">40</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">10</span><span class="ot">,</span> <span class="dv">40</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">30</span><span class="ot">,</span> <span class="dv">20</span><span class="ot">]]</span></a>
<a class="sourceLine" id="cb244-6" data-line-number="6">      <span class="ot">],</span> </a>
<a class="sourceLine" id="cb244-7" data-line-number="7">      <span class="ot">[</span></a>
<a class="sourceLine" id="cb244-8" data-line-number="8">        <span class="ot">[[</span><span class="dv">15</span><span class="ot">,</span> <span class="dv">5</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">40</span><span class="ot">,</span> <span class="dv">10</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">10</span><span class="ot">,</span> <span class="dv">20</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">5</span><span class="ot">,</span> <span class="dv">10</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">15</span><span class="ot">,</span> <span class="dv">5</span><span class="ot">]]</span></a>
<a class="sourceLine" id="cb244-9" data-line-number="9">      <span class="ot">]</span></a>
<a class="sourceLine" id="cb244-10" data-line-number="10">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb244-11" data-line-number="11"><span class="fu">}</span></a></code></pre>
</div>
</td>
</tr>
<tr>
<td>
<img src="images/SFA_MultiPolygon_with_hole.svg" width="51" height="51">
</td>
<td>
<div id="cb245" class="sourceCode">
<pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb245-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb245-2" data-line-number="2">  <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"MultiPolygon"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb245-3" data-line-number="3">  <span class="dt">"coordinates"</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb245-4" data-line-number="4">    <span class="ot">[</span></a>
<a class="sourceLine" id="cb245-5" data-line-number="5">      <span class="ot">[[</span><span class="dv">40</span><span class="ot">,</span> <span class="dv">40</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">20</span><span class="ot">,</span> <span class="dv">45</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">45</span><span class="ot">,</span> <span class="dv">30</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">40</span><span class="ot">,</span> <span class="dv">40</span><span class="ot">]]</span></a>
<a class="sourceLine" id="cb245-6" data-line-number="6">    <span class="ot">],</span></a>
<a class="sourceLine" id="cb245-7" data-line-number="7">    <span class="ot">[</span></a>
<a class="sourceLine" id="cb245-8" data-line-number="8">      <span class="ot">[[</span><span class="dv">20</span><span class="ot">,</span> <span class="dv">35</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">10</span><span class="ot">,</span> <span class="dv">30</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">10</span><span class="ot">,</span> <span class="dv">10</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">30</span><span class="ot">,</span> <span class="dv">5</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">45</span><span class="ot">,</span> <span class="dv">20</span><span class="ot">],</span> </a>
<a class="sourceLine" id="cb245-9" data-line-number="9">      <span class="ot">[</span><span class="dv">20</span><span class="ot">,</span> <span class="dv">35</span><span class="ot">]],</span> </a>
<a class="sourceLine" id="cb245-10" data-line-number="10">      <span class="ot">[[</span><span class="dv">30</span><span class="ot">,</span> <span class="dv">20</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">20</span><span class="ot">,</span> <span class="dv">15</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">20</span><span class="ot">,</span> <span class="dv">25</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">30</span><span class="ot">,</span> <span class="dv">20</span><span class="ot">]]</span></a>
<a class="sourceLine" id="cb245-11" data-line-number="11">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb245-12" data-line-number="12">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb245-13" data-line-number="13"><span class="fu">}</span></a></code></pre>
</div>
</td>
</tr>
</table>
</div>
<div id="geometry-collections" class="section level4" number="7.3.2.4">
<h4><span class="header-section-number">7.3.2.4</span> Geometry collections</h4>
<p>A geometry collection is a set of several geometries, where each geometry is one of the previously listed six types, i.e., any geometry type excluding <code>"GeometryCollection"</code>. For example, a <code>"GeometryCollection"</code> consisting of two geometries, a <code>"Point"</code> and a <code>"MultiLineString"</code>, can be defined as follows:</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb243-1"><a href="geojson-1.html#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb243-2"><a href="geojson-1.html#cb243-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;GeometryCollection&quot;</span><span class="fu">,</span></span>
<span id="cb243-3"><a href="geojson-1.html#cb243-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;geometries&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb243-4"><a href="geojson-1.html#cb243-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb243-5"><a href="geojson-1.html#cb243-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;Point&quot;</span><span class="fu">,</span></span>
<span id="cb243-6"><a href="geojson-1.html#cb243-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;coordinates&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="er">...</span><span class="ot">]</span></span>
<span id="cb243-7"><a href="geojson-1.html#cb243-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb243-8"><a href="geojson-1.html#cb243-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb243-9"><a href="geojson-1.html#cb243-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;MultiLineString&quot;</span><span class="fu">,</span></span>
<span id="cb243-10"><a href="geojson-1.html#cb243-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;coordinates&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="er">...</span><span class="ot">]</span></span>
<span id="cb243-11"><a href="geojson-1.html#cb243-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb243-12"><a href="geojson-1.html#cb243-12" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb243-13"><a href="geojson-1.html#cb243-13" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>where <code>[...]</code> are the coordinate arrays for each geometry. Table <a href="geojson-1.html#tab:geojson-geometry-collection1">7.4</a> shows an example of a geometry collection GeoJSON string. </p>
<table>
<caption>
<span id="tab:geojson-geometry-collection1">TABLE 7.4: </span> GeoJSON geometry collection
</caption>
<tr>
<th>
Type
</th>
<th colspan="2">
Examples
</th>
</tr>
<tr>
<td>
<code>GeometryCollection</code>
</td>
<td>
<img src="images/SFA_GeometryCollection.svg" width="51" height="51">
</td>
<td>
<div id="cb247" class="sourceCode">
<pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb247-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb247-2" data-line-number="2">  <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"GeometryCollection"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb247-3" data-line-number="3">  <span class="dt">"geometries"</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb247-4" data-line-number="4">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb247-5" data-line-number="5">      <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"Point"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb247-6" data-line-number="6">      <span class="dt">"coordinates"</span><span class="fu">:</span> <span class="ot">[</span><span class="dv">10</span><span class="ot">,</span> <span class="dv">30</span><span class="ot">]</span></a>
<a class="sourceLine" id="cb247-7" data-line-number="7">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb247-8" data-line-number="8">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb247-9" data-line-number="9">      <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"MultiLineString"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb247-10" data-line-number="10">      <span class="dt">"coordinates"</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb247-11" data-line-number="11">          <span class="ot">[[</span><span class="dv">10</span><span class="ot">,</span> <span class="dv">10</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">20</span><span class="ot">,</span> <span class="dv">20</span><span class="ot">]],</span> </a>
<a class="sourceLine" id="cb247-12" data-line-number="12">          <span class="ot">[[</span><span class="dv">40</span><span class="ot">,</span> <span class="dv">40</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">30</span><span class="ot">,</span> <span class="dv">30</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">40</span><span class="ot">,</span> <span class="dv">20</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">30</span><span class="ot">,</span> <span class="dv">10</span><span class="ot">]]</span></a>
<a class="sourceLine" id="cb247-13" data-line-number="13">      <span class="ot">]</span></a>
<a class="sourceLine" id="cb247-14" data-line-number="14">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb247-15" data-line-number="15">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb247-16" data-line-number="16"><span class="fu">}</span></a></code></pre>
</div>
</td>
</tr>
</table>
<p>It is harder to deal with geometry collections when applying spatial operations, because not every spatial operator (Section <a href="databases.html#spatial-queries">9.6.4</a>) has the same meaning (if any) for all geometry types. For example, calculating line length is meaningful for a <code>"MultiLineString"</code> geometry, but not for a <code>"Point"</code> geometry. For this reason, geometry collections are rarely encountered in practice, and we will not use them in this book. </p>
</div>
</div>
<div id="features" class="section level3" number="7.3.3">
<h3><span class="header-section-number">7.3.3</span> Features</h3>
<p>A <code>"Feature"</code> is formed when a geometry is combined with non-spatial attributes, to form a single object. The non-spatial attributes are encompassed in a property named <code>"properties"</code>, containing one or more name-value pairs—one for each attribute. For example, the following <code>"Feature"</code> represents a geometry with two attributes, named <code>"fill"</code> and <code>"area"</code>: </p>
<div class="sourceCode" id="cb244"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb244-1"><a href="geojson-1.html#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb244-2"><a href="geojson-1.html#cb244-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;Feature&quot;</span><span class="fu">,</span></span>
<span id="cb244-3"><a href="geojson-1.html#cb244-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;geometry&quot;</span><span class="fu">:</span> <span class="fu">{</span><span class="er">...</span><span class="fu">},</span></span>
<span id="cb244-4"><a href="geojson-1.html#cb244-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;properties&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb244-5"><a href="geojson-1.html#cb244-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;fill&quot;</span><span class="fu">:</span> <span class="st">&quot;red&quot;</span><span class="fu">,</span></span>
<span id="cb244-6"><a href="geojson-1.html#cb244-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;area&quot;</span><span class="fu">:</span> <span class="dv">3272386</span></span>
<span id="cb244-7"><a href="geojson-1.html#cb244-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb244-8"><a href="geojson-1.html#cb244-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>where <code>{...}</code> represents a geometry object, i.e., one of the seven geometry types shown above. Table <a href="geojson-1.html#tab:geojson-feature1">7.5</a> shows an example of a GeoJSON feature. </p>
<table>
<caption>
<span id="tab:geojson-feature1">TABLE 7.5: </span> GeoJSON feature
</caption>
<tr>
<th>
Type
</th>
<th colspan="2">
Examples
</th>
</tr>
<tr>
<td>
<code>Feature</code>
</td>
<td>
<img src="images/SFA_Feature.svg" width="51" height="51">
</td>
<td>
<div id="cb244" class="sourceCode">
<pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb244-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb244-2" data-line-number="2">  <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"Feature"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb244-3" data-line-number="3">  <span class="dt">"geometry"</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb244-4" data-line-number="4">    <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"Polygon"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb244-5" data-line-number="5">    <span class="dt">"coordinates"</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb244-6" data-line-number="6">        <span class="ot">[[</span><span class="dv">15</span><span class="ot">,</span> <span class="dv">5</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">40</span><span class="ot">,</span> <span class="dv">10</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">10</span><span class="ot">,</span> <span class="dv">20</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">5</span><span class="ot">,</span> <span class="dv">10</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">15</span><span class="ot">,</span> <span class="dv">5</span><span class="ot">]]</span></a>
<a class="sourceLine" id="cb244-7" data-line-number="7">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb244-8" data-line-number="8">  <span class="fu">},</span></a>
<a class="sourceLine" id="cb244-9" data-line-number="9">  <span class="dt">"properties"</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb244-10" data-line-number="10">    <span class="dt">"fill"</span><span class="fu">:</span> <span class="st">"red"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb244-11" data-line-number="11">    <span class="dt">"area"</span><span class="fu">:</span> <span class="dv">3272386</span></a>
<a class="sourceLine" id="cb244-12" data-line-number="12">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb244-13" data-line-number="13"><span class="fu">}</span></a></code></pre>
</div>
</td>
</tr>
</table>
</div>
<div id="feature-collections" class="section level3" number="7.3.4">
<h3><span class="header-section-number">7.3.4</span> Feature collections</h3>
<p>A <code>"FeatureCollection"</code> is, like the name suggests, a collection of <code>"Feature"</code> objects. The separate features are contained in an array, comprising the <code>"features"</code> property. For example, a <code>"FeatureCollection"</code> composed of four features can be specified as follows:</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb245-1"><a href="geojson-1.html#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb245-2"><a href="geojson-1.html#cb245-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;FeatureCollection&quot;</span><span class="fu">,</span></span>
<span id="cb245-3"><a href="geojson-1.html#cb245-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;features&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb245-4"><a href="geojson-1.html#cb245-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span><span class="er">...</span><span class="fu">}</span><span class="ot">,</span></span>
<span id="cb245-5"><a href="geojson-1.html#cb245-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span><span class="er">...</span><span class="fu">}</span><span class="ot">,</span></span>
<span id="cb245-6"><a href="geojson-1.html#cb245-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span><span class="er">...</span><span class="fu">}</span><span class="ot">,</span></span>
<span id="cb245-7"><a href="geojson-1.html#cb245-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span><span class="er">...</span><span class="fu">}</span></span>
<span id="cb245-8"><a href="geojson-1.html#cb245-8" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb245-9"><a href="geojson-1.html#cb245-9" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>where each <code>{...}</code> represents a <code>"Feature"</code>. Table <a href="geojson-1.html#tab:geojson-feature-collection1">7.6</a> shows an example of a GeoJSON feature collection.</p>
<table>
<caption>
<span id="tab:geojson-feature-collection1">TABLE 7.6: </span> GeoJSON feature
</caption>
<tr>
<th>
Type
</th>
<th colspan="2">
Examples
</th>
</tr>
<tr>
<td>
<code>FeatureCollection</code>
</td>
<td>
<img src="images/SFA_FeatureCollection.svg" width="51" height="51">
</td>
<td>
<div id="cb245" class="sourceCode">
<pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb245-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb245-2" data-line-number="2">  <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"FeatureCollection"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb245-3" data-line-number="3">  <span class="dt">"features"</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb245-4" data-line-number="4">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb245-5" data-line-number="5">      <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"Feature"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb245-6" data-line-number="6">      <span class="dt">"geometry"</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb245-7" data-line-number="7">        <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"Polygon"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb245-8" data-line-number="8">        <span class="dt">"coordinates"</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb245-9" data-line-number="9">            <span class="ot">[[</span><span class="dv">30</span><span class="ot">,</span> <span class="dv">20</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">45</span><span class="ot">,</span> <span class="dv">40</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">10</span><span class="ot">,</span> <span class="dv">40</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">30</span><span class="ot">,</span> <span class="dv">20</span><span class="ot">]]</span></a>
<a class="sourceLine" id="cb245-10" data-line-number="10">        <span class="ot">]</span></a>
<a class="sourceLine" id="cb245-11" data-line-number="11">      <span class="fu">},</span></a>
<a class="sourceLine" id="cb245-12" data-line-number="12">      <span class="dt">"properties"</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb245-13" data-line-number="13">        <span class="dt">"fill"</span><span class="fu">:</span> <span class="st">"green"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb245-14" data-line-number="14">        <span class="dt">"area"</span><span class="fu">:</span> <span class="dv">3565747</span></a>
<a class="sourceLine" id="cb245-15" data-line-number="15">      <span class="fu">}</span></a>
<a class="sourceLine" id="cb245-16" data-line-number="16">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb245-17" data-line-number="17">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb245-18" data-line-number="18">      <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"Feature"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb245-19" data-line-number="19">      <span class="dt">"geometry"</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb245-20" data-line-number="20">        <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"Polygon"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb245-21" data-line-number="21">        <span class="dt">"coordinates"</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb245-22" data-line-number="22">            <span class="ot">[[</span><span class="dv">15</span><span class="ot">,</span> <span class="dv">5</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">40</span><span class="ot">,</span> <span class="dv">10</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">10</span><span class="ot">,</span> <span class="dv">20</span><span class="ot">],</span> <span class="ot">[</span><span class="dv">5</span><span class="ot">,</span> <span class="dv">10</span><span class="ot">],</span> </a>
<a class="sourceLine" id="cb245-23" data-line-number="23">            <span class="ot">[</span><span class="dv">15</span><span class="ot">,</span> <span class="dv">5</span><span class="ot">]]</span></a>
<a class="sourceLine" id="cb245-24" data-line-number="24">        <span class="ot">]</span></a>
<a class="sourceLine" id="cb245-25" data-line-number="25">      <span class="fu">},</span></a>
<a class="sourceLine" id="cb245-26" data-line-number="26">      <span class="dt">"properties"</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb245-27" data-line-number="27">        <span class="dt">"fill"</span><span class="fu">:</span> <span class="st">"red"</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb245-28" data-line-number="28">        <span class="dt">"area"</span><span class="fu">:</span> <span class="dv">3272386</span></a>
<a class="sourceLine" id="cb245-29" data-line-number="29">      <span class="fu">}</span></a>
<a class="sourceLine" id="cb245-30" data-line-number="30">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb245-31" data-line-number="31">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb245-32" data-line-number="32"><span class="fu">}</span></a></code></pre>
</div>
</td>
</tr>
</table>
<p>If you are coming from GIS background, the <code>"FeatureCollection"</code> GeoJSON type will seem the most natural one. For example, in the terminology of the Shapefile—the most commonly used format for vector layers in GIS software—a <code>"FeatureCollection"</code> is analogous to a layer with more than one feature and one or more attributes—which is by far the most commonly encountered case. A <code>"Feature"</code> is analogous to a layer containing a single feature, which is rarely encountered. Bare GeoJSON geometries, such as <code>"Point"</code> or <code>"MultiPolygon"</code>, have no analogs in the Shapefile format. </p>
<p>One more thing that may seem surprising for GIS software users is that a <code>"FeatureCollection"</code> does not have to be composed of features with the same type of geometry. For instance, in the above schematic GeoJSON <code>"FeatureCollection"</code>, the first two <code>{...}</code> features may have <code>"Point"</code> geometry while the other two <code>{...}</code> features can have <code>"Polygon"</code> geometry (or any other geometry type combination). This kind of flexibility is also not supported in the Shapefile format, where all of the features must have the same geometry type<a href="#fn70" class="footnote-ref" id="fnref70"><sup>70</sup></a>. </p>
</div>
</div>
<div id="editing-geojson" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> Editing GeoJSON</h2>
<div id="geojson-io" class="section level3" number="7.4.1">
<h3><span class="header-section-number">7.4.1</span> geojson.io</h3>
<p>The <a href="http://geojson.io/"><strong>geojson.io</strong></a> web application is great way to explore the GeoJSON format. This website contains an interactive map and a drawing control that you can use to draw new vector layers and to edit drawn ones. The GeoJSON string for the drawn content is displayed beside the map and is automatically synchronized with the currently drawn shapes while you are editing (Figure <a href="geojson-1.html#fig:geojson-io">7.2</a>).</p>
<div class="figure" style="text-align: center"><span id="fig:geojson-io"></span>
<img src="images/geojson_io.png" alt="The &lt;code&gt;geojson.io&lt;/code&gt; web application" width="100%" />
<p class="caption">
FIGURE 7.2: The <code>geojson.io</code> web application
</p>
</div>
<blockquote>
<ul>
<li>Browse to <a href="http://geojson.io/" class="uri">http://geojson.io</a>.</li>
<li>Paste one of the GeoJSON string examples from Tables <a href="geojson-1.html#tab:geojson-single-part1">7.2</a>–<a href="geojson-1.html#tab:geojson-feature-collection1">7.6</a> into the right-side panel. You should see the shapes displayed on the left-side map panel.</li>
<li>Use the drawing controls on the right of the map panel to draw some shapes on the map. You should see the GeoJSON string for the layer you created on the right-side text panel.</li>
</ul>
</blockquote>
<p>To understand a little better how web applications such as <a href="http://geojson.io/" class="uri">http://geojson.io</a> work, we will shortly create our own (partial) version of such an application, using Leaflet (Section <a href="geojson-1.html#geojson-viewer">7.6</a>).</p>
</div>
<div id="mapshaper" class="section level3" number="7.4.2">
<h3><span class="header-section-number">7.4.2</span> mapshaper</h3>
<p>In our introduction to the GeoJSON format (Section <a href="geojson-1.html#what-is-geojson">7.2</a>), we mentioned that a major disadvantage of this format is large file size. This is an especially painful limitation in web mapping, where we are limited by internet connection bandwidth and by browser processing capabilities. Displaying very large GeoJSON in a web map can result in bad user experience, since the web map will take a long time to load and will not be very responsive. Plainly speaking, GeoJSON size can get large when we have one or more of the following: </p>
<ul>
<li>A lot of <strong>features</strong></li>
<li>A lot of <strong>attributes</strong></li>
<li>High <strong>precision</strong> of the geometry (many digits in each coordinate)</li>
<li>Highly <strong>complex</strong> geometry (many coordinates)</li>
</ul>
<p>The first two are trivial to optimize: we just need to delete any non-essential features and attributes, keeping only the information actually displayed on the map. The third is also straightforward: we can round all coordinates to the minimal required precision, such as six digits for sub-meter (~0.1 m) precision (Section <a href="leaflet.html#introducing-map-events">6.9</a>). The fourth—geometry complexity—is more tricky to deal with. We can’t simply delete random coordinates of a complex line or polygon, because some coordinates are more important than others. Determining which coordinates should be kept and which ones can be safely deleted requires a <strong>simplification</strong> algorithm. For example, <a href="https://en.wikipedia.org/wiki/Ramer–Douglas–Peucker_algorithm"><strong>Douglas–Peucker</strong></a> is a well-known geometry simplification algorithm, implemented in numerous GIS software.</p>
<p><a href="https://mapshaper.org/"><strong>mapshaper</strong></a> is currently one of the best tools for geometry simplification. It is a free and open-source software with several geometry-editing functions, though it is best known for fast and easy simplification of vector layers. Importantly, mapshaper performs <em>topologically-aware</em> polygon simplification. This means that shared boundaries between adjacent polygons are always kept intact, with no gaps or overlaps, even at high levels of simplification. mapshaper comes in two versions: </p>
<ul>
<li><a href="https://github.com/mbloch/mapshaper"><strong>Command-line tool</strong></a></li>
<li><strong>Interactive web interface</strong> at <a href="https://mapshaper.org/" class="uri">https://mapshaper.org/</a> (Figure <a href="geojson-1.html#fig:mapshaper">7.3</a>)</li>
</ul>
<p>Take a moment to try mapshaper’s web interface in the following exercise.</p>
<div class="figure" style="text-align: center"><span id="fig:mapshaper"></span>
<img src="images/mapshaper.png" alt="The &lt;code&gt;mapshaper.org&lt;/code&gt; web application" width="100%" />
<p class="caption">
FIGURE 7.3: The <code>mapshaper.org</code> web application
</p>
</div>
<blockquote>
<ul>
<li>Download the <a href="examples/data/county2.geojson" download>file</a> named <code>county2.geojson</code>, which is a detailed polygonal layer of U.S. counties, from the online version of the book (Appendix <a href="associated-files.html#associated-files">A</a>), or obtain any other detailed polygonal layer from the web or from elsewhere. The <code>county2.geojson</code> file is very large (66.5 MB), and has some topological errors. We are going to fix the errors, then simplify the layer to optimize its usage in web maps, using <strong>mapshaper</strong>.</li>
<li>Drag and drop the file into the <a href="https://mapshaper.org/" class="uri">https://mapshaper.org/</a> main screen, or use the <strong>Select</strong> button, then click <strong>Import</strong>.</li>
<li>The red dots you see (Figure <a href="geojson-1.html#fig:mapshaper">7.3</a>) are line intersections, which are considered topological errors. To fix these, re-import the file, this time selecting the <strong>snap vertices</strong> option. There should be no red dots on the map now, since all line intersections have been fixed.</li>
<li>Click the <strong>simplify</strong> button on the upper-right corner, then click <strong>Apply</strong>.</li>
<li>Use the slider on the top of the page to select the level of simplification. Zoom-in on coastal areas with lots of details (such as in Florida), then move the slider to observe the simplification process more clearly.</li>
<li>After choosing a level of simplification you are happy with, click <strong>Export</strong>, choose the GeoJSON format, then click <strong>Export</strong> once more. The simplified layer should now be downloaded. Check the size of the new file, which should be reduced according to the level of simplification you chose. </li>
</ul>
</blockquote>
</div>
</div>
<div id="adding-geojson-to-leaflet-map" class="section level2" number="7.5">
<h2><span class="header-section-number">7.5</span> Adding GeoJSON to Leaflet map</h2>
<p>Below is an example of a GeoJSON string. This particular GeoJSON is a <code>"FeatureCollection"</code> (Section <a href="geojson-1.html#feature-collections">7.3.4</a>). It contains two features of type <code>"Polygon"</code>, representing the borders of two states in the U.S. You can tell the polygons are quadrilateral (i.e., have four edges) by the fact that each of them is defined with five coordinate pairs—recall that, in GeoJSON, the last polygon coordinate is equal to the first, to form a closed shape (Section <a href="geojson-1.html#single-part-geometries">7.3.2.2</a>). Each polygon has one attribute named <code>"party"</code>, with one of the polygons having the value <code>"Republican"</code> and the other polygon having the value <code>"Democrat"</code>.</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb246-1"><a href="geojson-1.html#cb246-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb246-2"><a href="geojson-1.html#cb246-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;FeatureCollection&quot;</span><span class="fu">,</span></span>
<span id="cb246-3"><a href="geojson-1.html#cb246-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;features&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb246-4"><a href="geojson-1.html#cb246-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb246-5"><a href="geojson-1.html#cb246-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;Feature&quot;</span><span class="fu">,</span></span>
<span id="cb246-6"><a href="geojson-1.html#cb246-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;properties&quot;</span><span class="fu">:</span> <span class="fu">{</span><span class="dt">&quot;party&quot;</span><span class="fu">:</span> <span class="st">&quot;Republican&quot;</span><span class="fu">},</span></span>
<span id="cb246-7"><a href="geojson-1.html#cb246-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;geometry&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb246-8"><a href="geojson-1.html#cb246-8" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;Polygon&quot;</span><span class="fu">,</span></span>
<span id="cb246-9"><a href="geojson-1.html#cb246-9" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;coordinates&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb246-10"><a href="geojson-1.html#cb246-10" aria-hidden="true" tabindex="-1"></a>              <span class="ot">[[</span><span class="fl">-104.05</span><span class="ot">,</span> <span class="fl">48.99</span><span class="ot">],</span> <span class="ot">[</span><span class="fl">-97.22</span><span class="ot">,</span>  <span class="fl">48.98</span><span class="ot">],</span> </span>
<span id="cb246-11"><a href="geojson-1.html#cb246-11" aria-hidden="true" tabindex="-1"></a>              <span class="ot">[</span><span class="fl">-96.58</span><span class="ot">,</span>  <span class="fl">45.94</span><span class="ot">],</span> <span class="ot">[</span><span class="fl">-104.03</span><span class="ot">,</span> <span class="fl">45.94</span><span class="ot">],</span> </span>
<span id="cb246-12"><a href="geojson-1.html#cb246-12" aria-hidden="true" tabindex="-1"></a>              <span class="ot">[</span><span class="fl">-104.05</span><span class="ot">,</span> <span class="fl">48.99</span><span class="ot">]]</span></span>
<span id="cb246-13"><a href="geojson-1.html#cb246-13" aria-hidden="true" tabindex="-1"></a>          <span class="ot">]</span></span>
<span id="cb246-14"><a href="geojson-1.html#cb246-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb246-15"><a href="geojson-1.html#cb246-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span> </span>
<span id="cb246-16"><a href="geojson-1.html#cb246-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb246-17"><a href="geojson-1.html#cb246-17" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;Feature&quot;</span><span class="fu">,</span></span>
<span id="cb246-18"><a href="geojson-1.html#cb246-18" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;properties&quot;</span><span class="fu">:</span> <span class="fu">{</span><span class="dt">&quot;party&quot;</span><span class="fu">:</span> <span class="st">&quot;Democrat&quot;</span><span class="fu">},</span></span>
<span id="cb246-19"><a href="geojson-1.html#cb246-19" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;geometry&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb246-20"><a href="geojson-1.html#cb246-20" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;Polygon&quot;</span><span class="fu">,</span></span>
<span id="cb246-21"><a href="geojson-1.html#cb246-21" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;coordinates&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb246-22"><a href="geojson-1.html#cb246-22" aria-hidden="true" tabindex="-1"></a>              <span class="ot">[[</span><span class="fl">-109.05</span><span class="ot">,</span> <span class="fl">41.00</span><span class="ot">],</span> <span class="ot">[</span><span class="fl">-102.06</span><span class="ot">,</span> <span class="fl">40.99</span><span class="ot">],</span> </span>
<span id="cb246-23"><a href="geojson-1.html#cb246-23" aria-hidden="true" tabindex="-1"></a>              <span class="ot">[</span><span class="fl">-102.03</span><span class="ot">,</span> <span class="fl">36.99</span><span class="ot">],</span> <span class="ot">[</span><span class="fl">-109.04</span><span class="ot">,</span> <span class="fl">36.99</span><span class="ot">],</span> </span>
<span id="cb246-24"><a href="geojson-1.html#cb246-24" aria-hidden="true" tabindex="-1"></a>              <span class="ot">[</span><span class="fl">-109.05</span><span class="ot">,</span> <span class="fl">41.00</span><span class="ot">]]</span></span>
<span id="cb246-25"><a href="geojson-1.html#cb246-25" aria-hidden="true" tabindex="-1"></a>          <span class="ot">]</span></span>
<span id="cb246-26"><a href="geojson-1.html#cb246-26" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb246-27"><a href="geojson-1.html#cb246-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb246-28"><a href="geojson-1.html#cb246-28" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb246-29"><a href="geojson-1.html#cb246-29" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<blockquote>
<ul>
<li>Open the console and define a variable named <code>x</code> with the above object.</li>
<li>Type <code>x.features[0].geometry.coordinates[0][2][0]</code>.</li>
<li>What is the meaning of the number you got?</li>
</ul>
</blockquote>
<p>How can we add the above GeoJSON layer to a Leaflet map? We will start with the basic map in <code>example-06-02.html</code> (Section <a href="leaflet.html#creating-a-basic-web-map">6.5</a>) and make changes on top of it. Before we begin, let’s focus our map on the U.S. area and reduce the zoom level, so that our polygons will be visible on the initial map extent:</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb247-1"><a href="geojson-1.html#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> map <span class="op">=</span> L<span class="op">.</span><span class="fu">map</span>(<span class="st">&quot;map&quot;</span>)<span class="op">.</span><span class="fu">setView</span>([<span class="dv">43</span><span class="op">,</span> <span class="op">-</span><span class="dv">105</span>]<span class="op">,</span> <span class="dv">4</span>)<span class="op">;</span></span></code></pre></div>
<p>We are using the <code>.setView</code> method instead of the <code>L.map</code> option like we did in <code>example-06-02.html</code> (Section <a href="leaflet.html#adding-a-tile-layer">6.5.11</a>):</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb248-1"><a href="geojson-1.html#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> map <span class="op">=</span> L<span class="op">.</span><span class="fu">map</span>(<span class="st">&quot;map&quot;</span><span class="op">,</span> {<span class="dt">center</span><span class="op">:</span> [<span class="dv">43</span><span class="op">,</span> <span class="op">-</span><span class="dv">105</span>]<span class="op">,</span> <span class="dt">zoom</span><span class="op">:</span> <span class="dv">4</span>})<span class="op">;</span></span></code></pre></div>
<p>In the present example, both approaches are interchangeable. However, the <code>.setView</code> method offers more flexibility, since we can use it to dynamically modify our map-viewed extent, <em>after</em> the map was already created. Therefore it is useful to be familiar with both.</p>
<blockquote>
<ul>
<li>Open the <code>example-07-01.html</code> (Figure <a href="geojson-1.html#fig:example-07-01">7.4</a>) in the browser.</li>
<li>Run the expression <code>map.setView([60, -80], 3)</code> in the console.</li>
<li>What has happened?</li>
</ul>
</blockquote>
<p>Also, for the sake of diversity, let’s replace the OpenStreetMap tile layer with a different one, called <code>CartoDB.PositronNoLabels</code>. The code shown below<a href="#fn71" class="footnote-ref" id="fnref71"><sup>71</sup></a> was copied from the <em>Leaflet Provider Demo</em> website which was introduced in Section <a href="leaflet.html#tile-layer-providers">6.5.12</a>: </p>
<div class="sourceCode" id="cb249"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb249-1"><a href="geojson-1.html#cb249-1" aria-hidden="true" tabindex="-1"></a>L<span class="op">.</span><span class="fu">tileLayer</span>(<span class="st">&quot;https://cartodb-basemaps-{s}.global.[...]/{z}/{x}/{y}.png&quot;</span><span class="op">,</span> {</span>
<span id="cb249-2"><a href="geojson-1.html#cb249-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">attribution</span><span class="op">:</span> <span class="st">&#39;&amp;copy; &lt;a href=&quot;https://www.openstreetmap.org/[...]&lt;/a&gt;&#39;</span><span class="op">,</span></span>
<span id="cb249-3"><a href="geojson-1.html#cb249-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">subdomains</span><span class="op">:</span> <span class="st">&quot;abcd&quot;</span><span class="op">,</span></span>
<span id="cb249-4"><a href="geojson-1.html#cb249-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">maxZoom</span><span class="op">:</span> <span class="dv">19</span></span>
<span id="cb249-5"><a href="geojson-1.html#cb249-5" aria-hidden="true" tabindex="-1"></a>})<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span></code></pre></div>
<p>Now that we have a basic map with a tile layer focused on the U.S., let’s add the GeoJSON layer. First, we will create a variable named <code>states</code>, and assign the above GeoJSON object to that variable<a href="#fn72" class="footnote-ref" id="fnref72"><sup>72</sup></a>. Note that we are using the brackets notation <code>{}</code> to create the respective object out of the GeoJSON string right away, rather than entering it as text and using <code>JSON.parse</code> (Section <a href="javascript-basics.html#geojson">3.11.2</a>): </p>
<div class="sourceCode" id="cb250"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb250-1"><a href="geojson-1.html#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> states <span class="op">=</span> {</span>
<span id="cb250-2"><a href="geojson-1.html#cb250-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;type&quot;</span><span class="op">:</span> <span class="st">&quot;FeatureCollection&quot;</span><span class="op">,</span></span>
<span id="cb250-3"><a href="geojson-1.html#cb250-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb250-4"><a href="geojson-1.html#cb250-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Second, we use the <code>L.geoJSON</code> function, to add a GeoJSON layer to our map. The function accepts a GeoJSON object, and transforms it to a Leaflet <em>layer</em> object. The layer can then be added on the map using its <code>.addTo</code> method, the same way we added tile layers, and simple point, line, and polygon shapes in Chapter <a href="leaflet.html#leaflet">6</a>. The expression to convert the GeoJSON object to a Leaflet layer and add it on the map is given below: </p>
<div class="sourceCode" id="cb251"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb251-1"><a href="geojson-1.html#cb251-1" aria-hidden="true" tabindex="-1"></a>L<span class="op">.</span><span class="fu">geoJSON</span>(states)<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span></code></pre></div>
<p>After the last two expressions are added into our script, the resulting map (<code>example-07-01.html</code>) displays the GeoJSON polygons on top of the tile layer (Figure <a href="geojson-1.html#fig:example-07-01">7.4</a>). </p>
<div class="figure" style="text-align: center"><span id="fig:example-07-01"></span>
<iframe src="examples/example-07-01.html" width="100%" height="400px">
</iframe>
<p class="caption">
FIGURE 7.4: <code>example-07-01.html</code> <a href="examples/example-07-01.html" title="View the Example" target="_blank">(Click to view this example on its own)</a>
</p>
</div>
<p>Note that the GeoJSON layer is added with the default style, as we did not pass any options to the <code>L.geoJSON</code> function. In Chapter <a href="symbology-and-interactivity.html#symbology-and-interactivity">8</a>, we will learn how to set custom GeoJSON style, either the same way for all features (Section <a href="symbology-and-interactivity.html#constant-style">8.3</a>), or differently depending on attributes (Section <a href="symbology-and-interactivity.html#varying-style">8.4</a>) or events (Section <a href="symbology-and-interactivity.html#styling-in-response-to-events">8.7.1</a>).</p>
<p>Also, keep in mind that, by default, Leaflet expects GeoJSON in <strong>WGS84</strong> (<code>EPSG:4326</code>) geographic coordinates, i.e., <code>[lon, lat]</code> (Section <a href="leaflet.html#creating-map-object">6.5.9</a>), which is what we indeed have in this example—as well as all other example in the book. As mentioned in Section <a href="geojson-1.html#general-structure">7.3.2.1</a>, GeoJSON where the coordinates are given in other coordinate reference systems (CRS) does not conform to the GeoJSON specification, thus more rarely encountered and also less practical to use with Leaflet. For example, using non-WGS84 GeoJSON layers requires setting the entire map in a different CRS, which means that the standard tile layers cannot be loaded, as they are tailored for the WGS84 system. Unless there is some special reason to display the web map in a non-WGS84 CRS, in most cases it is more reasonable to just <em>transform</em> the GeoJSON to geographic coordinates before using it with Leaflet. </p>
</div>
<div id="geojson-viewer" class="section level2" number="7.6">
<h2><span class="header-section-number">7.6</span> GeoJSON viewer example</h2>
<div id="viewer-structure" class="section level3" number="7.6.1">
<h3><span class="header-section-number">7.6.1</span> Viewer structure</h3>
<p>Earlier in this chapter, we used the <strong>geojson.io</strong> web application to interactively view and edit GeoJSON (Section <a href="geojson-1.html#geojson-io">7.4.1</a>). In this section, we are going to recreate a simplified GeoJSON viewer of our own. While doing it, we will learn some more about using GeoJSON with Leaflet. Like <strong>geojson.io</strong>, the interface in our GeoJSON viewer will have two parts: </p>
<ul>
<li>An interactive map</li>
<li>A text editing area</li>
</ul>
<p>Right below the text editing area we are going to have a “submit” button (Figure <a href="geojson-1.html#fig:example-07-02">7.5</a>). Pressing on the button will display the GeoJSON string currently typed into the text area on the interactive map. </p>
</div>
<div id="viewer-html-and-css" class="section level3" number="7.6.2">
<h3><span class="header-section-number">7.6.2</span> HTML and CSS</h3>
<p>Once again, we start with the basic map <code>example-06-02.html</code> (Figure <a href="leaflet.html#fig:example-06-02">6.5</a>), modifying and adding further components on top of it. First of all, instead of having a full screen map <code>&lt;div id="map"&gt;</code>, we are going to have two <code>&lt;div&gt;</code> elements for the two parts of our page: </p>
<ul>
<li><code>&lt;div id="map"&gt;</code>—The map</li>
<li><code>&lt;div id="text"&gt;</code>—The text input area</li>
</ul>
<p>The HTML code of the two <code>&lt;div&gt;</code> elements is:</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb252-1"><a href="geojson-1.html#cb252-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;map&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></span>
<span id="cb252-2"><a href="geojson-1.html#cb252-2" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;text&quot;</span><span class="kw">&gt;</span></span>
<span id="cb252-3"><a href="geojson-1.html#cb252-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;textarea</span><span class="ot"> id=</span><span class="st">&quot;geojsontext&quot;</span><span class="kw">&gt;&lt;/textarea&gt;</span></span>
<span id="cb252-4"><a href="geojson-1.html#cb252-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;button&quot;</span><span class="ot"> id=</span><span class="st">&quot;submit&quot;</span><span class="ot"> value=</span><span class="st">&quot;Submit&quot;</span><span class="kw">&gt;</span></span>
<span id="cb252-5"><a href="geojson-1.html#cb252-5" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/div&gt;</span></span></code></pre></div>
<p>Note that the second element (<code>&lt;div id="text"&gt;</code>) contains two internal elements: a text input <code>&lt;textarea&gt;</code> (Section <a href="html.html#text-area">1.6.13.5</a>) and a button <code>&lt;input type="button"&gt;</code> (Section <a href="html.html#buttons">1.6.13.9</a>). The <code>&lt;textarea&gt;</code> text input element is similar to the <code>&lt;input type="text"&gt;</code> text input element (Section <a href="html.html#text-input">1.6.13.4</a>), but intended for <em>multi</em>-line rather than single-line text input. Next, we need some CSS to control the appearance and arrangement of these HTML elements:</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb253-1"><a href="geojson-1.html#cb253-1" aria-hidden="true" tabindex="-1"></a>html<span class="op">,</span> body {</span>
<span id="cb253-2"><a href="geojson-1.html#cb253-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">height</span>: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb253-3"><a href="geojson-1.html#cb253-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">margin</span>: <span class="dv">0</span><span class="op">;</span></span>
<span id="cb253-4"><a href="geojson-1.html#cb253-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">padding</span>: <span class="dv">0</span><span class="op">;</span></span>
<span id="cb253-5"><a href="geojson-1.html#cb253-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb253-6"><a href="geojson-1.html#cb253-6" aria-hidden="true" tabindex="-1"></a><span class="pp">#map</span> { </span>
<span id="cb253-7"><a href="geojson-1.html#cb253-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">width</span>: <span class="dv">60</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb253-8"><a href="geojson-1.html#cb253-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">height</span>: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb253-9"><a href="geojson-1.html#cb253-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">float</span>: <span class="dv">left</span><span class="op">;</span></span>
<span id="cb253-10"><a href="geojson-1.html#cb253-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb253-11"><a href="geojson-1.html#cb253-11" aria-hidden="true" tabindex="-1"></a><span class="pp">#text</span> {</span>
<span id="cb253-12"><a href="geojson-1.html#cb253-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">height</span>: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb253-13"><a href="geojson-1.html#cb253-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">width</span>: <span class="dv">40</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb253-14"><a href="geojson-1.html#cb253-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">float</span>: <span class="dv">right</span><span class="op">;</span></span>
<span id="cb253-15"><a href="geojson-1.html#cb253-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb253-16"><a href="geojson-1.html#cb253-16" aria-hidden="true" tabindex="-1"></a><span class="pp">#geojsontext</span> {</span>
<span id="cb253-17"><a href="geojson-1.html#cb253-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">display</span>: <span class="dv">block</span><span class="op">;</span></span>
<span id="cb253-18"><a href="geojson-1.html#cb253-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">margin-left</span>: <span class="bu">auto</span><span class="op">;</span></span>
<span id="cb253-19"><a href="geojson-1.html#cb253-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">margin-right</span>: <span class="bu">auto</span><span class="op">;</span></span>
<span id="cb253-20"><a href="geojson-1.html#cb253-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">margin-top</span>: <span class="dv">20</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb253-21"><a href="geojson-1.html#cb253-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">width</span>: <span class="dv">90</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb253-22"><a href="geojson-1.html#cb253-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">height</span>: <span class="dv">80</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb253-23"><a href="geojson-1.html#cb253-23" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb253-24"><a href="geojson-1.html#cb253-24" aria-hidden="true" tabindex="-1"></a><span class="pp">#submit</span> {</span>
<span id="cb253-25"><a href="geojson-1.html#cb253-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">margin</span>: <span class="dv">20</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb253-26"><a href="geojson-1.html#cb253-26" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>First thing to note in the CSS code is that the map takes <code>60%</code> of the screen width, while the text area takes <code>40%</code> (Figure <a href="geojson-1.html#fig:example-07-02">7.5</a>), as specified using the <code>width</code> properties. We are also using the <code>float</code> CSS property (which we haven’t met so far), to specify that an element should be placed along the <code>left</code> or <code>right</code> side of its container. This places the map and the text entry <code>&lt;div&gt;</code> elements side-by-side, rather than one on top of the other. </p>
</div>
<div id="base-map" class="section level3" number="7.6.3">
<h3><span class="header-section-number">7.6.3</span> Base map</h3>
<p>Next, inside the <code>&lt;script&gt;</code>, we initialize a Leaflet map in the <code>&lt;div id="map"&gt;</code> element, and add a tile layer, just like we did in <code>example-07-01.html</code> (Section <a href="geojson-1.html#adding-geojson-to-leaflet-map">7.5</a>)<a href="#fn73" class="footnote-ref" id="fnref73"><sup>73</sup></a>: </p>
<div class="sourceCode" id="cb254"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb254-1"><a href="geojson-1.html#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> map <span class="op">=</span> L<span class="op">.</span><span class="fu">map</span>(<span class="st">&quot;map&quot;</span>)<span class="op">.</span><span class="fu">setView</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]<span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb254-2"><a href="geojson-1.html#cb254-2" aria-hidden="true" tabindex="-1"></a>L<span class="op">.</span><span class="fu">tileLayer</span>(<span class="st">&quot;https://cartodb-basemaps-{s}.global.[...]/{z}/{x}/{y}.png&quot;</span><span class="op">,</span> {</span>
<span id="cb254-3"><a href="geojson-1.html#cb254-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">attribution</span><span class="op">:</span> <span class="st">&#39;&amp;copy; &lt;a href=&quot;https://www.openstreetmap.org/[...]&lt;/a&gt;&#39;</span><span class="op">,</span></span>
<span id="cb254-4"><a href="geojson-1.html#cb254-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">subdomains</span><span class="op">:</span> <span class="st">&quot;abcd&quot;</span><span class="op">,</span></span>
<span id="cb254-5"><a href="geojson-1.html#cb254-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">maxZoom</span><span class="op">:</span> <span class="dv">19</span></span>
<span id="cb254-6"><a href="geojson-1.html#cb254-6" aria-hidden="true" tabindex="-1"></a>})<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span></code></pre></div>
<p>Note that we center the map to <code>[0, 0]</code> at zoom level <code>1</code>. That way, the map initially displays a global extent (Figure <a href="geojson-1.html#fig:example-07-02">7.5</a>).</p>
</div>
<div id="adding-an-event-listener" class="section level3" number="7.6.4">
<h3><span class="header-section-number">7.6.4</span> Adding an event listener</h3>
<p>All of the page elements are now in place: the map, the text area and the submit button. What’s still missing in <code>example-07-02.html</code> to be functional, is the <em>association</em> between the text area and the map. To define it, we bind an event listener to the submit button.</p>
<p>The <code>showGeojson</code> function (see below) is going to collect the current value of the text area, and display the corresponding GeoJSON layer on the map with <code>L.geoJSON</code>. As we have seen in Section <a href="geojson-1.html#adding-geojson-to-leaflet-map">7.5</a>, <code>L.geoJSON</code> actually expects a parsed object rather than a text string. That is why the text string extracted from the <code>&lt;textarea&gt;</code> input needs to be parsed with <code>JSON.parse</code> (Section <a href="javascript-basics.html#javascript-json">3.11.1</a>) before being passed to <code>L.geoJSON</code>. Here is the definition of the <code>showGeojson</code> function and the event listener: </p>
<div class="sourceCode" id="cb255"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb255-1"><a href="geojson-1.html#cb255-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">showGeojson</span>() {</span>
<span id="cb255-2"><a href="geojson-1.html#cb255-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> txt <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;geojsontext&quot;</span>)<span class="op">.</span><span class="at">value</span><span class="op">;</span></span>
<span id="cb255-3"><a href="geojson-1.html#cb255-3" aria-hidden="true" tabindex="-1"></a>    txt <span class="op">=</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">parse</span>(txt)<span class="op">;</span></span>
<span id="cb255-4"><a href="geojson-1.html#cb255-4" aria-hidden="true" tabindex="-1"></a>    L<span class="op">.</span><span class="fu">geoJSON</span>(txt)<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb255-5"><a href="geojson-1.html#cb255-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb255-6"><a href="geojson-1.html#cb255-6" aria-hidden="true" tabindex="-1"></a><span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;submit&quot;</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> showGeojson)<span class="op">;</span></span></code></pre></div>
<p>The event listener responds to <code>"click"</code> events on the <code>"#submit"</code> button. Each time the button is clicked, the current value of the <code>"#geojsontext"</code> text area is parsed and displayed on the map.</p>
</div>
<div id="using-layer-groups" class="section level3" number="7.6.5">
<h3><span class="header-section-number">7.6.5</span> Using layer groups</h3>
<p>One problem with the code that we have so far is that if we submit two (or more) different layers, they are sequentially added one on top of the other, on the same map. This can be inconvenient for the user, as previously entered layers will obstruct the new ones. We need some kind of mechanism to <em>remove</em> all previous layers before a new layer is loaded when pressing the submit button.</p>
<p>A convenient way of removing layers in Leaflet is to use <strong>layers groups</strong>. A layer group, in Leaflet terminology, is a collection of layers conveniently associated with a single variable. That way, we can apply the same action on <em>all</em> of the layers at once, as a single unit. An empty layer group can be created with <code>L.layerGroup()</code>, and added to the map with its <code>.addTo</code> method. For example, after initializing our map we can create a layer group named <code>layers</code>, and add it to our map, as follows: </p>
<div class="sourceCode" id="cb256"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb256-1"><a href="geojson-1.html#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> layers <span class="op">=</span> L<span class="op">.</span><span class="fu">layerGroup</span>()<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span></code></pre></div>
<p>This expression, adding an empty layer group to a map, has no visible effect. However, any layer we add to that group, later on, will be automatically displayed on the map. At this stage, our map will contain a tile layer and an (empty) layer group. To add a GeoJSON layer to our layer group, and thus display it on the map, we simply replace <code>.addTo(map)</code> with <code>.addTo(layers)</code>, so that the following expression: </p>
<div class="sourceCode" id="cb257"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb257-1"><a href="geojson-1.html#cb257-1" aria-hidden="true" tabindex="-1"></a>L<span class="op">.</span><span class="fu">geoJSON</span>(txt)<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span></code></pre></div>
<p>now becomes: </p>
<div class="sourceCode" id="cb258"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb258-1"><a href="geojson-1.html#cb258-1" aria-hidden="true" tabindex="-1"></a>L<span class="op">.</span><span class="fu">geoJSON</span>(txt)<span class="op">.</span><span class="fu">addTo</span>(layers)<span class="op">;</span></span></code></pre></div>
<p>The GeoJSON is displayed on the map in both cases. The advantage of the new approach, however, is that a layer group can be easily <em>cleared</em>, using the <code>.clearLayers</code> method<a href="#fn74" class="footnote-ref" id="fnref74"><sup>74</sup></a>: </p>
<div class="sourceCode" id="cb259"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb259-1"><a href="geojson-1.html#cb259-1" aria-hidden="true" tabindex="-1"></a>layers<span class="op">.</span><span class="fu">clearLayers</span>()<span class="op">;</span></span></code></pre></div>
<p>Clearing a layer group removes all layers that it previously contained, so that the layer group returns to its initial (empty) state. This means the layers are also removed from any map where the layer group was added on. Using the layer group approach, our modified <code>showGeojson</code> function is given below. Now, each time the submit button is pressed—all earlier GeoJSON content is removed from the map before the new content is shown: </p>
<div class="sourceCode" id="cb260"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb260-1"><a href="geojson-1.html#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">showGeojson</span>() {</span>
<span id="cb260-2"><a href="geojson-1.html#cb260-2" aria-hidden="true" tabindex="-1"></a>    layers<span class="op">.</span><span class="fu">clearLayers</span>()<span class="op">;</span>                <span class="co">// Remove old GeoJSON</span></span>
<span id="cb260-3"><a href="geojson-1.html#cb260-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> txt <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;geojsontext&quot;</span>)<span class="op">.</span><span class="at">value</span><span class="op">;</span></span>
<span id="cb260-4"><a href="geojson-1.html#cb260-4" aria-hidden="true" tabindex="-1"></a>    txt <span class="op">=</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">parse</span>(txt)<span class="op">;</span></span>
<span id="cb260-5"><a href="geojson-1.html#cb260-5" aria-hidden="true" tabindex="-1"></a>    L<span class="op">.</span><span class="fu">geoJSON</span>(txt)<span class="op">.</span><span class="fu">addTo</span>(layers)<span class="op">;</span>        <span class="co">// Display new GeoJSON</span></span>
<span id="cb260-6"><a href="geojson-1.html#cb260-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>The complete GeoJSON viewer application (<code>example-07-02.html</code>) is shown in Figure <a href="geojson-1.html#fig:example-07-02">7.5</a>. </p>
<div class="figure" style="text-align: center"><span id="fig:example-07-02"></span>
<iframe src="examples/example-07-02.html" width="100%" height="400px">
</iframe>
<p class="caption">
FIGURE 7.5: <code>example-07-02.html</code> <a href="examples/example-07-02.html" title="View the Example" target="_blank">(Click to view this example on its own)</a>
</p>
</div>
<blockquote>
<ul>
<li>Open <code>example-07-02.html</code> in the browser.</li>
<li>Try copying and pasting some of the GeoJSON examples we saw earlier (Tables <a href="geojson-1.html#tab:geojson-single-part1">7.2</a>–<a href="geojson-1.html#tab:geojson-feature-collection1">7.6</a>) to test our custom GeoJSON viewer!</li>
</ul>
</blockquote>
</div>
</div>
<div id="ajax" class="section level2" number="7.7">
<h2><span class="header-section-number">7.7</span> Ajax and the <code>fetch</code> API</h2>
<div id="overview-ajax" class="section level3" number="7.7.1">
<h3><span class="header-section-number">7.7.1</span> What is Ajax?</h3>
<p>In the early days of the internet, up to mid-1990s, most websites were based on complete or <em>static</em> HTML pages served with a static web server (Section <a href="web-servers-1.html#static-servers">5.4.2</a>). Consequently, each user action required that a complete new page was loaded from the server. In many cases, this process is very inefficient and makes a bad user experience, as the entire page contents disappear and then the new page appears, even if just part of the page needs to be updated.</p>
<p>Nowadays, many modern websites use a set of techniques called <a href="https://en.wikipedia.org/wiki/Ajax_(programming)"><strong>Asynchronous JavaScript and XML (Ajax)</strong></a> to <em>partially</em> update the contents of web pages. With Ajax, the web page can send data to, and retrieve data from, a server without interfering with the current state of the page or requiring page reload (Figure <a href="geojson-1.html#fig:ajax">7.6</a>). That way, Ajax allows for web pages to change content <em>dynamically</em> without the need to reload the entire page. This makes the websites feel more responsive. </p>
<div class="figure" style="text-align: center"><span id="fig:ajax"></span>
<img src="images/ajax2.png" alt="Schematic illustration of the difference between the traditional and Ajax request models\index{Asynchronous JavaScript and XML (Ajax)}" width="75%" />
<p class="caption">
FIGURE 7.6: Schematic illustration of the difference between the traditional and Ajax request models
</p>
</div>
<p>Ajax uses an <strong>asynchronous</strong> processing model. This means the user can do other things while the web browser is waiting for the data to load, speeding up the user experience. The term asynchronous refers to the fact that loading data via Ajax does not stop the rest of the content from being loaded. Instead, the Ajax request is being sent to the server and in the interval before the server responds the rest of the page continues to load (Figure <a href="geojson-1.html#fig:how-ajax-works">7.7</a>). When the response arrives, the content is processed. This is in contrast to the regular <strong>synchronous</strong> behavior of scripts, where the browser typically stops processing the page while executing each of the expressions in the <code>&lt;script&gt;</code>.</p>
<div class="figure" style="text-align: center"><span id="fig:how-ajax-works"></span>
<img src="images/how_ajax_works2.png" alt="How Ajax works\index{Asynchronous JavaScript and XML (Ajax)}" width="100%" />
<p class="caption">
FIGURE 7.7: How Ajax works
</p>
</div>
<p>XML or JSON are commonly used as the data exchange formats for communication between the server and the client using Ajax. In practice, most modern implementations use JSON, rather than XML, due to its advantages of being native to JavaScript. As we have seen in Section <a href="javascript-basics.html#javascript-object-notation-json">3.11</a>, JSON can be directly parsed to JavaScript objects, which makes processing of the data very convenient.</p>
</div>
<div id="ajax-examples" class="section level3" number="7.7.2">
<h3><span class="header-section-number">7.7.2</span> Ajax examples</h3>
<p>You probably have seen Ajax used on many popular websites, even if you were not aware that it was being used. For example, the autocomplete feature in search boxes commonly uses Ajax. You have probably seen it used on the <a href="https://www.google.com/">Google home page</a>. When you type into the search box on the Google, sometimes you will see results coming up before you have finished typing (Figure <a href="geojson-1.html#fig:google-search-autocomplete">7.8</a>). What happens is that the currently entered text is sent to the server, using Ajax. The server then returns the relevant auto-complete suggestions. The suggestions are shown as a dropdown menu right below the search box.</p>
<div class="figure" style="text-align: center"><span id="fig:google-search-autocomplete"></span>
<img src="images/google_search_autocomplete.png" alt="Auto-complete in Google search" width="100%" />
<p class="caption">
FIGURE 7.8: Auto-complete in Google search
</p>
</div>
<p>Another example is when you scroll down the page on social network websites, such as <a href="https://www.facebook.com/">Facebook</a>, <a href="https://www.instagram.com/">Instagram</a>, or <a href="https://twitter.com/">Twitter</a>. Once you reach the bottom of the page, <em>more</em> stories, images, or tweets are being loaded, and the page becomes longer. When you scroll down once more, again reaching the end of the page, more new content is loaded, and so on. In a way, the home page of those websites is nearly infinite. However, the entire page does not need to be loaded at once, nor does the page need to be completely reloaded each time new content is added at the bottom. When we reach the bottom of the page, new content is being requested using Ajax while all of the previous content and the navigation bars remain unmodified, which improves user experience.</p>
<p>Loading of tile layers on a Leaflet map (Section <a href="leaflet.html#adding-a-tile-layer">6.5.11</a>) is also an example of Ajax. The whole idea of tiles is based on the fact that only the relevant content, specific for the viewed extent and zoom level, is being loaded. Whenever we zoom in or out, or pan around the map, new tile PNG images are being requested using Ajax and added on the map (Figure <a href="leaflet.html#fig:tiles-network-traffic">6.6</a>), without ever reloading the entire web page. For example, if you’re on a Leaflet map and scroll towards the north, the page’s JavaScript sends an Ajax request the necessary new PNG images from the tile server. The server sends back its response—the new PNG images—which the JavaScript code then puts in the right place on the map<a href="#fn75" class="footnote-ref" id="fnref75"><sup>75</sup></a>.</p>
</div>
<div id="making-ajax-requests-with-fetch" class="section level3" number="7.7.3">
<h3><span class="header-section-number">7.7.3</span> The <code>fetch</code> API</h3>
<p>The <code>fetch</code> function—and the associated set of methods known as the <code>fetch</code> API—is a relatively new way of making Ajax requests in JavaScript, replacing the older (and more complex) <code>XMLHttpRequest</code> function. The <code>fetch</code> function accepts a path to a resource as its argument. As we will see shortly, the path can refer to either a local file (Section <a href="geojson-1.html#loading-local-files">7.8.1</a>) or a remote URL (Section <a href="geojson-1.html#loading-remote-files">7.8.2</a>).</p>
<p>For example, the course materials contain a JSON file named <code>person.json</code> (in the directory named <code>data</code>), with the following JSON content (Section <a href="javascript-basics.html#objects-1">3.6.3.2</a>):</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb261-1"><a href="geojson-1.html#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb261-2"><a href="geojson-1.html#cb261-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="fu">{</span><span class="dt">&quot;firstname&quot;</span><span class="fu">:</span> <span class="st">&quot;John&quot;</span><span class="fu">,</span> <span class="dt">&quot;lastname&quot;</span><span class="fu">:</span> <span class="st">&quot;Smith&quot;</span><span class="fu">},</span> </span>
<span id="cb261-3"><a href="geojson-1.html#cb261-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;age&quot;</span><span class="fu">:</span> <span class="dv">50</span><span class="fu">,</span> </span>
<span id="cb261-4"><a href="geojson-1.html#cb261-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;eyecolor&quot;</span><span class="fu">:</span> <span class="st">&quot;blue&quot;</span></span>
<span id="cb261-5"><a href="geojson-1.html#cb261-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>To load the file in a web page, we start with the following <code>fetch</code> function call:</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb262-1"><a href="geojson-1.html#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fetch</span>(<span class="st">&quot;data/person.json&quot;</span>)<span class="op">;</span></span></code></pre></div>
<p>The <code>fetch</code> function executes a <code>GET</code> request (Section <a href="web-servers-1.html#http-methods-get">5.3.2.2</a>) and returns a special object called a “Promise,” with additional methods that determine how it should be handled. The most important method is <code>.then</code>, which takes a function where we specify what to do with the response once it is loaded. When the “Promise” resolves, i.e., the contents are loaded, a special object of type “Response” is passed to <code>.then</code>. For example, the following expression prints the “Response”:</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb263-1"><a href="geojson-1.html#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fetch</span>(<span class="st">&quot;data/person.json&quot;</span>)</span>
<span id="cb263-2"><a href="geojson-1.html#cb263-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">then</span>(<span class="kw">function</span>(response) {</span>
<span id="cb263-3"><a href="geojson-1.html#cb263-3" aria-hidden="true" tabindex="-1"></a>        <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(response)<span class="op">;</span></span>
<span id="cb263-4"><a href="geojson-1.html#cb263-4" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span></code></pre></div>
<p>You can run the above code section in the console of any of the examples from the book to see the “Response” object being printed. The object has several informative properties regarding the response, such as <code>status</code> and <code>statusText</code> which reflect the response status (<code>200</code> and <code>"OK"</code>, respectively, in case the request was successful) and <code>url</code> which contains the requested URL.</p>
<p>To get the actual contents of the requested resource, the response contains various methods to extract the data associated with the response. For example, the <code>.json</code> method is used to process the response JSON contents and parse (Section <a href="javascript-basics.html#javascript-json">3.11.1</a>) it to the corresponding object<a href="#fn76" class="footnote-ref" id="fnref76"><sup>76</sup></a>. Furthermore, to get the actual object, rather than a “Promise,” the <code>.json</code> method result needs to be passed to a separate, second, <code>.then</code> function call, with another function. This time, the function accepts an object (hereby named <code>data</code>) which we can do something with:</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb264-1"><a href="geojson-1.html#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fetch</span>(<span class="st">&quot;data/person.json&quot;</span>)</span>
<span id="cb264-2"><a href="geojson-1.html#cb264-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">then</span>(<span class="kw">function</span>(response) {</span>
<span id="cb264-3"><a href="geojson-1.html#cb264-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> response<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb264-4"><a href="geojson-1.html#cb264-4" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb264-5"><a href="geojson-1.html#cb264-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">then</span>(<span class="kw">function</span>(data) {</span>
<span id="cb264-6"><a href="geojson-1.html#cb264-6" aria-hidden="true" tabindex="-1"></a>        <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(data)<span class="op">;</span></span>
<span id="cb264-7"><a href="geojson-1.html#cb264-7" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span></code></pre></div>
<blockquote>
<ul>
<li>Run the above expression in the console of any example from the book.</li>
<li>Compare the printed object contents to see that it matches the JSON loaded from the <code>person.json</code> file.</li>
</ul>
</blockquote>
<p>We are going use the exact expression given above extensively throughout the book, to load JSON and GeoJSON contents in web pages and web maps. We are only going to change two things in this <code>fetch</code> “template”:</p>
<ul>
<li>The path, referring to the specific JSON or GeoJSON file we are going to load (<code>"data/person.json"</code>)</li>
<li>The internal code in the second <code>.then</code> function call, specifying what we would like to do with the parsed JSON or GeoJSON object (<code>console.log(data);</code>)</li>
</ul>
<p>The above method can be used to load a JSON file using a <code>GET</code> request and immediately parse it to a JavaScript object. This is very convenient for loading and parsing GeoJSON strings, so that the GeoJSON layer can be immediately displayed on a web map. We are going to use the <code>fetch</code> function to load GeoJSON layers on a Leaflet web map in most of the examples throughout the rest of the book.</p>
<p>In Section <a href="collaborative-mapping.html#sending-features-to-the-database">13.6</a>, we will see an example of a modified <code>fetch</code> function call—to compose a <code>POST</code>, rather than a <code>GET</code>, request—for <em>sending</em> data to the database in a crowdsourcing app.</p>
</div>
</div>
<div id="loading-geojson-files" class="section level2" number="7.8">
<h2><span class="header-section-number">7.8</span> Loading GeoJSON files</h2>
<div id="loading-local-files" class="section level3" number="7.8.1">
<h3><span class="header-section-number">7.8.1</span> Loading local files</h3>
<p>To add the contents of a <em>local</em> GeoJSON file as a layer on our map, we can pass a file path of a GeoJSON file on our server to <code>fetch</code>. Subsequently, inside the second <code>.then</code> call, we need to write a callback function (<code>function(data) {...}</code>) that executes once the GeoJSON is loaded and parsed. The callback function will contain the code that adds the GeoJSON to our map. To add GeoJSON to a Leaflet map, we use <code>L.geoJSON</code> (Section <a href="geojson-1.html#adding-geojson-to-leaflet-map">7.5</a>). </p>
<p>Let’s try loading a sample GeoJSON file containing municipal boundaries of towns in Israel, named <code>towns.geojson</code><a href="#fn77" class="footnote-ref" id="fnref77"><sup>77</sup></a> and adding the layer on our map. The code for loading and displaying <code>towns.geojson</code> on the map is as follows: </p>
<div class="sourceCode" id="cb265"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb265-1"><a href="geojson-1.html#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fetch</span>(<span class="st">&quot;data/towns.geojson&quot;</span>)</span>
<span id="cb265-2"><a href="geojson-1.html#cb265-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">then</span>(<span class="kw">function</span>(response) {</span>
<span id="cb265-3"><a href="geojson-1.html#cb265-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> response<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb265-4"><a href="geojson-1.html#cb265-4" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb265-5"><a href="geojson-1.html#cb265-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">then</span>(<span class="kw">function</span>(data) {</span>
<span id="cb265-6"><a href="geojson-1.html#cb265-6" aria-hidden="true" tabindex="-1"></a>        L<span class="op">.</span><span class="fu">geoJSON</span>(data)<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb265-7"><a href="geojson-1.html#cb265-7" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span></code></pre></div>
<p>Note that—in this particular example—the file <code>towns.geojson</code> is in the <code>data</code> sub-directory, relative to the HTML document location, therefore we are using the path <code>"data/towns.geojson"</code>. Also note that loading a local file with JavaScript through Ajax only works when viewing the page using a <em>web server</em>, such as Python’s HTTP server, which was demonstrated in Section <a href="web-servers-1.html#interactive-map-example">5.6.2.4</a>. This has to do with security restrictions placed by the browser: loading a local file via JavaScript is usually not permitted directly, but only through a server<a href="#fn78" class="footnote-ref" id="fnref78"><sup>78</sup></a>. </p>
<p>Figure <a href="geojson-1.html#fig:example-07-03">7.9</a> shows <code>example-07-03.html</code>, where the <code>towns.geojson</code> layer is loaded on a Leaflet map. Again, you may wonder how we can override the default style of the layer and set our own. As mentioned previously, this will be covered in Chapter <a href="symbology-and-interactivity.html#symbology-and-interactivity">8</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:example-07-03"></span>
<iframe src="examples/example-07-03.html" width="100%" height="400px">
</iframe>
<p class="caption">
FIGURE 7.9: <code>example-07-03.html</code> <a href="examples/example-07-03.html" title="View the Example" target="_blank">(Click to view this example on its own)</a>
</p>
</div>
</div>
<div id="loading-remote-files" class="section level3" number="7.8.2">
<h3><span class="header-section-number">7.8.2</span> Loading remote files</h3>
<p>In the last example, <code>example-07-03.html</code> (Figure <a href="geojson-1.html#fig:example-07-03">7.9</a>), we loaded a local GeoJSON file which was stored on the same server along with the HTML document. Using the same method, we can also load GeoJSON files stored in <em>remote</em> locations on the web<a href="#fn79" class="footnote-ref" id="fnref79"><sup>79</sup></a>. </p>
<p>For example, the United States Geological Survey (USGS) has a website dedicated to publishing earthquake location data in <a href="https://earthquake.usgs.gov/earthquakes/feed/">real time</a>. The website provides continuously updated records of recent earthquake locations. The data are given in several formats, including <a href="https://earthquake.usgs.gov/earthquakes/feed/v1.0/geojson.php">GeoJSON</a>. For example, the following URL leads to a GeoJSON file with the locations of earthquakes of magnitude above 4.5 in the past 7 days:</p>
<p><a href="https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/4.5_week.geojson" class="uri">https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/4.5_week.geojson</a></p>
<p>We can replace <code>"data/towns.geojson"</code> from <code>example-07-03.html</code> with the above URL, thus loading remote earthquake locations layer instead of the local towns layer:</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb266-1"><a href="geojson-1.html#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> url <span class="op">=</span> </span>
<span id="cb266-2"><a href="geojson-1.html#cb266-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;https://earthquake.usgs.gov/earthquakes/feed/v1.0/&quot;</span> <span class="op">+</span> </span>
<span id="cb266-3"><a href="geojson-1.html#cb266-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;summary/4.5_week.geojson&quot;</span><span class="op">;</span></span>
<span id="cb266-4"><a href="geojson-1.html#cb266-4" aria-hidden="true" tabindex="-1"></a><span class="fu">fetch</span>(url)</span>
<span id="cb266-5"><a href="geojson-1.html#cb266-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">then</span>(<span class="kw">function</span>(response) {</span>
<span id="cb266-6"><a href="geojson-1.html#cb266-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> response<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb266-7"><a href="geojson-1.html#cb266-7" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb266-8"><a href="geojson-1.html#cb266-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">then</span>(<span class="kw">function</span>(data) {</span>
<span id="cb266-9"><a href="geojson-1.html#cb266-9" aria-hidden="true" tabindex="-1"></a>        L<span class="op">.</span><span class="fu">geoJSON</span>(data)<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb266-10"><a href="geojson-1.html#cb266-10" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span></code></pre></div>
<p>The resulting <code>example-07-04.html</code> is shown in Figure <a href="geojson-1.html#fig:example-07-04">7.10</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:example-07-04"></span>
<iframe src="examples/example-07-04.html" width="100%" height="400px">
</iframe>
<p class="caption">
FIGURE 7.10: <code>example-07-04.html</code> <a href="examples/example-07-04.html" title="View the Example" target="_blank">(Click to view this example on its own)</a>
</p>
</div>
<p>Note that due to security reasons, making Ajax requests from a <em>different domain</em> is not allowed by default. The mechanism defining this restriction is called <a href="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing"><strong>Cross-Origin Resource Sharing (CORS)</strong></a>. Basically, the server needs to allow remote connections from your specific domain (or from <em>any</em> domain) for the request to be successful. The USGS server, where the earthquakes GeoJSON is placed, allows CORS. This is why <code>example-07-04.html</code> works. In case we are trying to load a file from a server that <em>does not</em> allow CORS, the operation will fail displaying an error—such as the following one—in the JavaScript console (Figure <a href="geojson-1.html#fig:cors-error">7.11</a>):</p>
<pre class="text"><code>Failed to load http://opendata.br7.org.il/datasets/geojson/BicycleParking.geojson: 
No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource. 
Origin &#39;http://localhost:8000&#39; is therefore not allowed access.</code></pre>
<div class="figure" style="text-align: center"><span id="fig:cors-error"></span>
<img src="images/cors_error.png" alt="Error when attempting to load a resource, via Ajax, from a server where Cross-Origin Resource Sharing (CORS) is not allowed\index{fetch API}\index{Cross-Origin Resource Sharing (CORS)}" width="100%" />
<p class="caption">
FIGURE 7.11: Error when attempting to load a resource, via Ajax, from a server where Cross-Origin Resource Sharing (CORS) is not allowed
</p>
</div>
<p>If you encounter a CORS error while trying to load a resource, one option is to get the other server to allow CORS. If this is impossible, or you do not have access to the server, you can make the file available for your website through Ajax from a different server—or your own. CORS policy does not affect the access of server-side scripts to the resource, just the access of client-side JavaScript. Therefore an intermediate server, known as a <a href="https://en.wikipedia.org/wiki/Proxy_server"><strong>proxy server</strong></a>, can be used to basically bypass the CORS restriction. </p>
</div>
</div>
<div id="exercise-4" class="section level2" number="7.9">
<h2><span class="header-section-number">7.9</span> Exercise</h2>
<ul>
<li><a href="https://eonet.sci.gsfc.nasa.gov/"><strong>Earth Observatory Natural Event Tracker (EONET)</strong></a> is a repository with real-time information about natural events. Conveniently, EONET publishes a real-time listing of natural events on Earth, available as a JSON file in <a href="https://eonet.sci.gsfc.nasa.gov/api/v2.1/events" class="uri">https://eonet.sci.gsfc.nasa.gov/api/v2.1/events</a>.</li>
<li>Build a web map where locations of real-time events are shown. In the solution, there is also a popup with the event name and observation time (Figure <a href="geojson-1.html#fig:solution-07">7.12</a>, which we learn how to do in Section <a href="symbology-and-interactivity.html#constructing-popups-from-data">8.5</a>.</li>
<li>Consider the following issues:
<ul>
<li>The JSON object has a property named <code>events</code>, which is an array of individual events.</li>
<li>Each event object has a property named <code>geometries</code> which is an array of GeoJSON objects specifying event locations over time.</li>
</ul></li>
<li>Hint: start with manually adding <em>one</em> geometry from the JSON file on the map, such as <code>data.events[0].geometries[0]</code>, where <code>data</code> is the parsed object. Then, try to generalize your code to iterate over all <em>events</em> and all <em>geometries</em> within each event.</li>
</ul>
<div class="figure" style="text-align: center"><span id="fig:solution-07"></span>
<iframe src="examples/solution-07.html" width="100%" height="400px">
</iframe>
<p class="caption">
FIGURE 7.12: <code>solution-07.html</code> <a href="examples/solution-07.html" title="View the Example" target="_blank">(Click to view this example on its own)</a>
</p>
</div>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="66">
<li id="fn66"><p>We will come back to WKT in Section <a href="databases.html#the-geometry-column">9.6.3</a>, when discussing spatial databases.<a href="geojson-1.html#fnref66" class="footnote-back">↩︎</a></p></li>
<li id="fn67"><p>The seventh geometry type, <code>"GeometryCollection"</code>, has a slightly different structure which we discuss below (Section <a href="geojson-1.html#geometry-collections">7.3.2.4</a>).<a href="geojson-1.html#fnref67" class="footnote-back">↩︎</a></p></li>
<li id="fn68"><p>Point coordinates in GeoJSON can also have three dimensions (3D) where the third dimension represents elevation, though this is less useful in web-mapping, and we will not encounter such examples in the book.<a href="geojson-1.html#fnref68" class="footnote-back">↩︎</a></p></li>
<li id="fn69"><p>Remember that in Leaflet the convention is to specify point coordinates the <em>opposite</em> way, as <code>[lat, lon]</code> (Section <a href="leaflet.html#creating-map-object">6.5.9</a>). A nice blog post (<a href="https://macwright.org/lonlat/" class="uri">https://macwright.org/lonlat/</a>) by Tom MacWright gives a list of different mapping software using each of the <code>[lon, lat]</code> and <code>[lat, lon]</code> conventions.<a href="geojson-1.html#fnref69" class="footnote-back">↩︎</a></p></li>
<li id="fn70"><p>For more information on GeoJSON, the <em>More than you ever wanted to know about GeoJSON</em> blog post (<a href="https://macwright.org/2015/03/23/geojson-second-bite" class="uri">https://macwright.org/2015/03/23/geojson-second-bite</a>) is a recommended read. The complete specification of the GeoJSON format can be found on the official website (<a href="http://geojson.org/" class="uri">http://geojson.org/</a>) of the standard. Also check out GeoJSONLint (<a href="https://geojsonlint.com/" class="uri">https://geojsonlint.com/</a>) for an interactive demonstration of all nine GeoJSON types.<a href="geojson-1.html#fnref70" class="footnote-back">↩︎</a></p></li>
<li id="fn71"><p>Parts of the URLs were replaced with <code>[...]</code> to save space.<a href="geojson-1.html#fnref71" class="footnote-back">↩︎</a></p></li>
<li id="fn72"><p>We omit most of the GeoJSON string to save space, since the complete string was already given above.<a href="geojson-1.html#fnref72" class="footnote-back">↩︎</a></p></li>
<li id="fn73"><p>Again, parts of the URLs were replaced with <code>[...]</code> to save space.<a href="geojson-1.html#fnref73" class="footnote-back">↩︎</a></p></li>
<li id="fn74"><p>A layer group has another common use case: adding controls for toggling layer visibility (Figure <a href="leaflet.html#fig:solution-06">6.16</a>). See the <em>Layer Groups and Layers Control</em> (<a href="https://leafletjs.com/examples/layers-control/" class="uri">https://leafletjs.com/examples/layers-control/</a>) tutorial for an example.<a href="geojson-1.html#fnref74" class="footnote-back">↩︎</a></p></li>
<li id="fn75"><p>For a more detailed introduction to Ajax, also see the <em>Fetching Data From the Server</em> article (<a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Client-side_web_APIs/Fetching_data" class="uri">https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Client-side_web_APIs/Fetching_data</a>) by Mozilla.<a href="geojson-1.html#fnref75" class="footnote-back">↩︎</a></p></li>
<li id="fn76"><p>Note that there are several other methods to process other types of content, such as <code>.text</code> to get the contents in plain text. This is less relevant for our purpose, since all of the requestes we are going to use refer to JSON or GeoJSON files which can be parsed with <code>.json</code>.<a href="geojson-1.html#fnref76" class="footnote-back">↩︎</a></p></li>
<li id="fn77"><p>The <code>towns.geojson</code> file, like all files used in the examples, can be downloaded from the online version of the book (Section <a href="index.html#online-version">0.7</a>).<a href="geojson-1.html#fnref77" class="footnote-back">↩︎</a></p></li>
<li id="fn78"><p>There may be differences in this security restriction among different browsers. For example, at the time of writing, loading a local file is disabled in Chrome but works in Firefox (<a href="https://stackoverflow.com/questions/38344612/ajax-request-to-local-file-system-not-working-in-chrome" class="uri">https://stackoverflow.com/questions/38344612/ajax-request-to-local-file-system-not-working-in-chrome</a>).<a href="geojson-1.html#fnref78" class="footnote-back">↩︎</a></p></li>
<li id="fn79"><p>Check out the <em>Leaflet GeoJSON</em> tutorial (<a href="https://leafletjs.com/examples/geojson/" class="uri">https://leafletjs.com/examples/geojson/</a>) for more details on loading GeoJSON.<a href="geojson-1.html#fnref79" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="leaflet.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="symbology-and-interactivity.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toc_depth": 2,
"search": false
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "../../mathjax.rstudio.com/2.7.2/MathJaxb198.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>


<!-- Mirrored from 132.72.155.230:3838/js/geojson-1.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jan 2022 06:37:33 GMT -->
</html>
