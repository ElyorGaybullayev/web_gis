<!DOCTYPE html>
<html lang="" xml:lang="">

<!-- Mirrored from 132.72.155.230:3838/js/leaflet.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jan 2022 06:33:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Leaflet | Introduction to Web Mapping</title>
  <meta name="description" content="Chapter 6 Leaflet | Introduction to Web Mapping" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Leaflet | Introduction to Web Mapping" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chapter 6 Leaflet | Introduction to Web Mapping" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Leaflet | Introduction to Web Mapping" />
  
  <meta name="twitter:description" content="Chapter 6 Leaflet | Introduction to Web Mapping" />
  

<meta name="author" content="Michael Dorman" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="web-servers-1.html"/>
<link rel="next" href="geojson-1.html"/>
<script src="libs/header-attrs/header-attrs.js"></script>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-134641614-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-134641614-1');
</script>



<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<a href="index.html"><img width="90%" style="margin: 5% 5% 0% 5%" src="images/BGUsig3E.svg"></a>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#what-is-web-mapping"><i class="fa fa-check"></i><b>0.1</b> What is web mapping?</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#what-is-javascript"><i class="fa fa-check"></i><b>0.2</b> What is JavaScript?</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#why-use-javascript-for-web-mapping"><i class="fa fa-check"></i><b>0.3</b> Why use JavaScript for web mapping?</a></li>
<li class="chapter" data-level="0.4" data-path="index.html"><a href="index.html#learning-objectives"><i class="fa fa-check"></i><b>0.4</b> Learning objectives</a></li>
<li class="chapter" data-level="0.5" data-path="index.html"><a href="index.html#software"><i class="fa fa-check"></i><b>0.5</b> Software</a></li>
<li class="chapter" data-level="0.6" data-path="index.html"><a href="index.html#background-knowledge"><i class="fa fa-check"></i><b>0.6</b> Background knowledge</a></li>
<li class="chapter" data-level="0.7" data-path="index.html"><a href="index.html#online-version"><i class="fa fa-check"></i><b>0.7</b> Online version</a></li>
<li class="chapter" data-level="0.8" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i><b>0.8</b> Acknowledgments</a></li>
</ul></li>
<li class="part"><span><b>I Introduction to Web Technologies</b></span></li>
<li class="chapter" data-level="1" data-path="html.html"><a href="html.html"><i class="fa fa-check"></i><b>1</b> HTML</a>
<ul>
<li class="chapter" data-level="1.1" data-path="html.html"><a href="html.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a></li>
<li class="chapter" data-level="1.2" data-path="html.html"><a href="html.html#how-do-people-access-the-web"><i class="fa fa-check"></i><b>1.2</b> How do people access the web?</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="html.html"><a href="html.html#web-browsers"><i class="fa fa-check"></i><b>1.2.1</b> Web browsers</a></li>
<li class="chapter" data-level="1.2.2" data-path="html.html"><a href="html.html#web-servers"><i class="fa fa-check"></i><b>1.2.2</b> Web servers</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="html.html"><a href="html.html#web-pages"><i class="fa fa-check"></i><b>1.3</b> Web pages</a></li>
<li class="chapter" data-level="1.4" data-path="html.html"><a href="html.html#text-editors"><i class="fa fa-check"></i><b>1.4</b> Text editors</a></li>
<li class="chapter" data-level="1.5" data-path="html.html"><a href="html.html#what-is-html"><i class="fa fa-check"></i><b>1.5</b> What is HTML?</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="html.html"><a href="html.html#overview-html"><i class="fa fa-check"></i><b>1.5.1</b> Overview</a></li>
<li class="chapter" data-level="1.5.2" data-path="html.html"><a href="html.html#html-comments"><i class="fa fa-check"></i><b>1.5.2</b> HTML comments</a></li>
<li class="chapter" data-level="1.5.3" data-path="html.html"><a href="html.html#block-vs-inline"><i class="fa fa-check"></i><b>1.5.3</b> Block vs. inline</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="html.html"><a href="html.html#common-html-elements"><i class="fa fa-check"></i><b>1.6</b> Common HTML elements</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="html.html"><a href="html.html#html-element-types"><i class="fa fa-check"></i><b>1.6.1</b> HTML element types</a></li>
<li class="chapter" data-level="1.6.2" data-path="html.html"><a href="html.html#html-structure"><i class="fa fa-check"></i><b>1.6.2</b> Structure</a></li>
<li class="chapter" data-level="1.6.3" data-path="html.html"><a href="html.html#title-and-metadata"><i class="fa fa-check"></i><b>1.6.3</b> Title and metadata</a></li>
<li class="chapter" data-level="1.6.4" data-path="html.html"><a href="html.html#styling-and-scripts"><i class="fa fa-check"></i><b>1.6.4</b> Styling and scripts</a></li>
<li class="chapter" data-level="1.6.5" data-path="html.html"><a href="html.html#headings-and-paragraphs"><i class="fa fa-check"></i><b>1.6.5</b> Headings and paragraphs</a></li>
<li class="chapter" data-level="1.6.6" data-path="html.html"><a href="html.html#font-formatting"><i class="fa fa-check"></i><b>1.6.6</b> Font formatting</a></li>
<li class="chapter" data-level="1.6.7" data-path="html.html"><a href="html.html#spacing"><i class="fa fa-check"></i><b>1.6.7</b> Spacing</a></li>
<li class="chapter" data-level="1.6.8" data-path="html.html"><a href="html.html#html-lists"><i class="fa fa-check"></i><b>1.6.8</b> Lists</a></li>
<li class="chapter" data-level="1.6.9" data-path="html.html"><a href="html.html#html-links"><i class="fa fa-check"></i><b>1.6.9</b> Links</a></li>
<li class="chapter" data-level="1.6.10" data-path="html.html"><a href="html.html#images"><i class="fa fa-check"></i><b>1.6.10</b> Images</a></li>
<li class="chapter" data-level="1.6.11" data-path="html.html"><a href="html.html#tables"><i class="fa fa-check"></i><b>1.6.11</b> Tables</a></li>
<li class="chapter" data-level="1.6.12" data-path="html.html"><a href="html.html#grouping"><i class="fa fa-check"></i><b>1.6.12</b> Grouping</a></li>
<li class="chapter" data-level="1.6.13" data-path="html.html"><a href="html.html#input-elements"><i class="fa fa-check"></i><b>1.6.13</b> Input elements</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="html.html"><a href="html.html#id-class-and-style-attributes"><i class="fa fa-check"></i><b>1.7</b> <code>id</code>, <code>class</code>, and <code>style</code> attributes</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="html.html"><a href="html.html#overview-id-class-and-style-attributes"><i class="fa fa-check"></i><b>1.7.1</b> Overview</a></li>
<li class="chapter" data-level="1.7.2" data-path="html.html"><a href="html.html#id"><i class="fa fa-check"></i><b>1.7.2</b> <code>id</code></a></li>
<li class="chapter" data-level="1.7.3" data-path="html.html"><a href="html.html#html-class"><i class="fa fa-check"></i><b>1.7.3</b> <code>class</code></a></li>
<li class="chapter" data-level="1.7.4" data-path="html.html"><a href="html.html#style-2"><i class="fa fa-check"></i><b>1.7.4</b> <code>style</code></a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="html.html"><a href="html.html#code-layout"><i class="fa fa-check"></i><b>1.8</b> Code layout</a></li>
<li class="chapter" data-level="1.9" data-path="html.html"><a href="html.html#inspecting-elements"><i class="fa fa-check"></i><b>1.9</b> Inspecting elements</a></li>
<li class="chapter" data-level="1.10" data-path="html.html"><a href="html.html#exercise"><i class="fa fa-check"></i><b>1.10</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="css.html"><a href="css.html"><i class="fa fa-check"></i><b>2</b> CSS</a>
<ul>
<li class="chapter" data-level="2.1" data-path="css.html"><a href="css.html#introduction-1"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="css.html"><a href="css.html#what-is-css"><i class="fa fa-check"></i><b>2.2</b> What is CSS?</a></li>
<li class="chapter" data-level="2.3" data-path="css.html"><a href="css.html#css-rules"><i class="fa fa-check"></i><b>2.3</b> CSS rules</a></li>
<li class="chapter" data-level="2.4" data-path="css.html"><a href="css.html#css-selectors"><i class="fa fa-check"></i><b>2.4</b> CSS selectors</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="css.html"><a href="css.html#overview-css-selectors"><i class="fa fa-check"></i><b>2.4.1</b> Overview</a></li>
<li class="chapter" data-level="2.4.2" data-path="css.html"><a href="css.html#type-selector"><i class="fa fa-check"></i><b>2.4.2</b> Type selector</a></li>
<li class="chapter" data-level="2.4.3" data-path="css.html"><a href="css.html#class-selector"><i class="fa fa-check"></i><b>2.4.3</b> Class selector</a></li>
<li class="chapter" data-level="2.4.4" data-path="css.html"><a href="css.html#id-selector"><i class="fa fa-check"></i><b>2.4.4</b> ID selector</a></li>
<li class="chapter" data-level="2.4.5" data-path="css.html"><a href="css.html#descendant-selector"><i class="fa fa-check"></i><b>2.4.5</b> Descendant selector</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="css.html"><a href="css.html#css-conflicts"><i class="fa fa-check"></i><b>2.5</b> CSS conflicts</a></li>
<li class="chapter" data-level="2.6" data-path="css.html"><a href="css.html#css-inheritance"><i class="fa fa-check"></i><b>2.6</b> CSS inheritance</a></li>
<li class="chapter" data-level="2.7" data-path="css.html"><a href="css.html#linking-css-to-html"><i class="fa fa-check"></i><b>2.7</b> Linking CSS to HTML</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="css.html"><a href="css.html#methods-for-linking-css"><i class="fa fa-check"></i><b>2.7.1</b> Methods for linking CSS</a></li>
<li class="chapter" data-level="2.7.2" data-path="css.html"><a href="css.html#inline-css"><i class="fa fa-check"></i><b>2.7.2</b> Inline CSS</a></li>
<li class="chapter" data-level="2.7.3" data-path="css.html"><a href="css.html#embedded-css"><i class="fa fa-check"></i><b>2.7.3</b> Embedded CSS</a></li>
<li class="chapter" data-level="2.7.4" data-path="css.html"><a href="css.html#external-css"><i class="fa fa-check"></i><b>2.7.4</b> External CSS</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="css.html"><a href="css.html#css-properties"><i class="fa fa-check"></i><b>2.8</b> CSS properties</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="css.html"><a href="css.html#overview-css-properties"><i class="fa fa-check"></i><b>2.8.1</b> Overview</a></li>
<li class="chapter" data-level="2.8.2" data-path="css.html"><a href="css.html#color"><i class="fa fa-check"></i><b>2.8.2</b> Color</a></li>
<li class="chapter" data-level="2.8.3" data-path="css.html"><a href="css.html#text"><i class="fa fa-check"></i><b>2.8.3</b> Text</a></li>
<li class="chapter" data-level="2.8.4" data-path="css.html"><a href="css.html#boxes"><i class="fa fa-check"></i><b>2.8.4</b> Boxes</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="css.html"><a href="css.html#hurricane-scale"><i class="fa fa-check"></i><b>2.9</b> Hurricane scale example</a>
<ul>
<li class="chapter" data-level="2.9.1" data-path="css.html"><a href="css.html#html-contents"><i class="fa fa-check"></i><b>2.9.1</b> HTML contents</a></li>
<li class="chapter" data-level="2.9.2" data-path="css.html"><a href="css.html#css-styling"><i class="fa fa-check"></i><b>2.9.2</b> CSS styling</a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="css.html"><a href="css.html#example-map-description"><i class="fa fa-check"></i><b>2.10</b> Map description example</a>
<ul>
<li class="chapter" data-level="2.10.1" data-path="css.html"><a href="css.html#html-contents-1"><i class="fa fa-check"></i><b>2.10.1</b> HTML contents</a></li>
<li class="chapter" data-level="2.10.2" data-path="css.html"><a href="css.html#example-map-description-box-position"><i class="fa fa-check"></i><b>2.10.2</b> CSS styling: box position</a></li>
<li class="chapter" data-level="2.10.3" data-path="css.html"><a href="css.html#css-styling-final-touches"><i class="fa fa-check"></i><b>2.10.3</b> CSS styling: final touches</a></li>
<li class="chapter" data-level="2.10.4" data-path="css.html"><a href="css.html#adding-map-in-the-background"><i class="fa fa-check"></i><b>2.10.4</b> Adding map in the background</a></li>
</ul></li>
<li class="chapter" data-level="2.11" data-path="css.html"><a href="css.html#exercise-1"><i class="fa fa-check"></i><b>2.11</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="javascript-basics.html"><a href="javascript-basics.html"><i class="fa fa-check"></i><b>3</b> JavaScript Basics</a>
<ul>
<li class="chapter" data-level="3.1" data-path="javascript-basics.html"><a href="javascript-basics.html#introduction-2"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="javascript-basics.html"><a href="javascript-basics.html#what-is-javascript-1"><i class="fa fa-check"></i><b>3.2</b> What is JavaScript?</a></li>
<li class="chapter" data-level="3.3" data-path="javascript-basics.html"><a href="javascript-basics.html#client-side-vs.-server-side"><i class="fa fa-check"></i><b>3.3</b> Client-side vs. server-side</a></li>
<li class="chapter" data-level="3.4" data-path="javascript-basics.html"><a href="javascript-basics.html#the-javascript-console"><i class="fa fa-check"></i><b>3.4</b> The JavaScript console</a></li>
<li class="chapter" data-level="3.5" data-path="javascript-basics.html"><a href="javascript-basics.html#assignment"><i class="fa fa-check"></i><b>3.5</b> Assignment</a></li>
<li class="chapter" data-level="3.6" data-path="javascript-basics.html"><a href="javascript-basics.html#data-types"><i class="fa fa-check"></i><b>3.6</b> Data types</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="javascript-basics.html"><a href="javascript-basics.html#overview-data-types"><i class="fa fa-check"></i><b>3.6.1</b> Overview</a></li>
<li class="chapter" data-level="3.6.2" data-path="javascript-basics.html"><a href="javascript-basics.html#primitive-data-types"><i class="fa fa-check"></i><b>3.6.2</b> Primitive data types</a></li>
<li class="chapter" data-level="3.6.3" data-path="javascript-basics.html"><a href="javascript-basics.html#objects-data-type"><i class="fa fa-check"></i><b>3.6.3</b> Objects</a></li>
<li class="chapter" data-level="3.6.4" data-path="javascript-basics.html"><a href="javascript-basics.html#checking-type-of-variables"><i class="fa fa-check"></i><b>3.6.4</b> Checking type of variables</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="javascript-basics.html"><a href="javascript-basics.html#functions"><i class="fa fa-check"></i><b>3.7</b> Functions</a></li>
<li class="chapter" data-level="3.8" data-path="javascript-basics.html"><a href="javascript-basics.html#methods"><i class="fa fa-check"></i><b>3.8</b> Methods</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="javascript-basics.html"><a href="javascript-basics.html#what-are-methods"><i class="fa fa-check"></i><b>3.8.1</b> What are methods?</a></li>
<li class="chapter" data-level="3.8.2" data-path="javascript-basics.html"><a href="javascript-basics.html#array-methods"><i class="fa fa-check"></i><b>3.8.2</b> Array methods</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="javascript-basics.html"><a href="javascript-basics.html#scope"><i class="fa fa-check"></i><b>3.9</b> Scope</a></li>
<li class="chapter" data-level="3.10" data-path="javascript-basics.html"><a href="javascript-basics.html#flow-control"><i class="fa fa-check"></i><b>3.10</b> Flow control</a>
<ul>
<li class="chapter" data-level="3.10.1" data-path="javascript-basics.html"><a href="javascript-basics.html#what-is-flow-control"><i class="fa fa-check"></i><b>3.10.1</b> What is flow control?</a></li>
<li class="chapter" data-level="3.10.2" data-path="javascript-basics.html"><a href="javascript-basics.html#conditionals"><i class="fa fa-check"></i><b>3.10.2</b> Conditionals</a></li>
<li class="chapter" data-level="3.10.3" data-path="javascript-basics.html"><a href="javascript-basics.html#loops"><i class="fa fa-check"></i><b>3.10.3</b> Loops</a></li>
</ul></li>
<li class="chapter" data-level="3.11" data-path="javascript-basics.html"><a href="javascript-basics.html#javascript-object-notation-json"><i class="fa fa-check"></i><b>3.11</b> JavaScript Object Notation (JSON)</a>
<ul>
<li class="chapter" data-level="3.11.1" data-path="javascript-basics.html"><a href="javascript-basics.html#javascript-json"><i class="fa fa-check"></i><b>3.11.1</b> JSON</a></li>
<li class="chapter" data-level="3.11.2" data-path="javascript-basics.html"><a href="javascript-basics.html#geojson"><i class="fa fa-check"></i><b>3.11.2</b> GeoJSON</a></li>
</ul></li>
<li class="chapter" data-level="3.12" data-path="javascript-basics.html"><a href="javascript-basics.html#exercise-2"><i class="fa fa-check"></i><b>3.12</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html"><i class="fa fa-check"></i><b>4</b> JavaScript Interactivity</a>
<ul>
<li class="chapter" data-level="4.1" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#introduction-3"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#the-document-object-model"><i class="fa fa-check"></i><b>4.2</b> The Document Object Model (DOM)</a></li>
<li class="chapter" data-level="4.3" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#accessing-and-modifying-elements"><i class="fa fa-check"></i><b>4.3</b> Accessing and modifying elements</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#overview-accessing-and_modifying"><i class="fa fa-check"></i><b>4.3.1</b> Overview</a></li>
<li class="chapter" data-level="4.3.2" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#accessing-elements"><i class="fa fa-check"></i><b>4.3.2</b> Accessing elements</a></li>
<li class="chapter" data-level="4.3.3" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#getting-element-properties"><i class="fa fa-check"></i><b>4.3.3</b> Getting element properties</a></li>
<li class="chapter" data-level="4.3.4" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#modifying-elements"><i class="fa fa-check"></i><b>4.3.4</b> Modifying elements</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#event-listeners"><i class="fa fa-check"></i><b>4.4</b> Event listeners</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#event-types"><i class="fa fa-check"></i><b>4.4.1</b> Event types</a></li>
<li class="chapter" data-level="4.4.2" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#binding-event-listeners"><i class="fa fa-check"></i><b>4.4.2</b> Binding event listeners</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#hello-example"><i class="fa fa-check"></i><b>4.5</b> Hello example</a></li>
<li class="chapter" data-level="4.6" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#poles-example"><i class="fa fa-check"></i><b>4.6</b> Poles example</a></li>
<li class="chapter" data-level="4.7" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#operating-on-selection"><i class="fa fa-check"></i><b>4.7</b> Operating on multiple selections</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#example-page"><i class="fa fa-check"></i><b>4.7.1</b> Example page</a></li>
<li class="chapter" data-level="4.7.2" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#making-multiple-selections"><i class="fa fa-check"></i><b>4.7.2</b> Making multiple selections</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#getting-and-setting-input-values"><i class="fa fa-check"></i><b>4.8</b> Getting and setting input values</a></li>
<li class="chapter" data-level="4.9" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#multiple-event-listeners"><i class="fa fa-check"></i><b>4.9</b> Multiple event listeners</a></li>
<li class="chapter" data-level="4.10" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#the-event-object"><i class="fa fa-check"></i><b>4.10</b> The event object</a>
<ul>
<li class="chapter" data-level="4.10.1" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#event-object-properties"><i class="fa fa-check"></i><b>4.10.1</b> Event object properties</a></li>
<li class="chapter" data-level="4.10.2" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#event-target"><i class="fa fa-check"></i><b>4.10.2</b> The <code>.target</code> property</a></li>
</ul></li>
<li class="chapter" data-level="4.11" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#modifying-page-based-on-data"><i class="fa fa-check"></i><b>4.11</b> Modifying page based on data</a></li>
<li class="chapter" data-level="4.12" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#working-with-user-input"><i class="fa fa-check"></i><b>4.12</b> Calculator example</a></li>
<li class="chapter" data-level="4.13" data-path="javascript-interactivity.html"><a href="javascript-interactivity.html#exercise-3"><i class="fa fa-check"></i><b>4.13</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="web-servers-1.html"><a href="web-servers-1.html"><i class="fa fa-check"></i><b>5</b> Web Servers</a>
<ul>
<li class="chapter" data-level="5.1" data-path="web-servers-1.html"><a href="web-servers-1.html#introduction-4"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="web-servers-1.html"><a href="web-servers-1.html#web-servers-2"><i class="fa fa-check"></i><b>5.2</b> Web servers</a></li>
<li class="chapter" data-level="5.3" data-path="web-servers-1.html"><a href="web-servers-1.html#communicating-through-http"><i class="fa fa-check"></i><b>5.3</b> Communicating through HTTP</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="web-servers-1.html"><a href="web-servers-1.html#web-protocols-and-http"><i class="fa fa-check"></i><b>5.3.1</b> Web protocols and HTTP</a></li>
<li class="chapter" data-level="5.3.2" data-path="web-servers-1.html"><a href="web-servers-1.html#http-methods"><i class="fa fa-check"></i><b>5.3.2</b> HTTP methods</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="web-servers-1.html"><a href="web-servers-1.html#static-vs-dynamic-servers"><i class="fa fa-check"></i><b>5.4</b> Static vs. dynamic servers</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="web-servers-1.html"><a href="web-servers-1.html#overview"><i class="fa fa-check"></i><b>5.4.1</b> Overview</a></li>
<li class="chapter" data-level="5.4.2" data-path="web-servers-1.html"><a href="web-servers-1.html#static-servers"><i class="fa fa-check"></i><b>5.4.2</b> Static servers</a></li>
<li class="chapter" data-level="5.4.3" data-path="web-servers-1.html"><a href="web-servers-1.html#dynamic-servers"><i class="fa fa-check"></i><b>5.4.3</b> Dynamic servers</a></li>
<li class="chapter" data-level="5.4.4" data-path="web-servers-1.html"><a href="web-servers-1.html#software-1"><i class="fa fa-check"></i><b>5.4.4</b> Software</a></li>
<li class="chapter" data-level="5.4.5" data-path="web-servers-1.html"><a href="web-servers-1.html#practical-considerations"><i class="fa fa-check"></i><b>5.4.5</b> Practical considerations</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="web-servers-1.html"><a href="web-servers-1.html#urls-and-file-structure"><i class="fa fa-check"></i><b>5.5</b> URLs and file structure</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="web-servers-1.html"><a href="web-servers-1.html#urls-and-index-html"><i class="fa fa-check"></i><b>5.5.1</b> URLs and <code>index.html</code></a></li>
<li class="chapter" data-level="5.5.2" data-path="web-servers-1.html"><a href="web-servers-1.html#file-structure"><i class="fa fa-check"></i><b>5.5.2</b> File structure</a></li>
<li class="chapter" data-level="5.5.3" data-path="web-servers-1.html"><a href="web-servers-1.html#relative-paths"><i class="fa fa-check"></i><b>5.5.3</b> Relative paths</a></li>
<li class="chapter" data-level="5.5.4" data-path="web-servers-1.html"><a href="web-servers-1.html#css-and-javasccript"><i class="fa fa-check"></i><b>5.5.4</b> CSS and JavaScript</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="web-servers-1.html"><a href="web-servers-1.html#running-a-static-server"><i class="fa fa-check"></i><b>5.6</b> Running a static server</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="web-servers-1.html"><a href="web-servers-1.html#overview-running-static-server"><i class="fa fa-check"></i><b>5.6.1</b> Overview</a></li>
<li class="chapter" data-level="5.6.2" data-path="web-servers-1.html"><a href="web-servers-1.html#local-with-python"><i class="fa fa-check"></i><b>5.6.2</b> Local with Python</a></li>
<li class="chapter" data-level="5.6.3" data-path="web-servers-1.html"><a href="web-servers-1.html#remote-with-github-pages"><i class="fa fa-check"></i><b>5.6.3</b> Remote with GitHub Pages</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Web Mapping with Leaflet</b></span></li>
<li class="chapter" data-level="6" data-path="leaflet.html"><a href="leaflet.html"><i class="fa fa-check"></i><b>6</b> Leaflet</a>
<ul>
<li class="chapter" data-level="6.1" data-path="leaflet.html"><a href="leaflet.html#introduction-5"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="leaflet.html"><a href="leaflet.html#what-is-web-map"><i class="fa fa-check"></i><b>6.2</b> What is a web map?</a></li>
<li class="chapter" data-level="6.3" data-path="leaflet.html"><a href="leaflet.html#what-is-leaflet"><i class="fa fa-check"></i><b>6.3</b> What is Leaflet?</a></li>
<li class="chapter" data-level="6.4" data-path="leaflet.html"><a href="leaflet.html#alternatives-to-leaflet"><i class="fa fa-check"></i><b>6.4</b> Alternatives to Leaflet</a></li>
<li class="chapter" data-level="6.5" data-path="leaflet.html"><a href="leaflet.html#creating-a-basic-web-map"><i class="fa fa-check"></i><b>6.5</b> Creating a basic web map</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="leaflet.html"><a href="leaflet.html#overview-creating-a-basic-web-map"><i class="fa fa-check"></i><b>6.5.1</b> Overview</a></li>
<li class="chapter" data-level="6.5.2" data-path="leaflet.html"><a href="leaflet.html#web-page-setup"><i class="fa fa-check"></i><b>6.5.2</b> Web page setup</a></li>
<li class="chapter" data-level="6.5.3" data-path="leaflet.html"><a href="leaflet.html#javascript-libraries"><i class="fa fa-check"></i><b>6.5.3</b> JavaScript libraries</a></li>
<li class="chapter" data-level="6.5.4" data-path="leaflet.html"><a href="leaflet.html#including-a-library"><i class="fa fa-check"></i><b>6.5.4</b> Including a library</a></li>
<li class="chapter" data-level="6.5.5" data-path="leaflet.html"><a href="leaflet.html#loading-a-local-script"><i class="fa fa-check"></i><b>6.5.5</b> Loading a local script</a></li>
<li class="chapter" data-level="6.5.6" data-path="leaflet.html"><a href="leaflet.html#loading-a-remote-script"><i class="fa fa-check"></i><b>6.5.6</b> Loading a remote script</a></li>
<li class="chapter" data-level="6.5.7" data-path="leaflet.html"><a href="leaflet.html#including-leaflet-css-js"><i class="fa fa-check"></i><b>6.5.7</b> Including Leaflet CSS and JavaScript</a></li>
<li class="chapter" data-level="6.5.8" data-path="leaflet.html"><a href="leaflet.html#adding-map-div"><i class="fa fa-check"></i><b>6.5.8</b> Adding map <code>&lt;div&gt;</code></a></li>
<li class="chapter" data-level="6.5.9" data-path="leaflet.html"><a href="leaflet.html#creating-map-object"><i class="fa fa-check"></i><b>6.5.9</b> Creating a map object</a></li>
<li class="chapter" data-level="6.5.10" data-path="leaflet.html"><a href="leaflet.html#what-are-tile-layers"><i class="fa fa-check"></i><b>6.5.10</b> What are tile layers?</a></li>
<li class="chapter" data-level="6.5.11" data-path="leaflet.html"><a href="leaflet.html#adding-a-tile-layer"><i class="fa fa-check"></i><b>6.5.11</b> Adding a tile layer</a></li>
<li class="chapter" data-level="6.5.12" data-path="leaflet.html"><a href="leaflet.html#tile-layer-providers"><i class="fa fa-check"></i><b>6.5.12</b> Tile layer providers</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="leaflet.html"><a href="leaflet.html#adding-vector-layers"><i class="fa fa-check"></i><b>6.6</b> Adding vector layers</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="leaflet.html"><a href="leaflet.html#overview-adding-vector-layers"><i class="fa fa-check"></i><b>6.6.1</b> Overview</a></li>
<li class="chapter" data-level="6.6.2" data-path="leaflet.html"><a href="leaflet.html#adding-markers"><i class="fa fa-check"></i><b>6.6.2</b> Adding markers</a></li>
<li class="chapter" data-level="6.6.3" data-path="leaflet.html"><a href="leaflet.html#adding-lines"><i class="fa fa-check"></i><b>6.6.3</b> Adding lines</a></li>
<li class="chapter" data-level="6.6.4" data-path="leaflet.html"><a href="leaflet.html#adding-polygons"><i class="fa fa-check"></i><b>6.6.4</b> Adding polygons</a></li>
<li class="chapter" data-level="6.6.5" data-path="leaflet.html"><a href="leaflet.html#other-layer-types"><i class="fa fa-check"></i><b>6.6.5</b> Other layer types</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="leaflet.html"><a href="leaflet.html#adding-popups"><i class="fa fa-check"></i><b>6.7</b> Adding popups</a></li>
<li class="chapter" data-level="6.8" data-path="leaflet.html"><a href="leaflet.html#adding-a-description"><i class="fa fa-check"></i><b>6.8</b> Adding a description</a></li>
<li class="chapter" data-level="6.9" data-path="leaflet.html"><a href="leaflet.html#introducing-map-events"><i class="fa fa-check"></i><b>6.9</b> Introducing map events</a></li>
<li class="chapter" data-level="6.10" data-path="leaflet.html"><a href="leaflet.html#exercise-06"><i class="fa fa-check"></i><b>6.10</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="geojson-1.html"><a href="geojson-1.html"><i class="fa fa-check"></i><b>7</b> GeoJSON</a>
<ul>
<li class="chapter" data-level="7.1" data-path="geojson-1.html"><a href="geojson-1.html#introduction-6"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="geojson-1.html"><a href="geojson-1.html#what-is-geojson"><i class="fa fa-check"></i><b>7.2</b> What is GeoJSON?</a></li>
<li class="chapter" data-level="7.3" data-path="geojson-1.html"><a href="geojson-1.html#geojson-structure"><i class="fa fa-check"></i><b>7.3</b> GeoJSON structure</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="geojson-1.html"><a href="geojson-1.html#overview-geojson"><i class="fa fa-check"></i><b>7.3.1</b> Overview</a></li>
<li class="chapter" data-level="7.3.2" data-path="geojson-1.html"><a href="geojson-1.html#geometries"><i class="fa fa-check"></i><b>7.3.2</b> Geometries</a></li>
<li class="chapter" data-level="7.3.3" data-path="geojson-1.html"><a href="geojson-1.html#features"><i class="fa fa-check"></i><b>7.3.3</b> Features</a></li>
<li class="chapter" data-level="7.3.4" data-path="geojson-1.html"><a href="geojson-1.html#feature-collections"><i class="fa fa-check"></i><b>7.3.4</b> Feature collections</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="geojson-1.html"><a href="geojson-1.html#editing-geojson"><i class="fa fa-check"></i><b>7.4</b> Editing GeoJSON</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="geojson-1.html"><a href="geojson-1.html#geojson-io"><i class="fa fa-check"></i><b>7.4.1</b> geojson.io</a></li>
<li class="chapter" data-level="7.4.2" data-path="geojson-1.html"><a href="geojson-1.html#mapshaper"><i class="fa fa-check"></i><b>7.4.2</b> mapshaper</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="geojson-1.html"><a href="geojson-1.html#adding-geojson-to-leaflet-map"><i class="fa fa-check"></i><b>7.5</b> Adding GeoJSON to Leaflet map</a></li>
<li class="chapter" data-level="7.6" data-path="geojson-1.html"><a href="geojson-1.html#geojson-viewer"><i class="fa fa-check"></i><b>7.6</b> GeoJSON viewer example</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="geojson-1.html"><a href="geojson-1.html#viewer-structure"><i class="fa fa-check"></i><b>7.6.1</b> Viewer structure</a></li>
<li class="chapter" data-level="7.6.2" data-path="geojson-1.html"><a href="geojson-1.html#viewer-html-and-css"><i class="fa fa-check"></i><b>7.6.2</b> HTML and CSS</a></li>
<li class="chapter" data-level="7.6.3" data-path="geojson-1.html"><a href="geojson-1.html#base-map"><i class="fa fa-check"></i><b>7.6.3</b> Base map</a></li>
<li class="chapter" data-level="7.6.4" data-path="geojson-1.html"><a href="geojson-1.html#adding-an-event-listener"><i class="fa fa-check"></i><b>7.6.4</b> Adding an event listener</a></li>
<li class="chapter" data-level="7.6.5" data-path="geojson-1.html"><a href="geojson-1.html#using-layer-groups"><i class="fa fa-check"></i><b>7.6.5</b> Using layer groups</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="geojson-1.html"><a href="geojson-1.html#ajax"><i class="fa fa-check"></i><b>7.7</b> Ajax and the <code>fetch</code> API</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="geojson-1.html"><a href="geojson-1.html#overview-ajax"><i class="fa fa-check"></i><b>7.7.1</b> What is Ajax?</a></li>
<li class="chapter" data-level="7.7.2" data-path="geojson-1.html"><a href="geojson-1.html#ajax-examples"><i class="fa fa-check"></i><b>7.7.2</b> Ajax examples</a></li>
<li class="chapter" data-level="7.7.3" data-path="geojson-1.html"><a href="geojson-1.html#making-ajax-requests-with-fetch"><i class="fa fa-check"></i><b>7.7.3</b> The <code>fetch</code> API</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="geojson-1.html"><a href="geojson-1.html#loading-geojson-files"><i class="fa fa-check"></i><b>7.8</b> Loading GeoJSON files</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="geojson-1.html"><a href="geojson-1.html#loading-local-files"><i class="fa fa-check"></i><b>7.8.1</b> Loading local files</a></li>
<li class="chapter" data-level="7.8.2" data-path="geojson-1.html"><a href="geojson-1.html#loading-remote-files"><i class="fa fa-check"></i><b>7.8.2</b> Loading remote files</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="geojson-1.html"><a href="geojson-1.html#exercise-4"><i class="fa fa-check"></i><b>7.9</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html"><i class="fa fa-check"></i><b>8</b> Symbology and Interactivity</a>
<ul>
<li class="chapter" data-level="8.1" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#introduction-7"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#l-geojson-options"><i class="fa fa-check"></i><b>8.2</b> <code>L.geoJSON</code> options</a></li>
<li class="chapter" data-level="8.3" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#constant-style"><i class="fa fa-check"></i><b>8.3</b> Constant style</a></li>
<li class="chapter" data-level="8.4" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#varying-style"><i class="fa fa-check"></i><b>8.4</b> Varying style</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#setting-varying-style"><i class="fa fa-check"></i><b>8.4.1</b> Setting varying style</a></li>
<li class="chapter" data-level="8.4.2" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#states-example"><i class="fa fa-check"></i><b>8.4.2</b> States example</a></li>
<li class="chapter" data-level="8.4.3" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#towns-example"><i class="fa fa-check"></i><b>8.4.3</b> Towns example</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#constructing-popups-from-data"><i class="fa fa-check"></i><b>8.5</b> Constructing popups from data</a></li>
<li class="chapter" data-level="8.6" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#adding-a-legend"><i class="fa fa-check"></i><b>8.6</b> Adding a legend</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#setting-legend-contents-with-l.control"><i class="fa fa-check"></i><b>8.6.1</b> Setting legend contents with <code>L.control</code></a></li>
<li class="chapter" data-level="8.6.2" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#using-css-to-style-the-legend"><i class="fa fa-check"></i><b>8.6.2</b> Using CSS to style the legend</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#dynamic-style"><i class="fa fa-check"></i><b>8.7</b> Dynamic style</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#styling-in-response-to-events"><i class="fa fa-check"></i><b>8.7.1</b> Styling in response to events</a></li>
<li class="chapter" data-level="8.7.2" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#dynamic-control-contents"><i class="fa fa-check"></i><b>8.7.2</b> Dynamic control contents</a></li>
<li class="chapter" data-level="8.7.3" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#linked-views"><i class="fa fa-check"></i><b>8.7.3</b> Linked views</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="symbology-and-interactivity.html"><a href="symbology-and-interactivity.html#exercise-08"><i class="fa fa-check"></i><b>8.8</b> Exercise</a></li>
</ul></li>
<li class="part"><span><b>III Databases</b></span></li>
<li class="chapter" data-level="9" data-path="databases.html"><a href="databases.html"><i class="fa fa-check"></i><b>9</b> Databases</a>
<ul>
<li class="chapter" data-level="9.1" data-path="databases.html"><a href="databases.html#introduction-databases"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="databases.html"><a href="databases.html#what-is-carto"><i class="fa fa-check"></i><b>9.2</b> What is CARTO?</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="databases.html"><a href="databases.html#the-carto-platform"><i class="fa fa-check"></i><b>9.2.1</b> The CARTO platform</a></li>
<li class="chapter" data-level="9.2.2" data-path="databases.html"><a href="databases.html#alternatives-to-carto"><i class="fa fa-check"></i><b>9.2.2</b> Alternatives to CARTO</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="databases.html"><a href="databases.html#databases-1"><i class="fa fa-check"></i><b>9.3</b> Databases</a></li>
<li class="chapter" data-level="9.4" data-path="databases.html"><a href="databases.html#spatial-databases"><i class="fa fa-check"></i><b>9.4</b> Spatial databases</a></li>
<li class="chapter" data-level="9.5" data-path="databases.html"><a href="databases.html#what-is-postgis"><i class="fa fa-check"></i><b>9.5</b> What is PostGIS?</a></li>
<li class="chapter" data-level="9.6" data-path="databases.html"><a href="databases.html#what-is-sql"><i class="fa fa-check"></i><b>9.6</b> What is SQL?</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="databases.html"><a href="databases.html#overview-sql"><i class="fa fa-check"></i><b>9.6.1</b> Overview</a></li>
<li class="chapter" data-level="9.6.2" data-path="databases.html"><a href="databases.html#non-spatial-queries"><i class="fa fa-check"></i><b>9.6.2</b> Non-spatial queries</a></li>
<li class="chapter" data-level="9.6.3" data-path="databases.html"><a href="databases.html#the-geometry-column"><i class="fa fa-check"></i><b>9.6.3</b> The geometry column</a></li>
<li class="chapter" data-level="9.6.4" data-path="databases.html"><a href="databases.html#spatial-queries"><i class="fa fa-check"></i><b>9.6.4</b> Spatial queries</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="databases.html"><a href="databases.html#the-carto-sql-api"><i class="fa fa-check"></i><b>9.7</b> The CARTO SQL API</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="databases.html"><a href="databases.html#api-usage"><i class="fa fa-check"></i><b>9.7.1</b> API usage</a></li>
<li class="chapter" data-level="9.7.2" data-path="databases.html"><a href="databases.html#query-example"><i class="fa fa-check"></i><b>9.7.2</b> Query example</a></li>
<li class="chapter" data-level="9.7.3" data-path="databases.html"><a href="databases.html#uploading-your-data"><i class="fa fa-check"></i><b>9.7.3</b> Uploading your data</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="databases.html"><a href="databases.html#carto-and-leaflet"><i class="fa fa-check"></i><b>9.8</b> CARTO and Leaflet</a></li>
<li class="chapter" data-level="9.9" data-path="databases.html"><a href="databases.html#exercise-09"><i class="fa fa-check"></i><b>9.9</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html"><i class="fa fa-check"></i><b>10</b> Non-spatial Queries</a>
<ul>
<li class="chapter" data-level="10.1" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#introduction-8"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#subsetting-with-sql"><i class="fa fa-check"></i><b>10.2</b> Subsetting with SQL</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#filtering-based-on-attributes"><i class="fa fa-check"></i><b>10.2.1</b> Filtering based on attributes</a></li>
<li class="chapter" data-level="10.2.2" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#displaying-on-a-map"><i class="fa fa-check"></i><b>10.2.2</b> Displaying on a map</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#creating-a-dropdown-menu"><i class="fa fa-check"></i><b>10.3</b> Creating a dropdown menu</a></li>
<li class="chapter" data-level="10.4" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#populating-dropdown-options"><i class="fa fa-check"></i><b>10.4</b> Populating dropdown options</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#how-many-species-do-we-have"><i class="fa fa-check"></i><b>10.4.1</b> How many species do we have?</a></li>
<li class="chapter" data-level="10.4.2" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#dropdown-menu-placeholder"><i class="fa fa-check"></i><b>10.4.2</b> Dropdown menu placeholder</a></li>
<li class="chapter" data-level="10.4.3" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#finding-unique-values"><i class="fa fa-check"></i><b>10.4.3</b> Finding unique values</a></li>
<li class="chapter" data-level="10.4.4" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#adding-options"><i class="fa fa-check"></i><b>10.4.4</b> Adding the options</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#updating-the-map"><i class="fa fa-check"></i><b>10.5</b> Updating the map</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#overview-updating-map"><i class="fa fa-check"></i><b>10.5.1</b> Overview</a></li>
<li class="chapter" data-level="10.5.2" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#manual-example"><i class="fa fa-check"></i><b>10.5.2</b> Manual example</a></li>
<li class="chapter" data-level="10.5.3" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#automatic-updating"><i class="fa fa-check"></i><b>10.5.3</b> Automatic updating</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#rearranging-the-code"><i class="fa fa-check"></i><b>10.6</b> Refactoring the code</a></li>
<li class="chapter" data-level="10.7" data-path="non-spatial-queries-1.html"><a href="non-spatial-queries-1.html#exercise-10"><i class="fa fa-check"></i><b>10.7</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html"><i class="fa fa-check"></i><b>11</b> Spatial Queries</a>
<ul>
<li class="chapter" data-level="11.1" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html#introduction-9"><i class="fa fa-check"></i><b>11.1</b> Introduction</a></li>
<li class="chapter" data-level="11.2" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html#adding-marker-on-click"><i class="fa fa-check"></i><b>11.2</b> Adding markers on click</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html#getting-click-coordinates"><i class="fa fa-check"></i><b>11.2.1</b> Getting click coordinates</a></li>
<li class="chapter" data-level="11.2.2" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html#adding-custom-marker"><i class="fa fa-check"></i><b>11.2.2</b> Adding a custom marker</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html#spatial-postgis-operators"><i class="fa fa-check"></i><b>11.3</b> Spatial PostGIS operators</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html#overview-postgis-operators"><i class="fa fa-check"></i><b>11.3.1</b> Overview</a></li>
<li class="chapter" data-level="11.3.2" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html#geographical-distance"><i class="fa fa-check"></i><b>11.3.2</b> Geographical distance</a></li>
<li class="chapter" data-level="11.3.3" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html#sphere-vs-spheroid"><i class="fa fa-check"></i><b>11.3.3</b> Sphere vs. spheroid</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html#adding-nearest-points-to-map"><i class="fa fa-check"></i><b>11.4</b> Adding nearest points to map</a></li>
<li class="chapter" data-level="11.5" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html#drawing-line-connectors"><i class="fa fa-check"></i><b>11.5</b> Drawing line connectors</a></li>
<li class="chapter" data-level="11.6" data-path="spatial-queries-1.html"><a href="spatial-queries-1.html#exercise-5"><i class="fa fa-check"></i><b>11.6</b> Exercise</a></li>
</ul></li>
<li class="part"><span><b>IV Advanced Topics</b></span></li>
<li class="chapter" data-level="12" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html"><i class="fa fa-check"></i><b>12</b> Client-side Geoprocessing</a>
<ul>
<li class="chapter" data-level="12.1" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#introduction-10"><i class="fa fa-check"></i><b>12.1</b> Introduction</a></li>
<li class="chapter" data-level="12.2" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#geoprocessing-with-turfjs"><i class="fa fa-check"></i><b>12.2</b> Geoprocessing with Turf.js</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#overview-turfjs"><i class="fa fa-check"></i><b>12.2.1</b> Overview</a></li>
<li class="chapter" data-level="12.2.2" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#including-the-turf-js-library"><i class="fa fa-check"></i><b>12.2.2</b> Including the Turf.js library</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#great-circle-line"><i class="fa fa-check"></i><b>12.3</b> Great Circle line</a></li>
<li class="chapter" data-level="12.4" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#continuously-updated-tin"><i class="fa fa-check"></i><b>12.4</b> Continuously updated TIN</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#overview-continuous-tin"><i class="fa fa-check"></i><b>12.4.1</b> Overview</a></li>
<li class="chapter" data-level="12.4.2" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#generating-random-points"><i class="fa fa-check"></i><b>12.4.2</b> Generating random points</a></li>
<li class="chapter" data-level="12.4.3" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#adding-a-tin-layer"><i class="fa fa-check"></i><b>12.4.3</b> Adding a TIN layer</a></li>
<li class="chapter" data-level="12.4.4" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#draggable-circle-markers"><i class="fa fa-check"></i><b>12.4.4</b> Draggable circle markers</a></li>
<li class="chapter" data-level="12.4.5" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#continuous-updating"><i class="fa fa-check"></i><b>12.4.5</b> Continuous updating</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#clustering"><i class="fa fa-check"></i><b>12.5</b> Clustering</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#overview-clustering"><i class="fa fa-check"></i><b>12.5.1</b> Overview</a></li>
<li class="chapter" data-level="12.5.2" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#processing-sets-of-features"><i class="fa fa-check"></i><b>12.5.2</b> Processing sets of features</a></li>
<li class="chapter" data-level="12.5.3" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#adding-a-convex-hull"><i class="fa fa-check"></i><b>12.5.3</b> Adding a Convex Hull</a></li>
<li class="chapter" data-level="12.5.4" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#dbscan-clustering"><i class="fa fa-check"></i><b>12.5.4</b> DBSCAN clustering</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#heatmaps-with-leafletheat"><i class="fa fa-check"></i><b>12.6</b> Heatmaps with Leaflet.heat</a></li>
<li class="chapter" data-level="12.7" data-path="client-side-geoprocessing.html"><a href="client-side-geoprocessing.html#exercise-6"><i class="fa fa-check"></i><b>12.7</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html"><i class="fa fa-check"></i><b>13</b> Collaborative Mapping</a>
<ul>
<li class="chapter" data-level="13.1" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html#introduction-11"><i class="fa fa-check"></i><b>13.1</b> Introduction</a></li>
<li class="chapter" data-level="13.2" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html#crowdsourcing"><i class="fa fa-check"></i><b>13.2</b> Crowdsourcing</a></li>
<li class="chapter" data-level="13.3" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html#the-drawing-control"><i class="fa fa-check"></i><b>13.3</b> The drawing control</a></li>
<li class="chapter" data-level="13.4" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html#working-with-drawn-items"><i class="fa fa-check"></i><b>13.4</b> Working with drawn items</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html#printing-drawn-items-geojson"><i class="fa fa-check"></i><b>13.4.1</b> Printing drawn items GeoJSON</a></li>
<li class="chapter" data-level="13.4.2" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html#expanded-geojson-viewer"><i class="fa fa-check"></i><b>13.4.2</b> Expanded GeoJSON viewer</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html#submission-form"><i class="fa fa-check"></i><b>13.5</b> Submission form</a></li>
<li class="chapter" data-level="13.6" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html#sending-features-to-the-database"><i class="fa fa-check"></i><b>13.6</b> Sending features to the database</a>
<ul>
<li class="chapter" data-level="13.6.1" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html#setting-database-permissions"><i class="fa fa-check"></i><b>13.6.1</b> Setting database permissions</a></li>
<li class="chapter" data-level="13.6.2" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html#adding-draw-control"><i class="fa fa-check"></i><b>13.6.2</b> Adding the drawing control</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="collaborative-mapping.html"><a href="collaborative-mapping.html#exercise-7"><i class="fa fa-check"></i><b>13.7</b> Exercise</a></li>
</ul></li>
<li class="part"><span><b>V Appendices</b></span></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="associated-files.html"><a href="associated-files.html"><i class="fa fa-check"></i><b>A</b> Associated Files</a></li>
<li class="chapter" data-level="B" data-path="list-of-examples.html"><a href="list-of-examples.html"><i class="fa fa-check"></i><b>B</b> List of Examples</a>
<ul>
<li class="chapter" data-level="B.1" data-path="list-of-examples.html"><a href="list-of-examples.html#main"><i class="fa fa-check"></i><b>B.1</b> Main</a></li>
<li class="chapter" data-level="B.2" data-path="list-of-examples.html"><a href="list-of-examples.html#additional"><i class="fa fa-check"></i><b>B.2</b> Additional</a>
<ul>
<li class="chapter" data-level="B.2.1" data-path="list-of-examples.html"><a href="list-of-examples.html#html-and-css"><i class="fa fa-check"></i><b>B.2.1</b> HTML and CSS</a></li>
<li class="chapter" data-level="B.2.2" data-path="list-of-examples.html"><a href="list-of-examples.html#javascript"><i class="fa fa-check"></i><b>B.2.2</b> JavaScript</a></li>
<li class="chapter" data-level="B.2.3" data-path="list-of-examples.html"><a href="list-of-examples.html#leaflet-1"><i class="fa fa-check"></i><b>B.2.3</b> Leaflet</a></li>
<li class="chapter" data-level="B.2.4" data-path="list-of-examples.html"><a href="list-of-examples.html#geo-processing"><i class="fa fa-check"></i><b>B.2.4</b> Geo-processing</a></li>
<li class="chapter" data-level="B.2.5" data-path="list-of-examples.html"><a href="list-of-examples.html#d-maps"><i class="fa fa-check"></i><b>B.2.5</b> 2.5D Maps</a></li>
<li class="chapter" data-level="B.2.6" data-path="list-of-examples.html"><a href="list-of-examples.html#d-maps-1"><i class="fa fa-check"></i><b>B.2.6</b> 3D maps</a></li>
<li class="chapter" data-level="B.2.7" data-path="list-of-examples.html"><a href="list-of-examples.html#animation"><i class="fa fa-check"></i><b>B.2.7</b> Animation</a></li>
<li class="chapter" data-level="B.2.8" data-path="list-of-examples.html"><a href="list-of-examples.html#real-time-data"><i class="fa fa-check"></i><b>B.2.8</b> Real-time data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="C" data-path="list-of-exercise-solutions.html"><a href="list-of-exercise-solutions.html"><i class="fa fa-check"></i><b>C</b> List of Exercise Solutions</a></li>
<li class="chapter" data-level="D" data-path="bgu-course-2021.html"><a href="bgu-course-2021.html"><i class="fa fa-check"></i><b>D</b> BGU course 2021</a>
<ul>
<li class="chapter" data-level="D.1" data-path="bgu-course-2021.html"><a href="bgu-course-2021.html#place-and-time"><i class="fa fa-check"></i><b>D.1</b> Place and Time</a></li>
<li class="chapter" data-level="D.2" data-path="bgu-course-2021.html"><a href="bgu-course-2021.html#lecture-plan"><i class="fa fa-check"></i><b>D.2</b> Lecture plan</a></li>
<li class="chapter" data-level="D.3" data-path="bgu-course-2021.html"><a href="bgu-course-2021.html#project-submission-dates"><i class="fa fa-check"></i><b>D.3</b> Project submission dates</a></li>
<li class="chapter" data-level="D.4" data-path="bgu-course-2021.html"><a href="bgu-course-2021.html#additional-resources"><i class="fa fa-check"></i><b>D.4</b> Additional resources</a>
<ul>
<li class="chapter" data-level="D.4.1" data-path="bgu-course-2021.html"><a href="bgu-course-2021.html#html-css"><i class="fa fa-check"></i><b>D.4.1</b> HTML &amp; CSS</a></li>
<li class="chapter" data-level="D.4.2" data-path="bgu-course-2021.html"><a href="bgu-course-2021.html#javascript-1"><i class="fa fa-check"></i><b>D.4.2</b> JavaScript</a></li>
<li class="chapter" data-level="D.4.3" data-path="bgu-course-2021.html"><a href="bgu-course-2021.html#web-mapping"><i class="fa fa-check"></i><b>D.4.3</b> Web mapping</a></li>
<li class="chapter" data-level="D.4.4" data-path="bgu-course-2021.html"><a href="bgu-course-2021.html#postgis"><i class="fa fa-check"></i><b>D.4.4</b> PostGIS</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="E" data-path="projects.html"><a href="projects.html"><i class="fa fa-check"></i><b>E</b> Projects</a>
<ul>
<li class="chapter" data-level="E.1" data-path="projects.html"><a href="projects.html#overview-3"><i class="fa fa-check"></i><b>E.1</b> Overview</a></li>
<li class="chapter" data-level="E.2" data-path="projects.html"><a href="projects.html#carto-account"><i class="fa fa-check"></i><b>E.2</b> CARTO Account</a></li>
<li class="chapter" data-level="E.3" data-path="projects.html"><a href="projects.html#data"><i class="fa fa-check"></i><b>E.3</b> Data</a></li>
<li class="chapter" data-level="E.4" data-path="projects.html"><a href="projects.html#project-requirements"><i class="fa fa-check"></i><b>E.4</b> Project requirements</a>
<ul>
<li class="chapter" data-level="E.4.1" data-path="projects.html"><a href="projects.html#project-01"><i class="fa fa-check"></i><b>E.4.1</b> Project 01</a></li>
<li class="chapter" data-level="E.4.2" data-path="projects.html"><a href="projects.html#project-02"><i class="fa fa-check"></i><b>E.4.2</b> Project 02</a></li>
<li class="chapter" data-level="E.4.3" data-path="projects.html"><a href="projects.html#project-03"><i class="fa fa-check"></i><b>E.4.3</b> Project 03</a></li>
</ul></li>
<li class="chapter" data-level="E.5" data-path="projects.html"><a href="projects.html#submission"><i class="fa fa-check"></i><b>E.5</b> Submission</a></li>
<li class="chapter" data-level="E.6" data-path="projects.html"><a href="projects.html#grading"><i class="fa fa-check"></i><b>E.6</b> Grading</a></li>
</ul></li>
<li class="chapter" data-level="F" data-path="exam.html"><a href="exam.html"><i class="fa fa-check"></i><b>F</b> Exam</a>
<ul>
<li class="chapter" data-level="F.1" data-path="exam.html"><a href="exam.html#topics"><i class="fa fa-check"></i><b>F.1</b> Topics</a></li>
<li class="chapter" data-level="F.2" data-path="exam.html"><a href="exam.html#sample-questions"><i class="fa fa-check"></i><b>F.2</b> Sample questions</a>
<ul>
<li class="chapter" data-level="F.2.1" data-path="exam.html"><a href="exam.html#question-1"><i class="fa fa-check"></i><b>F.2.1</b> Question 1</a></li>
<li class="chapter" data-level="F.2.3" data-path="exam.html"><a href="exam.html#question-3"><i class="fa fa-check"></i><b>F.2.3</b> Question 3</a></li>
<li class="chapter" data-level="F.2.4" data-path="exam.html"><a href="exam.html#question-4"><i class="fa fa-check"></i><b>F.2.4</b> Question 4</a></li>
<li class="chapter" data-level="F.2.5" data-path="exam.html"><a href="exam.html#question-5"><i class="fa fa-check"></i><b>F.2.5</b> Question 5</a></li>
<li class="chapter" data-level="F.2.6" data-path="exam.html"><a href="exam.html#question-6"><i class="fa fa-check"></i><b>F.2.6</b> Question 6</a></li>
<li class="chapter" data-level="F.2.7" data-path="exam.html"><a href="exam.html#question-7"><i class="fa fa-check"></i><b>F.2.7</b> Question 7</a></li>
<li class="chapter" data-level="F.2.8" data-path="exam.html"><a href="exam.html#question-8"><i class="fa fa-check"></i><b>F.2.8</b> Question 8</a></li>
<li class="chapter" data-level="F.2.9" data-path="exam.html"><a href="exam.html#question-9"><i class="fa fa-check"></i><b>F.2.9</b> Question 9</a></li>
<li class="chapter" data-level="F.2.10" data-path="exam.html"><a href="exam.html#question-10"><i class="fa fa-check"></i><b>F.2.10</b> Question 10</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="G" data-path="additional-questions.html"><a href="additional-questions.html"><i class="fa fa-check"></i><b>G</b> Additional Questions</a>
<ul>
<li class="chapter" data-level="G.1" data-path="additional-questions.html"><a href="additional-questions.html#chapter-3"><i class="fa fa-check"></i><b>G.1</b> Chapter 3</a>
<ul>
<li class="chapter" data-level="G.1.1" data-path="additional-questions.html"><a href="additional-questions.html#modifying-global-variable"><i class="fa fa-check"></i><b>G.1.1</b> Modifying global variable</a></li>
<li class="chapter" data-level="G.1.2" data-path="additional-questions.html"><a href="additional-questions.html#insertingremoving-array-element"><i class="fa fa-check"></i><b>G.1.2</b> Inserting/removing array element</a></li>
<li class="chapter" data-level="G.1.3" data-path="additional-questions.html"><a href="additional-questions.html#object-oriented-language"><i class="fa fa-check"></i><b>G.1.3</b> Object Oriented language</a></li>
</ul></li>
<li class="chapter" data-level="G.2" data-path="additional-questions.html"><a href="additional-questions.html#chapter-4"><i class="fa fa-check"></i><b>G.2</b> Chapter 4</a>
<ul>
<li class="chapter" data-level="G.2.1" data-path="additional-questions.html"><a href="additional-questions.html#removing-collection-of-html-elements"><i class="fa fa-check"></i><b>G.2.1</b> Removing collection of HTML elements</a></li>
<li class="chapter" data-level="G.2.2" data-path="additional-questions.html"><a href="additional-questions.html#constraining-event-listener-frequency"><i class="fa fa-check"></i><b>G.2.2</b> Constraining event listener frequency</a></li>
<li class="chapter" data-level="G.2.3" data-path="additional-questions.html"><a href="additional-questions.html#saving-.getelementbyid-method-in-variable"><i class="fa fa-check"></i><b>G.2.3</b> Saving <code>.getElementById</code> method in variable</a></li>
</ul></li>
<li class="chapter" data-level="G.3" data-path="additional-questions.html"><a href="additional-questions.html#chapter-6"><i class="fa fa-check"></i><b>G.3</b> Chapter 6</a>
<ul>
<li class="chapter" data-level="G.3.1" data-path="additional-questions.html"><a href="additional-questions.html#routing"><i class="fa fa-check"></i><b>G.3.1</b> Routing</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="H" data-path="setting-up-an-sql-api.html"><a href="setting-up-an-sql-api.html"><i class="fa fa-check"></i><b>H</b> Setting up an SQL API</a>
<ul>
<li class="chapter" data-level="H.1" data-path="setting-up-an-sql-api.html"><a href="setting-up-an-sql-api.html#introduction-12"><i class="fa fa-check"></i><b>H.1</b> Introduction</a></li>
<li class="chapter" data-level="H.2" data-path="setting-up-an-sql-api.html"><a href="setting-up-an-sql-api.html#computer-with-fixed-ip-address"><i class="fa fa-check"></i><b>H.2</b> Computer with fixed IP address</a></li>
<li class="chapter" data-level="H.3" data-path="setting-up-an-sql-api.html"><a href="setting-up-an-sql-api.html#installing-postgresql-postgis"><i class="fa fa-check"></i><b>H.3</b> Installing PostgreSQL and PostGIS</a></li>
<li class="chapter" data-level="H.4" data-path="setting-up-an-sql-api.html"><a href="setting-up-an-sql-api.html#loading-data-into-the-database"><i class="fa fa-check"></i><b>H.4</b> Loading data into the database</a></li>
<li class="chapter" data-level="H.5" data-path="setting-up-an-sql-api.html"><a href="setting-up-an-sql-api.html#adding-read-only-database-user"><i class="fa fa-check"></i><b>H.5</b> Adding a read-only database user</a></li>
<li class="chapter" data-level="H.6" data-path="setting-up-an-sql-api.html"><a href="setting-up-an-sql-api.html#installing-nodejs-and-required-modules"><i class="fa fa-check"></i><b>H.6</b> Installing Node.js and required modules</a></li>
<li class="chapter" data-level="H.7" data-path="setting-up-an-sql-api.html"><a href="setting-up-an-sql-api.html#creating-a-service"><i class="fa fa-check"></i><b>H.7</b> Creating a service</a></li>
<li class="chapter" data-level="H.8" data-path="setting-up-an-sql-api.html"><a href="setting-up-an-sql-api.html#testing-the-sql-api"><i class="fa fa-check"></i><b>H.8</b> Testing the SQL API</a></li>
</ul></li>
<li class="chapter" data-level="I" data-path="setting-up-a-static-server-using-r.html"><a href="setting-up-a-static-server-using-r.html"><i class="fa fa-check"></i><b>I</b> Setting up a static server using R</a>
<ul>
<li class="chapter" data-level="I.1" data-path="setting-up-a-static-server-using-r.html"><a href="setting-up-a-static-server-using-r.html#introduction-13"><i class="fa fa-check"></i><b>I.1</b> Introduction</a></li>
<li class="chapter" data-level="I.2" data-path="setting-up-a-static-server-using-r.html"><a href="setting-up-a-static-server-using-r.html#installing-r"><i class="fa fa-check"></i><b>I.2</b> Installing R</a></li>
<li class="chapter" data-level="I.3" data-path="setting-up-a-static-server-using-r.html"><a href="setting-up-a-static-server-using-r.html#installing-the-servr-package"><i class="fa fa-check"></i><b>I.3</b> Installing the <code>servr</code> package</a></li>
<li class="chapter" data-level="I.4" data-path="setting-up-a-static-server-using-r.html"><a href="setting-up-a-static-server-using-r.html#starting-the-server"><i class="fa fa-check"></i><b>I.4</b> Starting the server</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org/" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="index-2.html">Introduction to Web Mapping</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="leaflet" class="section level1" number="6">
<h1><span class="header-section-number">Chapter 6</span> Leaflet</h1>
<p><i>Last updated: 2021-08-24 14:54:58 </i></p>
<div id="introduction-5" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Introduction</h2>
<p>Now that we have covered the basics of web technologies, we are moving on to the main topic of this book: web mapping. This chapter and the next two (Chapters <a href="leaflet.html#leaflet">6</a>–<a href="symbology-and-interactivity.html#symbology-and-interactivity">8</a>) introduce <strong>Leaflet</strong>, a JavaScript library used to create interactive web maps. Using Leaflet, you can create a simple map using just two or three JavaScript expressions, or you can build a complex map using hundreds of lines of code.</p>
<p>In this chapter, we will learn how to initialize a Leaflet web map on our web page, and how to add several types of layers on the map: tile layers (Section <a href="leaflet.html#adding-a-tile-layer">6.5.11</a>) and simple shapes such as point markers (Section <a href="leaflet.html#adding-markers">6.6.2</a>), lines (Section <a href="leaflet.html#adding-lines">6.6.3</a>), and polygons (Section <a href="leaflet.html#adding-polygons">6.6.4</a>). We will also learn to add interactive popups for our layers (Section <a href="leaflet.html#adding-popups">6.7</a>) and a panel with a textual description of our map (Section <a href="leaflet.html#adding-a-description">6.8</a>). Finally, we will introduce map events—browser events associated with the web map (Section <a href="leaflet.html#introducing-map-events">6.9</a>).</p>
<p>In the next two Chapters <a href="geojson-1.html#geojson-1">7</a>–<a href="symbology-and-interactivity.html#symbology-and-interactivity">8</a>, we will learn some more advanced Leaflet functionality. In Chapter <a href="geojson-1.html#geojson-1">7</a>, we will learn to add complex shapes coming from external GeoJSON files. Then, in Chapter <a href="symbology-and-interactivity.html#symbology-and-interactivity">8</a>, we will learn how to define symbology and interactive behavior in our web map.</p>
</div>
<div id="what-is-web-map" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> What is a web map?</h2>
<p>We already introduced the concept of web mapping in Section <a href="index.html#what-is-web-mapping">0.1</a>. We mentioned that the term “web map” usually implies a map that is not simply <em>on</em> the web, but rather one that is <em>powered</em> by the web. It is usually interactive, and not always self-contained, meaning that it “pulls” content from other locations, such as tile layer servers (Section <a href="leaflet.html#tile-layer-providers">6.5.12</a>) or database APIs (Section <a href="databases.html#the-carto-sql-api">9.7</a>)<a href="#fn52" class="footnote-ref" id="fnref52"><sup>52</sup></a>.</p>
<p>Similarly to spatial information displayed in <a href="https://en.wikipedia.org/wiki/Geographic_information_system">GIS software</a>, web maps are usually composed of one or more <strong>layers</strong>. Web map layers can be generally classified into two categories:</p>
<ul>
<li><strong>Background</strong> layers, or basemaps, comprising collections of gridded images or vector tiles, which are usually general-purpose and not prepared specifically for our map</li>
<li><strong>Foreground</strong> layers, or overlays, which are usually vector layers (points, lines, and polygons), commonly prepared and/or fine-tuned for the specific map web where they are shown</li>
</ul>
<p>Background layers are usually static and non-interactive. Conversely, foreground layers are usually dynamic and associated with user interaction, such as the ability to query layer attributes by clicking on a feature (Section <a href="leaflet.html#adding-popups">6.7</a>).</p>
</div>
<div id="what-is-leaflet" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> What is Leaflet?</h2>
<p><img src="images/logo_leaflet.svg" style="height: 75px"></p>
<p><a href="https://leafletjs.com/"><strong>Leaflet</strong></a> <span class="citation">(<a href="#ref-crickard2014leaflet" role="doc-biblioref">Crickard III 2014</a>)</span> is an open-source JavaScript library for building interactive web maps. Leaflet was initially released in 2011 (Table <a href="leaflet.html#tab:web-mapping-libraries">6.1</a>). It is lightweight, relatively simple, and flexible. For these reasons, Leaflet is probably the most popular <em>open-source</em> web-mapping library at the moment. As the Leaflet home page puts it, the guiding principle behind this library is simplicity: </p>
<p>“<em>Leaflet doesn’t try to do everything for everyone. Instead it focuses on making the basic things work perfectly.</em>”</p>
<p>Advanced functionality is still available through Leaflet <a href="https://leafletjs.com/plugins.html">plugins</a>. Towards the end of the book, we will learn about two Leaflet plugins: <strong>Leaflet.heat</strong> (Section <a href="client-side-geoprocessing.html#heatmaps-with-leafletheat">12.6</a>) and <strong>Leaflet.draw</strong> (Section <a href="collaborative-mapping.html#the-drawing-control">13.3</a>). </p>
</div>
<div id="alternatives-to-leaflet" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> Alternatives to Leaflet</h2>
<p>In this book, we will exclusively use Leaflet for building web maps. However, it is important to be aware of the landscape of alternative web-mapping libraries, their advantages and disadvantages. Table <a href="leaflet.html#tab:web-mapping-libraries">6.1</a> lists Leaflet along with other popular JavaScript libraries for web mapping<a href="#fn53" class="footnote-ref" id="fnref53"><sup>53</sup></a>. </p>
<table>
<caption><span id="tab:web-mapping-libraries">TABLE 6.1: </span> Popular web-mapping libraries</caption>
<thead>
<tr class="header">
<th>Library</th>
<th>Released</th>
<th>Type</th>
<th>URL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Google Maps</td>
<td>2005</td>
<td>Commercial</td>
<td><a href="https://developers.google.com/maps/" class="uri">https://developers.google.com/maps/</a></td>
</tr>
<tr class="even">
<td>OpenLayers</td>
<td>2006</td>
<td>Open-source</td>
<td><a href="https://openlayers.org/" class="uri">https://openlayers.org/</a></td>
</tr>
<tr class="odd">
<td>ArcGIS API for JS</td>
<td>2008</td>
<td>Commercial</td>
<td><a href="https://developers.arcgis.com/javascript/" class="uri">https://developers.arcgis.com/javascript/</a></td>
</tr>
<tr class="even">
<td>Leaflet</td>
<td>2011</td>
<td>Open-source</td>
<td><a href="https://leafletjs.com/" class="uri">https://leafletjs.com/</a></td>
</tr>
<tr class="odd">
<td>D3</td>
<td>2011</td>
<td>Open-source</td>
<td><a href="https://d3js.org/" class="uri">https://d3js.org/</a></td>
</tr>
<tr class="even">
<td>Mapbox GL JS</td>
<td>2015</td>
<td>Commercial</td>
<td><a href="https://www.mapbox.com/mapbox-gl-js/api/" class="uri">https://www.mapbox.com/mapbox-gl-js/api/</a></td>
</tr>
</tbody>
</table>
<p><img src="images/logo_google_maps.svg" style="height: 75px"></p>
<p><a href="https://developers.google.com/maps/documentation/javascript/"><strong>Google Maps JavaScript API</strong></a> <span class="citation">(<a href="#ref-dincer2013google" role="doc-biblioref">Dincer and Uraz 2013</a>)</span> is a proprietary web-mapping library by Google. The biggest advantage of the Google Maps API is that it brings the finely crafted look and feel of the Google Maps background layer to your own web map. On the other hand, background layers other than Google’s are not supported. The Google Maps API also has advanced functionality not available elsewhere, such as integration with <a href="https://developers.google.com/maps/documentation/javascript/examples/streetview-service">Street View</a> scenes. However the library is closed-source, which means the web maps cannot be fully customized. Also, it requires a <a href="https://developers.google.com/maps/documentation/javascript/usage-and-billing">paid subscription</a>.</p>
<p><img src="images/logo_openlayers.svg" style="height: 75px"></p>
<p><a href="https://openlayers.org/"><strong>OpenLayers</strong></a> <span class="citation">(<a href="#ref-gratier2015openlayers" role="doc-biblioref">Gratier, Spencer, and Hazzard 2015</a>; <a href="#ref-langley2016openlayers" role="doc-biblioref">Langley and Perez 2016</a>; <a href="#ref-farkas2016mastering" role="doc-biblioref">Farkas 2016</a>)</span> is an older, more mature, and more richly featured open-source JavaScript library for building web maps, otherwise very similar to Leaflet in its scope. However, OpenLayers is also more complex, heavier (in terms of JavaScript file size), and more difficult to learn. Leaflet can be viewed as a lighter and more focused alternative to OpenLayers.</p>
<p><img src="images/logo_esri.svg" style="height: 65px"></p>
<p><a href="https://developers.arcgis.com/javascript/"><strong>ArcGIS API for JavaScript</strong></a> <span class="citation">(<a href="#ref-rubalcava2015arcgis" role="doc-biblioref">Rubalcava 2015</a>)</span> is another commercial web-mapping solution. The ArcGIS API is primarily designed to be used with services published using <a href="https://www.esri.com/software/arcgis/arcgisonline">ArcGIS Online</a> or <a href="http://server.arcgis.com/en/server/latest/get-started/windows/what-is-arcgis-for-server-.htm">ArcGIS Server</a>, though general data sources can also be used. The ability of the ArcGIS API to tap into web services originating from ArcToolbox that perform geoprocessing on the server is a feature which has no good equivalent in open-source software. However, using an ArcGIS Server requires a paid (expensive) license. Also, the APIs are free to use for development or educational use, but require a fee for commercial use.</p>
<p><img src="images/logo_D3.svg" style="height: 75px"></p>
<p><a href="https://d3js.org/"><strong>D3</strong></a> <span class="citation">(<a href="#ref-murray2017interactive" role="doc-biblioref">Murray 2017</a>; <a href="#ref-janert2019d3" role="doc-biblioref">Janert 2019</a>)</span> is an open-source JavaScript library for <a href="https://bl.ocks.org/mbostock">visualization</a> in general, though it is commonly used for <a href="https://d3indepth.com/geographic/">mapping</a> too <span class="citation">(<a href="#ref-newton2014learning" role="doc-biblioref">Newton and Villarreal 2014</a>)</span>. D3 is primarily used for displaying vector layers, as raster tile layers are not well supported. D3 is probably the most complex and difficult to learn among the libraries listed in Table <a href="leaflet.html#tab:web-mapping-libraries">6.1</a>. However, it is very flexible and can be used to create truly innovative map designs. Go back to the examples from Section <a href="index.html#what-is-web-mapping">0.1</a>—some of the most impressive ones, such as <a href="https://earth.nullschool.net/"><em>Earth Weather</em></a>, were created with the help of D3.</p>
<p><img src="images/logo_mapbox.png" style="height: 65px"></p>
<p><a href="https://docs.mapbox.com/mapbox-gl-js/api/"><strong>Mapbox GL JS</strong></a> is a web-mapping library provided by a commercial company named Mapbox. Notably, Mapbox GL JS uses customizable vector tile layers (Section <a href="leaflet.html#vector-tiles">6.5.10.3</a>) as background. You can use existing basemaps, or build your own using an interactive <a href="https://www.mapbox.com/mapbox-studio/">“studio”</a> web application. Like Google Maps, Mapbox GL JS also requires a <a href="https://www.mapbox.com/pricing/">paid subscription</a>, though the first 50,000 monthly map views are free. </p>
</div>
<div id="creating-a-basic-web-map" class="section level2" number="6.5">
<h2><span class="header-section-number">6.5</span> Creating a basic web map</h2>
<div id="overview-creating-a-basic-web-map" class="section level3" number="6.5.1">
<h3><span class="header-section-number">6.5.1</span> Overview</h3>
<p>In this section, we will learn to create a basic web map using Leaflet. The map is going to contain a single background (tile) layer, initially zoomed-in on the Ben-Gurion University. The final result is shown in Figure <a href="leaflet.html#fig:example-06-02">6.5</a>.</p>
</div>
<div id="web-page-setup" class="section level3" number="6.5.2">
<h3><span class="header-section-number">6.5.2</span> Web page setup</h3>
<p>We start with the following minimal HTML document, which we are familiar with from Chapter <a href="html.html#html">1</a>: </p>
<div class="sourceCode" id="cb206"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb206-1"><a href="leaflet.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></span>
<span id="cb206-2"><a href="leaflet.html#cb206-2" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;html&gt;</span></span>
<span id="cb206-3"><a href="leaflet.html#cb206-3" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;head&gt;</span></span>
<span id="cb206-4"><a href="leaflet.html#cb206-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;title&gt;</span>Basic map<span class="kw">&lt;/title&gt;</span></span>
<span id="cb206-5"><a href="leaflet.html#cb206-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">&lt;!-- More content will go here --&gt;</span></span>
<span id="cb206-6"><a href="leaflet.html#cb206-6" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/head&gt;</span></span>
<span id="cb206-7"><a href="leaflet.html#cb206-7" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;body&gt;</span></span>
<span id="cb206-8"><a href="leaflet.html#cb206-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">&lt;!-- More content will go here --&gt;</span></span>
<span id="cb206-9"><a href="leaflet.html#cb206-9" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/body&gt;</span></span>
<span id="cb206-10"><a href="leaflet.html#cb206-10" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<blockquote>
<ul>
<li>Create an empty text file named <code>index.html</code> and copy the above code into that file.</li>
<li>Follow the steps described in the Sections <a href="leaflet.html#creating-a-basic-web-map">6.5</a>–<a href="leaflet.html#adding-a-description">6.8</a>, to build your own web map from the ground up.</li>
</ul>
</blockquote>
<p>At this stage, the web page is empty. From here, we will do the following four things to add a map to our page:</p>
<ul>
<li>Include the Leaflet CSS file using a <code>&lt;link&gt;</code> element and the Leaflet JavaScript file using a <code>&lt;script&gt;</code> element (Section <a href="leaflet.html#javascript-libraries">6.5.3</a>–<a href="leaflet.html#including-leaflet-css-js">6.5.7</a>)</li>
<li>Add a <code>&lt;div&gt;</code> element that will hold the interactive Leaflet map (Section <a href="leaflet.html#adding-map-div">6.5.8</a>)</li>
<li>Add another, custom <code>&lt;script&gt;</code>, to create a map object and initiate the map inside the <code>&lt;div&gt;</code> element (Section <a href="leaflet.html#creating-map-object">6.5.9</a>)</li>
<li>Add the tile OpenStreetMap basemap to our map using <code>L.tileLayer</code> (Sections <a href="leaflet.html#what-are-tile-layers">6.5.10</a>–<a href="leaflet.html#tile-layer-providers">6.5.12</a>)</li>
</ul>
</div>
<div id="javascript-libraries" class="section level3" number="6.5.3">
<h3><span class="header-section-number">6.5.3</span> JavaScript libraries</h3>
<p>A JavaScript <a href="https://en.wikipedia.org/wiki/JavaScript_library"><strong>library</strong></a> is a collection of JavaScript code, which allows for easier development of JavaScript-based applications. There are a lot of JavaScript libraries that simplify common tasks (e.g., DOM manipulation) or specialized tasks (e.g., web mapping), to make life easier for web developers. Often, you will be working with a library that is already written, instead of “reinventing the wheel” and writing your own JavaScript code for every single task.</p>
</div>
<div id="including-a-library" class="section level3" number="6.5.4">
<h3><span class="header-section-number">6.5.4</span> Including a library</h3>
<p>Before using any object, function, or method from Leaflet, the library needs to be <strong>included</strong> in our web page. Practically, this means that the Leaflet script is being run on page load, defining Leaflet objects, functions, and methods, which you can then use in the subsequent scripts that are executed on that page.</p>
<p>To include the Leaflet library—or any other script for that matter—we need to place a <code>&lt;script&gt;</code> element referring to that script in our HTML document. Scripts for loading libraries are commonly placed inside the <code>&lt;head&gt;</code> of our document. Placing a <code>&lt;script&gt;</code> in the <code>&lt;head&gt;</code> means that the script is loaded before anything visible (i.e., the <code>&lt;body&gt;</code>) is loaded. This can be safer and easier for maintenance, yet with some performance implications. Namely, page load is being halted until the <code>&lt;scripts&gt;</code> elements have been processed. Since the Leaflet script—like most JavaScript library scripts—is small (~150 kB), there is no noticeable delay for downloading and processing it, so we can safely place it in the <code>&lt;head&gt;</code>.</p>
<p>As mentioned in Section <a href="html.html#styling-and-scripts">1.6.4</a>, when using the <code>&lt;script&gt;</code> element to load an external script file, we use the <code>src</code> attribute to specify file location. The location specified by <code>src</code> can be either a path to a local file (Section <a href="leaflet.html#loading-a-local-script">6.5.5</a>), or a URL of a remote file hosted elsewhere on the web (Section <a href="leaflet.html#loading-a-remote-script">6.5.6</a>).</p>
</div>
<div id="loading-a-local-script" class="section level3" number="6.5.5">
<h3><span class="header-section-number">6.5.5</span> Loading a local script</h3>
<p>When loading a script from a <strong>local file</strong>, we need to have an actual copy of the file on our server (Section <a href="web-servers-1.html#css-and-javasccript">5.5.4</a>). Basically, we need to download the Leaflet code file, e.g., from the <a href="https://leafletjs.com/download.html">download section</a> on the official Leaflet website, and save it along with our HTML file. In case the Leaflet script we downloaded is named <code>leaflet.js</code>, and assuming the script is placed in the same folder where the HTML document is, the first few lines of the document may look as follows:</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb207-1"><a href="leaflet.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></span>
<span id="cb207-2"><a href="leaflet.html#cb207-2" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;html&gt;</span></span>
<span id="cb207-3"><a href="leaflet.html#cb207-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;head&gt;</span></span>
<span id="cb207-4"><a href="leaflet.html#cb207-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;leaflet.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb207-5"><a href="leaflet.html#cb207-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/head&gt;</span></span>
<span id="cb207-6"><a href="leaflet.html#cb207-6" aria-hidden="true" tabindex="-1"></a>...</span></code></pre></div>
</div>
<div id="loading-a-remote-script" class="section level3" number="6.5.6">
<h3><span class="header-section-number">6.5.6</span> Loading a remote script</h3>
<p>When loading a script from a <strong>remote file</strong>, hosted on the web in some location other than our own computer, we need to provide the file URL. A reliable option is to use a <a href="https://en.wikipedia.org/wiki/Content_delivery_network"><strong>Content Delivery Network (CDN)</strong></a>, such as <a href="https://unpkg.com/">UNPKG</a>. A CDN is a series of servers designed to serve static files very quickly. In case we are loading the Leaflet library from UNPKG, the first few lines of the document may look as follows:</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb208-1"><a href="leaflet.html#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></span>
<span id="cb208-2"><a href="leaflet.html#cb208-2" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;html&gt;</span></span>
<span id="cb208-3"><a href="leaflet.html#cb208-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;head&gt;</span></span>
<span id="cb208-4"><a href="leaflet.html#cb208-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;https://unpkg.com/[...]/leaflet.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb208-5"><a href="leaflet.html#cb208-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/head&gt;</span></span>
<span id="cb208-6"><a href="leaflet.html#cb208-6" aria-hidden="true" tabindex="-1"></a>...</span></code></pre></div>
<p>The <code>src</code> attribute value is truncated with <code>[...]</code> to save space. Here is the complete URL that needs to go into the <code>src</code> attribute value:</p>
<p><a href="../../unpkg.com/leaflet%401.7.1/dist/leaflet.js" class="uri">https://unpkg.com/leaflet@1.7.1/dist/leaflet.js</a></p>
<blockquote>
<ul>
<li>Browse to the above URL to view the Leaflet library contents. You can also download the file by clicking <strong>Save as…</strong> to view it in a text editor instead of the browser.</li>
<li>You will note that the code is formatted in a strange way, as if the entire content is in a single line, with very few space and new line characters. This makes it hard for us to read the code. Can you guess what is the reason for this type of formatting?</li>
</ul>
</blockquote>
</div>
<div id="including-leaflet-css-js" class="section level3" number="6.5.7">
<h3><span class="header-section-number">6.5.7</span> Including Leaflet CSS and JavaScript</h3>
<p>We need to include the Leaflet library on our web page before we can start using it. As mentioned above (Sections <a href="leaflet.html#loading-a-local-script">6.5.5</a>–<a href="leaflet.html#loading-a-remote-script">6.5.6</a>), there are two options for doing this. We can either download the library files from the Leaflet website and load those local files, or we can use a hosted version of the files from a CDN. In the examples, we use the <em>local copy</em> option.</p>
<p>Many JavaScript libraries, such as the Turf.js library we will learn about later on (Section <a href="client-side-geoprocessing.html#geoprocessing-with-turfjs">12.2</a>), consist of just one <code>.js</code> file. The Leaflet library is slightly more complex: it consists of two files, a JavaScript file and a CSS file, plus several image files. The image files are used by the Leaflet script, for example to display markers on the map (Section <a href="spatial-queries-1.html#adding-custom-marker">11.2.2</a>).</p>
<p>The Leaflet JavaScript and CSS files are included just like any other JavaScript and CSS files. To include the Leaflet CSS file, we add a <code>&lt;link&gt;</code> element (Section <a href="css.html#external-css">2.7.4</a>) referring to the file within the <code>&lt;head&gt;</code> section (after the <code>&lt;title&gt;</code>). We will use a local copy named <code>leaflet.css</code> placed inside a sub-directory called <code>css</code>:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb209-1"><a href="leaflet.html#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;link</span><span class="ot"> rel=</span><span class="st">&quot;stylesheet&quot;</span><span class="ot"> href=</span><span class="st">&quot;css/leaflet.css&quot;</span><span class="kw">&gt;</span></span></code></pre></div>
<p>Remember that the path to the local file needs to correspond to the website directory structure (Section <a href="web-servers-1.html#file-structure">5.5.2</a>). For example, in the above <code>&lt;link&gt;</code> element, we are using a relative path: <code>css/leaflet.css</code>. This means that the <code>leaflet.css</code> file is located in a sub-directory named <code>css</code>, inside the directory where the HTML document is. For loading the file from a CDN (Section <a href="leaflet.html#loading-a-remote-script">6.5.6</a>), we could replace the <code>css/leaflet.css</code> part with the following URL: </p>
<p><a href="../../unpkg.com/leaflet%401.7.1/dist/leaflet.css" class="uri">https://unpkg.com/leaflet@1.7.1/dist/leaflet.css</a></p>
<p>After<a href="#fn54" class="footnote-ref" id="fnref54"><sup>54</sup></a> including the Leaflet CSS file, we need to add a <code>&lt;script&gt;</code> element referring to the Leaflet JavaScript file. We are going to load a local copy named <code>leaflet.js</code> placed inside a sub-directory named <code>js</code>. This means we need to put the following <code>&lt;script&gt;</code> element inside the <code>&lt;head&gt;</code>:</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb210-1"><a href="leaflet.html#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;js/leaflet.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span></code></pre></div>
<p>The path <code>js/leaflet.js</code> refers to a file named <code>leaflet.js</code> inside a sub-directory named <code>js</code>. For loading the Leaflet JavaScript file from a CDN, replace <code>js/leaflet.js</code> with the following URL which was already shown above (Section <a href="leaflet.html#loading-a-remote-script">6.5.6</a>):</p>
<p><a href="../../unpkg.com/leaflet%401.7.1/dist/leaflet.js" class="uri">https://unpkg.com/leaflet@1.7.1/dist/leaflet.js</a></p>
<p>Either way, after adding the above <code>&lt;link&gt;</code> and <code>&lt;script&gt;</code> elements, the Leaflet CSS and JavaScript files will be loaded and processed by the browser, which means we can use its functions and methods in other scripts on that page. Note that the local files provided in the online supplement, as well as the above remote URLs, refer to a specific version of Leaflet—namely Leaflet version <code>1.7.1</code>—which is the newest version at the time of writing (Table <a href="index.html#tab:javascript-libraries">0.2</a>). In case we need to load a newer or older version, the local copies or URLs can be modified accordingly. </p>
<p>When working with a local copy of the Leaflet library, in addition to the JavaScript and CSS files we also need to create an <code>images</code> directory within the directory where our CSS file is (e.g., <code>css</code>), and place several PNG image files<a href="#fn55" class="footnote-ref" id="fnref55"><sup>55</sup></a> there, such as <code>marker-icon.png</code> and <code>marker-shadow.png</code>. These files are necessary for displaying markers and other images on top of our map (Section <a href="leaflet.html#adding-markers">6.6.2</a>). More information on how Leaflet actually uses those PNG images will be given in Section <a href="spatial-queries-1.html#adding-custom-marker">11.2.2</a>. </p>
</div>
<div id="adding-map-div" class="section level3" number="6.5.8">
<h3><span class="header-section-number">6.5.8</span> Adding map <code>&lt;div&gt;</code></h3>
<p>Our next step is to add a <code>&lt;div&gt;</code> element, inside the <code>&lt;body&gt;</code>. The <code>&lt;div&gt;</code> will be used to hold the interactive map. As we learned in Section <a href="html.html#grouping">1.6.12</a>, a <code>&lt;div&gt;</code> is a generic grouping element. It is used to collect elements into the same block group so that it can be referred to in CSS or JavaScript code. The <code>&lt;div&gt;</code> intended for our map is initially empty, but needs to have an ID. We will use JavaScript to “fill” this element with the interactive web map, later on: </p>
<div class="sourceCode" id="cb211"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb211-1"><a href="leaflet.html#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;map&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></span></code></pre></div>
<p>In case we want the web map to cover the entire screen (e.g., Figure <a href="leaflet.html#fig:example-06-02">6.5</a>), which is what we will usually do in this book, we also need the following CSS rules: </p>
<div class="sourceCode" id="cb212"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb212-1"><a href="leaflet.html#cb212-1" aria-hidden="true" tabindex="-1"></a>body {</span>
<span id="cb212-2"><a href="leaflet.html#cb212-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">padding</span>: <span class="dv">0</span><span class="op">;</span></span>
<span id="cb212-3"><a href="leaflet.html#cb212-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">margin</span>: <span class="dv">0</span><span class="op">;</span></span>
<span id="cb212-4"><a href="leaflet.html#cb212-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb212-5"><a href="leaflet.html#cb212-5" aria-hidden="true" tabindex="-1"></a>html<span class="op">,</span> body<span class="op">,</span> <span class="pp">#map</span> {</span>
<span id="cb212-6"><a href="leaflet.html#cb212-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">height</span>: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb212-7"><a href="leaflet.html#cb212-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">width</span>: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb212-8"><a href="leaflet.html#cb212-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>This CSS code can be added in the <code>&lt;style&gt;</code> element in the <code>&lt;head&gt;</code>. Recall that this method of adding CSS is known as <em>embedded</em> CSS (Section <a href="css.html#embedded-css">2.7.3</a>). </p>
</div>
<div id="creating-map-object" class="section level3" number="6.5.9">
<h3><span class="header-section-number">6.5.9</span> Creating a map object</h3>
<p>Now that the Leaflet library is loaded, and the <code>&lt;div&gt;</code> element which will be used to contain it is defined and styled, we can move on to actually adding the map, using JavaScript. The Leaflet library defines a global object named <code>L</code>, which holds all of the Leaflet library functions and methods. Using the <code>L.map</code> method, our first step is to create a map object. When creating a map object there are two important arguments supplied to <code>L.map</code>: </p>
<ul>
<li>The <strong>ID</strong> of the <code>&lt;div&gt;</code> element where the map goes in</li>
<li>Additional map <strong>options</strong>, passed as an object</li>
</ul>
<p>In our case, since the <code>&lt;div&gt;</code> intended for our map has <code>id="map"</code> (Section <a href="leaflet.html#adding-map-div">6.5.8</a>), we can initiate the map with the following expression, which goes inside a <code>&lt;script&gt;</code> element at the end of the <code>&lt;body&gt;</code>: </p>
<div class="sourceCode" id="cb213"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb213-1"><a href="leaflet.html#cb213-1" aria-hidden="true" tabindex="-1"></a>L<span class="op">.</span><span class="fu">map</span>(<span class="st">&quot;map&quot;</span>)<span class="op">;</span></span></code></pre></div>
<p>As for additional map options<a href="#fn56" class="footnote-ref" id="fnref56"><sup>56</sup></a>, there are several ones that we can set. The options are passed together, as a single object, where property name refers to the option and the property value refers to the value which we want to set. The most essential options of <code>L.map</code> are those specifying the initially viewed map extent. One way to specify the initial extent is using the <code>center</code> and <code>zoom</code> option, passing the coordinates where the map is initially panned to and its initial zoom level, respectively. For example, to focus on the Ben-Gurion University we can indicate the <code>[31.262218, 34.801472]</code> location and set the zoom level to <code>17</code>. The <code>L.map</code> expression now takes the following form: </p>
<div class="sourceCode" id="cb214"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb214-1"><a href="leaflet.html#cb214-1" aria-hidden="true" tabindex="-1"></a>L<span class="op">.</span><span class="fu">map</span>(<span class="st">&quot;map&quot;</span><span class="op">,</span> {<span class="dt">center</span><span class="op">:</span> [<span class="fl">31.262218</span><span class="op">,</span> <span class="fl">34.801472</span>]<span class="op">,</span> <span class="dt">zoom</span><span class="op">:</span> <span class="dv">17</span>})<span class="op">;</span></span></code></pre></div>
<p>Note that the <code>center</code> option is specified in <strong>geographic coordinates</strong> (longitude and latitude) using an array of the form <code>[lat, lon]</code> rather than <code>[lon, lat]</code>, that is, in the <code>[Y, X]</code> rather than the <code>[X, Y]</code> order. This may seem unintuitive to GIS users, but the <code>[lat, lon]</code> ordering is actually very common in many applications that are not specifically targeted to geographers, including Leaflet and other web-mapping libraries such as the <a href="https://developers.google.com/maps/documentation/javascript/adding-a-google-map">Google Maps API</a>. When working with Leaflet, you need to be constantly aware of the convention to use <code>[lat, lon]</code> coordinates, to avoid errors such as displaying the wrong area (also see Section <a href="geojson-1.html#general-structure">7.3.2.1</a>).</p>
<p>One more thing to keep in mind regarding coordinates is that most web mapping libraries, including Leaflet, usually work with geographic coordinates (longitude, latitude) only as far as the <em>user</em> is concerned. This means that all placement settings (such as map center), as well as layer coordinates (Section <a href="leaflet.html#adding-vector-layers">6.6</a>), are passed to Leaflet functions as geographic coordinates (latitude, longitude), i.e., the <a href="https://en.wikipedia.org/wiki/World_Geodetic_System"><strong>WGS84</strong></a> (<code>EPSG:4326</code>) <a href="https://en.wikipedia.org/wiki/Spatial_reference_system">coordinate reference system</a>. The map itself, however, is displayed using coordinates in a different system, called the <a href="https://en.wikipedia.org/wiki/Web_Mercator_projection"><strong>Web mercator</strong></a> projection (<code>EPSG:3857</code>) (Figure <a href="leaflet.html#fig:EPSG-4326-3857">6.1</a>). For example, the following <code>[lon, lat]</code> coordinates (<code>EPSG:4326</code>) for central London: </p>
<div class="sourceCode" id="cb215"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb215-1"><a href="leaflet.html#cb215-1" aria-hidden="true" tabindex="-1"></a>[<span class="op">-</span><span class="fl">0.09</span><span class="op">,</span> <span class="fl">51.51</span>]</span></code></pre></div>
<p>will be internally converted to the following <code>[X, Y]</code> coordinates in Web mercator (<code>EPSG:3857</code>) before being displayed on screen: </p>
<div class="sourceCode" id="cb216"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb216-1"><a href="leaflet.html#cb216-1" aria-hidden="true" tabindex="-1"></a>[<span class="op">-</span><span class="fl">10018.75</span><span class="op">,</span> <span class="dv">6712008</span>]</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:EPSG-4326-3857"></span>
<img src="images/EPSG_4326_3857.png" alt="World map in the WGS84 (&lt;code&gt;EPSG:4326&lt;/code&gt;) and Web mercator (&lt;code&gt;EPSG:3857&lt;/code&gt;) projections" width="70%" />
<p class="caption">
FIGURE 6.1: World map in the WGS84 (<code>EPSG:4326</code>) and Web mercator (<code>EPSG:3857</code>) projections
</p>
</div>
<p>The user never has to deal with the Web mercator system, since it is only used <em>internally</em>, before drawing the final display on screen. However, it is important to be aware that it exists. As for the <code>zoom</code>, you may wonder what does the <code>17</code> zoom level mean. This will be explained when discussing tile layers (Section <a href="leaflet.html#what-are-tile-layers">6.5.10</a>). </p>
<p>The <code>L.map</code> function returns a <strong>map object</strong>, which has useful methods and can be passed to methods of other objects (such as <code>.addTo</code>, see below). Therefore, we usually want to save that object in a variable, such as the one named <code>map</code> in the following expression, so that we can refer to it when running those methods later on in our script. Combining all of the above considerations, we should now have the following JavaScript code in the <code>&lt;script&gt;</code> element in our web page: </p>
<div class="sourceCode" id="cb217"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb217-1"><a href="leaflet.html#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> map <span class="op">=</span> L<span class="op">.</span><span class="fu">map</span>(<span class="st">&quot;map&quot;</span><span class="op">,</span> {<span class="dt">center</span><span class="op">:</span> [<span class="fl">31.262218</span><span class="op">,</span> <span class="fl">34.801472</span>]<span class="op">,</span> <span class="dt">zoom</span><span class="op">:</span> <span class="dv">17</span>})<span class="op">;</span></span></code></pre></div>
<p>If you open the map at this stage, you should see that it has no content, just grey background with the “+” and “-” (zoom-in and zoom-out) buttons, which are part of the standard map interface. Our next step is to add a background layer (Section <a href="leaflet.html#what-is-web-map">6.2</a>) on the map. </p>
</div>
<div id="what-are-tile-layers" class="section level3" number="6.5.10">
<h3><span class="header-section-number">6.5.10</span> What are tile layers?</h3>
<div id="overview-tile-layers" class="section level4" number="6.5.10.1">
<h4><span class="header-section-number">6.5.10.1</span> Overview</h4>
<p>Tile layers are a fundamental technology behind web maps. They comprise the <em>background</em> layer in most web maps, thus helping the viewer to locate the <em>foreground</em> layers in geographical space. The word <em>tile</em> in tile layers comes from the fact that the layer is split into individual rectangular tiles. Tile layers come in two forms, which we are going to cover next: raster tiles (Section <a href="leaflet.html#raster-tiles">6.5.10.2</a>) and vector tiles (Section <a href="leaflet.html#vector-tiles">6.5.10.3</a>).</p>
</div>
<div id="raster-tiles" class="section level4" number="6.5.10.2">
<h4><span class="header-section-number">6.5.10.2</span> Raster tiles</h4>
<p>The oldest and simplest tile layer type is where tiles are raster images, also known as <a href="https://en.wikipedia.org/wiki/Tiled_web_map"><strong>raster tiles</strong></a>. With raster tiles, tile layers are usually composed of PNG images. Traditionally, each PNG image is <span class="math inline">\(256\times 256\)</span> pixels in size. A separate collection of tiles is required for each zoom level the map can be viewed on, with increasing numbers of tiles needed to cover a (global) extent in higher zoom levels. Conventionally, at each sequential zoom level, all of the tiles are divided into four “new” ones (Figure <a href="leaflet.html#fig:tile-zoom-levels">6.2</a>). For example, for covering the world at zoom level <code>0</code>, we need just one tile. When we go to zoom level <code>1</code>, that individual tile is split to <span class="math inline">\(2\times 2=4\)</span> separate tiles. When we go further to zoom level <code>2</code>, each of the four tiles is also split to four, so that we already have <span class="math inline">\(4\times 4=16\)</span> separate tiles, and so on. In general, a global tile layer at zoom level <span class="math inline">\(z\)</span> contains <span class="math inline">\(2^z\times 2^z=4^z\)</span> tiles. At the default maximal zoom level in a Leaflet map (<code>18</code>), we need 68,719,476,736 tiles to cover the earth<a href="#fn57" class="footnote-ref" id="fnref57"><sup>57</sup></a>!</p>
<div class="figure" style="text-align: center"><span id="fig:tile-zoom-levels"></span>
<img src="images/tile_zoom_levels.png" alt="OpenStreetMap tiles for global coverage at zoom levels 0, 1, and 2. The &lt;code&gt;Z/X/Y&lt;/code&gt; values (zoom/column/row) of each tile are shown in the top left corner.\index{OpenStreetMap}" width="100%" />
<p class="caption">
FIGURE 6.2: OpenStreetMap tiles for global coverage at zoom levels 0, 1, and 2. The <code>Z/X/Y</code> values (zoom/column/row) of each tile are shown in the top left corner.
</p>
</div>
<p>The main rationale for tiled maps is that only the relevant content is loaded in each particular viewed extent. Namely, only those specific tiles that cover the particular extent we are looking at, in a particular zoom level, are transferred from the server. For example, just one or two dozen individual tiles (Figure <a href="leaflet.html#fig:individual-tile">6.3</a>) are typically needed to cover any given map extent, such as the one shown in Figure <a href="leaflet.html#fig:example-06-02">6.5</a>. This results in minimal size of transferred data, which makes tiled maps appear smooth and responsive. </p>
<p>The PNG images of all required tiles are sent from a <strong>tile server</strong>, which is simply a static server (Section <a href="web-servers-1.html#static-servers">5.4.2</a>) where all tile images are stored in a particular directory structure<a href="#fn58" class="footnote-ref" id="fnref58"><sup>58</sup></a>. To load a particular tile, we enter a URL such as <code>http://.../Z/X/Y.png</code>, where <code>http://.../</code> is a constant prefix, <code>Z</code> is the zoom level, <code>X</code> is the column (i.e., the x-axis) and <code>Y</code> is the row (i.e., the y-axis) (Figure <a href="leaflet.html#fig:tile-zoom-levels">6.2</a>). For example, the following URL refers to an individual tile at zoom level 17, column 78206 and row 53542, focused on building #72 at the Ben-Gurion University, from the <a href="https://wiki.openstreetmap.org/wiki/Tile_servers">standard OpenStreetMap tile server</a> (Figure <a href="leaflet.html#fig:individual-tile">6.3</a>). </p>
<p><a href="../../a.tile.openstreetmap.org/17/78206/53542.png" class="uri">https://a.tile.openstreetmap.org/17/78206/53542.png</a></p>
<p>Note how the URL for this tile is structured. The constant prefix of the URL is <code>https://a.tile.openstreetmap.org/</code>, referring to the OpenStreetMap tile server. The variable parts are specific values for <code>Z</code> (e.g., <code>17</code>), <code>X</code> (e.g., <code>78206</code>), and <code>Y</code> (e.g., <code>53542</code>). You may recognize where this tile fits in the map view in Figure <a href="leaflet.html#fig:example-06-02">6.5</a>. </p>
<div class="figure" style="text-align: center"><span id="fig:individual-tile"></span>
<img src="images/individual_tile.png" alt="Individual OpenStreetMap raster tile, from zoom level 17, column 78206 and row 53542 (downloaded on 2019-03-29)\index{OpenStreetMap}" width="40%" />
<p class="caption">
FIGURE 6.3: Individual OpenStreetMap raster tile, from zoom level 17, column 78206 and row 53542 (downloaded on 2019-03-29)
</p>
</div>
<blockquote>
<ul>
<li>Open the above URL in the browser to view the PNG image of the specific tile.</li>
<li>Modify the <code>Z</code>, <code>X</code>, and <code>Y</code> parts of the URL to view other tiles.</li>
</ul>
</blockquote>
</div>
<div id="vector-tiles" class="section level4" number="6.5.10.3">
<h4><span class="header-section-number">6.5.10.3</span> Vector tiles</h4>
<p>A more recent tile layer technology is where tiles are <em>vector</em> layers, rather than PNG images, referred to as <a href="https://en.wikipedia.org/wiki/Vector_tiles"><strong>vector tiles</strong></a>. Vector tiles are distinguished by the ability to rotate the map while the labels keep their horizontal orientation, and by the ability to zoom in or out smoothly—without the strict division to discrete zoom levels that raster tile layers have (Figure <a href="leaflet.html#fig:tile-zoom-levels">6.2</a>). Major advantages of vector tiles are their smaller size and flexible styling. For example, <a href="https://maps.google.com/">Google Maps</a> made the transition from raster to vector tiles <a href="https://en.wikipedia.org/wiki/Vector_tiles#Services_and_applications">in 2013</a>.</p>
<p>The Leaflet library does not natively support vector tiles, though there is a plugin called <a href="https://github.com/Leaflet/Leaflet.VectorGrid"><strong>Leaflet.VectorGrid</strong></a> for that. Therefore, in this book we will restrict ourselves to using raster tiles as background layers. There are other libraries specifically built around vector tile layers, such as the <strong>Google Maps API</strong> and <strong>Mapbox GL JS</strong>, which we mentioned previously (Section <a href="leaflet.html#alternatives-to-leaflet">6.4</a>). The <code>example-06-01.html</code> shows a web map with a vector tile layer built with Mapbox GL JS (Figure <a href="leaflet.html#fig:example-06-01">6.4</a>). This is the only non-Leaflet web-map example that we are going to see in the book; it is provided for demonstration and comparison of raster and vector tiles. </p>
<div class="figure" style="text-align: center"><span id="fig:example-06-01"></span>
<iframe src="examples/example-06-01.html" width="100%" height="400px">
</iframe>
<p class="caption">
FIGURE 6.4: <code>example-06-01.html</code> <a href="examples/example-06-01.html" title="View the Example" target="_blank">(Click to view this example on its own)</a>
</p>
</div>
<blockquote>
<ul>
<li>Open <code>example-06-01.html</code> in the browser.</li>
<li>Try changing map perspective by dragging the mouse while pressing the <strong>Ctrl</strong> key.</li>
<li>Compare this type of interaction with that of <code>example-06-02.html</code>.</li>
<li>What is the reason for the differences?</li>
</ul>
</blockquote>
</div>
</div>
<div id="adding-a-tile-layer" class="section level3" number="6.5.11">
<h3><span class="header-section-number">6.5.11</span> Adding a tile layer</h3>
<p>We now go back to discussing Leaflet and raster tile layers. Where can we get a tile layer from? There are many tile layers prepared and provided by several organizations, available on dedicated servers (Section <a href="leaflet.html#tile-layer-providers">6.5.12</a>) that you can add to your maps. Most of them are based on OpenStreetMap data (Section <a href="collaborative-mapping.html#crowdsourcing">13.2</a>), because it is the most extensive free database of map data with global coverage. The tile layer we use in the following examples, and the one that the tile shown in Figure <a href="leaflet.html#fig:individual-tile">6.3</a> comes from, is developed and maintained by OpenStreetMap itself. It is the default tile layer displayed on the <a href="https://www.openstreetmap.org/" class="uri">https://www.openstreetmap.org/</a> website.</p>
<p>To add a tile layer to a Leaflet web map, we use the <code>L.tileLayer</code> function. This function accepts:</p>
<ul>
<li>The <strong>URL</strong> of the tile server</li>
<li>An object with additional <strong>options</strong></li>
</ul>
<p>Any raster tile server URL includes the <code>{z}</code>, <code>{x}</code>, and <code>{y}</code> placeholders, which are internally replaced by zoom level, column, and row each time the Leaflet library loads a given tile, as discussed previously (Section <a href="leaflet.html#raster-tiles">6.5.10.2</a>). The additional <code>{s}</code> placeholder refers to one of the available sub-domains (such as <code>a</code>, <code>b</code>, <code>c</code>), for making parallel requests to different servers hosting the same tile layer. Here is the URL for loading the default OpenStreetMap tile layer:</p>
<p><code>https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png</code></p>
<p>The options object is used to specify other parameters related to the tile layer, such as the required <code>attribution</code> (shown in the bottom-right corner on the map), or the <code>minZoom</code> and <code>maxZoom</code> levels<a href="#fn59" class="footnote-ref" id="fnref59"><sup>59</sup></a>. </p>
<p>For example, the following <code>L.tileLayer</code> call defines a tile layer using the default OpenStreetMap server and sets the appropriate attribution. The <code>.addTo</code> method is then applied to <em>add</em> the tile layer to the <code>map</code> object, referring to our web map defined earlier (Section <a href="leaflet.html#creating-map-object">6.5.9</a>). The <code>.addTo</code> method is applicable for adding any type of layer on our map, not just a tile layer, as we will see later on (Sections <a href="leaflet.html#adding-vector-layers">6.6</a>–<a href="leaflet.html#adding-a-description">6.8</a>). In the attribution option, note that <code>&amp;copy;</code> is a special HTML character entity to display the copyright symbol (©):</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb218-1"><a href="leaflet.html#cb218-1" aria-hidden="true" tabindex="-1"></a>L<span class="op">.</span><span class="fu">tileLayer</span>(</span>
<span id="cb218-2"><a href="leaflet.html#cb218-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&quot;</span><span class="op">,</span> </span>
<span id="cb218-3"><a href="leaflet.html#cb218-3" aria-hidden="true" tabindex="-1"></a>    {<span class="dt">attribution</span><span class="op">:</span> <span class="st">&quot;&amp;copy; OpenStreetMap&quot;</span>}</span>
<span id="cb218-4"><a href="leaflet.html#cb218-4" aria-hidden="true" tabindex="-1"></a>)<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span></code></pre></div>
<p>The attribution we used:</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb219-1"><a href="leaflet.html#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;&amp;copy; OpenStreetMap&quot;</span></span></code></pre></div>
<p>can also be replaced with the following alternative version, where the word “OpenStreetMap” becomes a link (Section <a href="html.html#html-a">1.6.9.1</a>) to the OpenStreetMap <a href="https://www.openstreetmap.org/copyright">Copyright and License</a> web page (see bottom-right corner in Figure <a href="leaflet.html#fig:example-06-02">6.5</a>): </p>
<div class="sourceCode" id="cb220"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb220-1"><a href="leaflet.html#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;&amp;copy; &lt;a href=&quot;https://www.openstreetmap.org/copyright&quot;&gt;OpenStreetMap&lt;/a&gt;&#39;</span></span></code></pre></div>
<p>Now that the tile layer is in place, one last thing we are going to add to our first Leaflet map is the following <code>&lt;meta&gt;</code> element (Section <a href="html.html#html-meta">1.6.3.2</a>) in the document <code>&lt;head&gt;</code>: </p>
<div class="sourceCode" id="cb221"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb221-1"><a href="leaflet.html#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;meta</span><span class="ot"> name=</span><span class="st">&quot;viewport&quot;</span><span class="ot"> content=</span><span class="st">&quot;width=device-width, </span></span>
<span id="cb221-2"><a href="leaflet.html#cb221-2" aria-hidden="true" tabindex="-1"></a><span class="st">    initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot;</span><span class="kw">&gt;</span></span></code></pre></div>
<p>This <code>&lt;meta&gt;</code> element disables unwanted scaling of the page when on mobile devices<a href="#fn60" class="footnote-ref" id="fnref60"><sup>60</sup></a>. Without it, map symbols and controls will appear too small when viewed using a browser on a mobile device. Finally, our complete code for a basic Leaflet web map (<code>example-06-02.html</code>) is: </p>
<div class="sourceCode" id="cb222"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb222-1"><a href="leaflet.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></span>
<span id="cb222-2"><a href="leaflet.html#cb222-2" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;html&gt;</span></span>
<span id="cb222-3"><a href="leaflet.html#cb222-3" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;head&gt;</span></span>
<span id="cb222-4"><a href="leaflet.html#cb222-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;title&gt;</span>Basic map<span class="kw">&lt;/title&gt;</span></span>
<span id="cb222-5"><a href="leaflet.html#cb222-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;meta</span><span class="ot"> name=</span><span class="st">&quot;viewport&quot;</span><span class="ot"> content=</span><span class="st">&quot;width=device-width, </span></span>
<span id="cb222-6"><a href="leaflet.html#cb222-6" aria-hidden="true" tabindex="-1"></a><span class="st">        initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot;</span><span class="kw">&gt;</span></span>
<span id="cb222-7"><a href="leaflet.html#cb222-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;link</span><span class="ot"> rel=</span><span class="st">&quot;stylesheet&quot;</span><span class="ot"> href=</span><span class="st">&quot;css/leaflet.css&quot;</span><span class="kw">&gt;</span></span>
<span id="cb222-8"><a href="leaflet.html#cb222-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;js/leaflet.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb222-9"><a href="leaflet.html#cb222-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;style&gt;</span></span>
<span id="cb222-10"><a href="leaflet.html#cb222-10" aria-hidden="true" tabindex="-1"></a>        body {</span>
<span id="cb222-11"><a href="leaflet.html#cb222-11" aria-hidden="true" tabindex="-1"></a>            <span class="kw">padding</span>: <span class="dv">0</span><span class="op">;</span></span>
<span id="cb222-12"><a href="leaflet.html#cb222-12" aria-hidden="true" tabindex="-1"></a>            <span class="kw">margin</span>: <span class="dv">0</span><span class="op">;</span></span>
<span id="cb222-13"><a href="leaflet.html#cb222-13" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb222-14"><a href="leaflet.html#cb222-14" aria-hidden="true" tabindex="-1"></a>        html<span class="op">,</span> body<span class="op">,</span> <span class="pp">#map</span> {</span>
<span id="cb222-15"><a href="leaflet.html#cb222-15" aria-hidden="true" tabindex="-1"></a>            <span class="kw">height</span>: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb222-16"><a href="leaflet.html#cb222-16" aria-hidden="true" tabindex="-1"></a>            <span class="kw">width</span>: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb222-17"><a href="leaflet.html#cb222-17" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb222-18"><a href="leaflet.html#cb222-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/style&gt;</span></span>
<span id="cb222-19"><a href="leaflet.html#cb222-19" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/head&gt;</span></span>
<span id="cb222-20"><a href="leaflet.html#cb222-20" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;body&gt;</span></span>
<span id="cb222-21"><a href="leaflet.html#cb222-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;map&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></span>
<span id="cb222-22"><a href="leaflet.html#cb222-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;script&gt;</span></span>
<span id="cb222-23"><a href="leaflet.html#cb222-23" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> map <span class="op">=</span> L<span class="op">.</span><span class="fu">map</span>(<span class="st">&quot;map&quot;</span><span class="op">,</span> {<span class="dt">center</span><span class="op">:</span> [<span class="fl">31.262218</span><span class="op">,</span> <span class="fl">34.801472</span>]<span class="op">,</span> <span class="dt">zoom</span><span class="op">:</span> <span class="dv">17</span>})<span class="op">;</span></span>
<span id="cb222-24"><a href="leaflet.html#cb222-24" aria-hidden="true" tabindex="-1"></a>        L<span class="op">.</span><span class="fu">tileLayer</span>(</span>
<span id="cb222-25"><a href="leaflet.html#cb222-25" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&quot;</span><span class="op">,</span> </span>
<span id="cb222-26"><a href="leaflet.html#cb222-26" aria-hidden="true" tabindex="-1"></a>            {<span class="dt">attribution</span><span class="op">:</span> <span class="st">&#39;&amp;copy; &lt;a href=&quot;http://&#39;</span> <span class="op">+</span> </span>
<span id="cb222-27"><a href="leaflet.html#cb222-27" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;www.openstreetmap.org/copyright&quot;&gt;OpenStreetMap&lt;/a&gt;&#39;</span>}</span>
<span id="cb222-28"><a href="leaflet.html#cb222-28" aria-hidden="true" tabindex="-1"></a>        )<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb222-29"><a href="leaflet.html#cb222-29" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/script&gt;</span></span>
<span id="cb222-30"><a href="leaflet.html#cb222-30" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/body&gt;</span></span>
<span id="cb222-31"><a href="leaflet.html#cb222-31" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>The resulting map is shown in Figure <a href="leaflet.html#fig:example-06-02">6.5</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:example-06-02"></span>
<iframe src="examples/example-06-02.html" width="100%" height="400px">
</iframe>
<p class="caption">
FIGURE 6.5: <code>example-06-02.html</code> <a href="examples/example-06-02.html" title="View the Example" target="_blank">(Click to view this example on its own)</a>
</p>
</div>
<blockquote>
<ul>
<li>Using the developer tools, we can actually observe the different PNG images of each tile being loaded while navigating on the map.</li>
<li>Open <code>example-06-02.html</code> in the browser.</li>
<li>Open the developer tools (in Chrome: by pressing <strong>F12</strong>).</li>
<li>Go to the <strong>Network</strong> tab of the developer tools.</li>
<li>Pan and/or zoom-in and/or zoom-out to change to a different viewed extent.</li>
<li>In the Network tab, you should see a list of the new PNG images being transferred from the server, as new tiles are being shown on the map (Figure <a href="leaflet.html#fig:tiles-network-traffic">6.6</a>).</li>
<li>Double-click on any of the PNG image file names to show the image itself.</li>
</ul>
</blockquote>
<div class="figure" style="text-align: center"><span id="fig:tiles-network-traffic"></span>
<img src="images/tiles_network_traffic.png" alt="Observing network traffic as new tiles are being loaded into a Leaflet map\index{Leaflet (JavaScript Library)}" width="100%" />
<p class="caption">
FIGURE 6.6: Observing network traffic as new tiles are being loaded into a Leaflet map
</p>
</div>
</div>
<div id="tile-layer-providers" class="section level3" number="6.5.12">
<h3><span class="header-section-number">6.5.12</span> Tile layer providers</h3>
<p>As mentioned previously (Section <a href="leaflet.html#adding-a-tile-layer">6.5.11</a>), the default OpenStreetMap tile layer we just added on our map (Figure <a href="leaflet.html#fig:example-06-02">6.5</a>) is one of many available tile layers provided by different organizations. An interactive demonstration of various popular tile layer providers can be found in the <a href="https://leaflet-extras.github.io/leaflet-providers/preview/"><em>Leaflet Provider Demo</em></a> web page. Once on the leaflet-providers web page, you can select a tile layer from the list in the right panel, then explore its preview in the central panel (Figure <a href="leaflet.html#fig:leaflet-providers">6.7</a>). Conveniently, the text box on the top of the page gives the exact <code>L.tileLayer</code> JavaScript expression that you can use in a <code>&lt;script&gt;</code> for loading the tile layer in a Leaflet map. </p>
<div class="figure" style="text-align: center"><span id="fig:leaflet-providers"></span>
<img src="images/leaflet_providers.png" alt="Interactive preview of &lt;a href=_https_/leaflet-extras.github.io/leaflet-providers/preview/_.html target=&quot;_blank&quot;&gt;tile layer providers&lt;/a&gt;" width="100%" />
<p class="caption">
FIGURE 6.7: Interactive preview of <a href="https://leaflet-extras.github.io/leaflet-providers/preview/" target="_blank">tile layer providers</a>
</p>
</div>
<blockquote>
<ul>
<li>Browse to the leaflet-providers page on <a href="https://leaflet-extras.github.io/leaflet-providers/preview/" class="uri">https://leaflet-extras.github.io/leaflet-providers/preview/</a> (Figure <a href="leaflet.html#fig:leaflet-providers">6.7</a>) and choose a tile layer you like.</li>
<li>Replace the <code>L.tileLayer(...)</code> expression in the source code of <code>example-06-02.html</code> (after making a local copy) with the appropriate expression for your chosen tile layer.</li>
<li>Save the file and refresh the page in the browser.</li>
<li>You should now see the new tile layer you chose on the map!</li>
</ul>
</blockquote>
</div>
</div>
<div id="adding-vector-layers" class="section level2" number="6.6">
<h2><span class="header-section-number">6.6</span> Adding vector layers</h2>
<div id="overview-adding-vector-layers" class="section level3" number="6.6.1">
<h3><span class="header-section-number">6.6.1</span> Overview</h3>
<p>So far we learned how to create a Leaflet map (Sections <a href="leaflet.html#overview-creating-a-basic-web-map">6.5.1</a>–<a href="leaflet.html#creating-map-object">6.5.9</a>) and add a tile layer on top of it (Sections <a href="leaflet.html#what-are-tile-layers">6.5.10</a>–<a href="leaflet.html#tile-layer-providers">6.5.12</a>). Tile layers are generic and thus typically serve as background, to help the user in positioning the foreground layers in geographical space. The foreground, on the other hand, is usually made of <strong>vector layers</strong>, such as points, lines, and polygons, though it is possible to add manually created <a href="https://leafletjs.com/reference-1.7.1.html#imageoverlay">image layers</a> too. There are several methods for adding vector layers on a Leaflet map.</p>
<p>In this section, we are going to add vector layers using those methods where the layer coordinates (i.e., its geometry) are manually specified by passing numeric arrays to the respective function. That way, we are going to add markers (Section <a href="leaflet.html#adding-markers">6.6.2</a>), lines (Section <a href="leaflet.html#adding-lines">6.6.3</a>), and polygons (Section <a href="leaflet.html#adding-polygons">6.6.4</a>) as foreground on top of the tile layer on our map. The latter coordinate-array methods are mostly useful for drawing simple, manually defined shapes. In Chapter <a href="geojson-1.html#geojson-1">7</a>, we will learn how to add vector layers based on GeoJSON strings rather than coordinate arrays, which is more useful to add pre-existing, complex layers.</p>
</div>
<div id="adding-markers" class="section level3" number="6.6.2">
<h3><span class="header-section-number">6.6.2</span> Adding markers</h3>
<p>There are three ways of <em>marking</em> a specific point on our Leaflet map:</p>
<ul>
<li><strong>Marker</strong>—A PNG image, such as Leaflet’s default blue marker (Figure <a href="leaflet.html#fig:example-06-03">6.8</a>)</li>
<li><strong>Circle Marker</strong>—A circle with a fixed radius in <em>pixels</em> (Figures <a href="symbology-and-interactivity.html#fig:solution-08">8.11</a>, <a href="client-side-geoprocessing.html#fig:example-12-05">12.6</a>)</li>
<li><strong>Circle</strong>—A circle with a fixed radius in <em>meters</em></li>
</ul>
<p>To add a marker on our map, we use the <code>L.marker</code> function. The <code>L.marker</code> function creates a marker object, which we can add to our map with its <code>.addTo</code> method, just like we added the tile layer (Section <a href="leaflet.html#adding-a-tile-layer">6.5.11</a>). When creating the marker object with <code>L.marker</code> we specify the longitude and latitude where it should be placed, using an array of length 2 in the <code>[lat, lon]</code> format<a href="#fn61" class="footnote-ref" id="fnref61"><sup>61</sup></a> (Section <a href="leaflet.html#creating-map-object">6.5.9</a>). For example, the following expression—when appended at the end of the <code>&lt;script&gt;</code> in <code>example-06-02.html</code>—adds a marker in the yard near building #72 at Ben-Gurion University: </p>
<div class="sourceCode" id="cb223"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb223-1"><a href="leaflet.html#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> pnt <span class="op">=</span> L<span class="op">.</span><span class="fu">marker</span>([<span class="fl">31.262218</span><span class="op">,</span> <span class="fl">34.801472</span>])<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span></code></pre></div>
<p>You may wonder why we are assigning the marker layer to a variable, named <code>pnt</code> in this case, rather than just adding it to the map the way we did with the tile layer: </p>
<div class="sourceCode" id="cb224"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb224-1"><a href="leaflet.html#cb224-1" aria-hidden="true" tabindex="-1"></a>L<span class="op">.</span><span class="fu">marker</span>([<span class="fl">31.262218</span><span class="op">,</span> <span class="fl">34.801472</span>])<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span></code></pre></div>
<p>The answer is that the marker layer object contains useful methods, in addition to <code>.addTo</code>. We can apply those methods, later on, to make changes in the marker layer, such as adding popups on top of it (see Section <a href="leaflet.html#adding-popups">6.7</a> below). The resulting map <code>example-06-03.html</code>—with the additional marker as a result of including the above expression—is shown in Figure <a href="leaflet.html#fig:example-06-03">6.8</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:example-06-03"></span>
<iframe src="examples/example-06-03.html" width="100%" height="400px">
</iframe>
<p class="caption">
FIGURE 6.8: <code>example-06-03.html</code> <a href="examples/example-06-03.html" title="View the Example" target="_blank">(Click to view this example on its own)</a>
</p>
</div>
<p>The marker is actually a PNG image, and you can replace the default blue marker with any other image, which we learn how to do in Section <a href="spatial-queries-1.html#adding-custom-marker">11.2.2</a>. However, we cannot otherwise easily control the size and color of the marker, since this would require preparing a different PNG image each time. Therefore, it is sometimes more appropriate to use <em>circle markers</em> or <em>circles</em> instead of markers. </p>
<p>With both circle markers and circles, instead of adding a PNG image, vector circles are being drawn around the specified location. You can set the size (radius) and appearance of those circles, by passing an additional object with <a href="https://leafletjs.com/reference-1.7.1.html#circlemarker">options</a>, such as <code>radius</code>, <code>color</code>, and <code>fillColor</code>. The difference between circle markers and circles is in the way that the <code>radius</code> is set: in pixels (circle marker) or in meters (circle). For example, the following expression adds a circle marker 0.001 degrees to the west from where we placed the ordinary marker: </p>
<div class="sourceCode" id="cb225"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb225-1"><a href="leaflet.html#cb225-1" aria-hidden="true" tabindex="-1"></a>L<span class="op">.</span><span class="fu">circleMarker</span>(</span>
<span id="cb225-2"><a href="leaflet.html#cb225-2" aria-hidden="true" tabindex="-1"></a>  [<span class="fl">31.262218</span><span class="op">,</span> <span class="fl">34.801472</span> <span class="op">-</span> <span class="fl">0.001</span>]<span class="op">,</span> </span>
<span id="cb225-3"><a href="leaflet.html#cb225-3" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">radius</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">&quot;black&quot;</span><span class="op">,</span> <span class="dt">fillColor</span><span class="op">:</span> <span class="st">&quot;red&quot;</span>}</span>
<span id="cb225-4"><a href="leaflet.html#cb225-4" aria-hidden="true" tabindex="-1"></a>)<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span></code></pre></div>
<blockquote>
<ul>
<li>Run the above expression in the console inside <code>example-06-03.html</code>. A circle marker with the specified color scheme should appear on screen.</li>
<li>Zoom in and out; the circle size should remain constant on screen, at 50 pixels.</li>
</ul>
</blockquote>
<p>Remember that in circle markers, created with <code>L.circleMarker</code>, the <code>radius</code> property is given in pixels (e.g., <code>50</code>), which means the circle marker maintains constant size on screen, irrespective of zoom level. In circles, created using <code>L.circle</code>, the radius is set in meters, which means the circle size maintains constant spatial extent, expanding or shrinking as we zoom in or out. </p>
</div>
<div id="adding-lines" class="section level3" number="6.6.3">
<h3><span class="header-section-number">6.6.3</span> Adding lines</h3>
<p>To add a <em>line</em> on our map, we use the <code>L.polyline</code> function. Since a line is composed of several points, we specify the series of point coordinates the line goes through as an array of coordinate arrays. The internal arrays, i.e., the point coordinates, are specified just like marker coordinates, in the <code>[lat, lon]</code> format. In the following example, we are constructing a line that has just two points, but there could be many more points when making a more complex line. The line is drawn in the order given by the array, from the first point to the last one. </p>
<p>We can specify the appearance of the line, much like with the circle marker (Section <a href="leaflet.html#adding-markers">6.6.2</a>), by setting various options such as line <code>color</code> and <code>weight</code> (i.e., width, in pixels). In case we are not passing any options, a default light blue 3px line will be drawn. In the following example, we override the default <code>color</code> and <code>weight</code> options, setting them to <code>"red"</code> and <code>10</code>, respectively: </p>
<div class="sourceCode" id="cb226"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb226-1"><a href="leaflet.html#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> line <span class="op">=</span> L<span class="op">.</span><span class="fu">polyline</span>(</span>
<span id="cb226-2"><a href="leaflet.html#cb226-2" aria-hidden="true" tabindex="-1"></a>  [[<span class="fl">31.262705</span><span class="op">,</span> <span class="fl">34.800514</span>]<span class="op">,</span> [<span class="fl">31.262053</span><span class="op">,</span> <span class="fl">34.800782</span>]]<span class="op">,</span> </span>
<span id="cb226-3"><a href="leaflet.html#cb226-3" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">color</span><span class="op">:</span> <span class="st">&quot;red&quot;</span><span class="op">,</span> <span class="dt">weight</span><span class="op">:</span> <span class="dv">10</span>}</span>
<span id="cb226-4"><a href="leaflet.html#cb226-4" aria-hidden="true" tabindex="-1"></a>)<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span></code></pre></div>
<p>Note that the list of relevant options differs between different layer types, so once more you are referred to the <a href="https://leafletjs.com/reference-1.7.1.html#polyline">documentation</a> to check which properties may be modified for each particular layer type. For example, the <code>radius</code> option which we used for a circle marker is irrelevant for lines. </p>
<p>The resulting map <code>example-06-04.html</code>, now with both a marker and a line, is shown in Figure <a href="leaflet.html#fig:example-06-04">6.9</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:example-06-04"></span>
<iframe src="examples/example-06-04.html" width="100%" height="400px">
</iframe>
<p class="caption">
FIGURE 6.9: <code>example-06-04.html</code> <a href="examples/example-06-04.html" title="View the Example" target="_blank">(Click to view this example on its own)</a>
</p>
</div>
<p>It is also possible to draw a <strong>multi-part</strong> line (Table <a href="geojson-1.html#tab:geojson-multi-part1">7.3</a>) with <code>L.polyline</code>, by passing an array of separate line segments: <em>an array</em> of arrays of arrays. We will not elaborate on this option here, because this type of more complex multi-part shapes are usually loaded from existing GeoJSON layers (Chapter <a href="geojson-1.html#geojson-1">7</a>). </p>
</div>
<div id="adding-polygons" class="section level3" number="6.6.4">
<h3><span class="header-section-number">6.6.4</span> Adding polygons</h3>
<p>Adding a <em>polygon</em> is very similar to adding a line, only that we use the <code>L.polygon</code> function instead of <code>L.polyline</code>. Like <code>L.polyline</code>, the <code>L.polygon</code> function also accepts an array of point coordinates the polygon consists of. Again, the polygon is drawn in the given order, from first node to last. Note that the array is not expected to have the last point repeating the first one, to “close” the shape (unlike in the GeoJSON format; see Section <a href="geojson-1.html#single-part-geometries">7.3.2.2</a>). </p>
<p>Like with circle markers, it is useful to define the border color and fill color of polygons, which can be done using the <code>color</code> and <code>fillColor</code> properties of the options object, respectively. For example, the following expression adds a polygon that has four nodes, with red border, yellow fill, and 4px border width: </p>
<div class="sourceCode" id="cb227"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb227-1"><a href="leaflet.html#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> pol <span class="op">=</span> L<span class="op">.</span><span class="fu">polygon</span>(</span>
<span id="cb227-2"><a href="leaflet.html#cb227-2" aria-hidden="true" tabindex="-1"></a>  [</span>
<span id="cb227-3"><a href="leaflet.html#cb227-3" aria-hidden="true" tabindex="-1"></a>    [<span class="fl">31.263127</span><span class="op">,</span> <span class="fl">34.803668</span>]<span class="op">,</span> </span>
<span id="cb227-4"><a href="leaflet.html#cb227-4" aria-hidden="true" tabindex="-1"></a>    [<span class="fl">31.262503</span><span class="op">,</span> <span class="fl">34.803089</span>]<span class="op">,</span> </span>
<span id="cb227-5"><a href="leaflet.html#cb227-5" aria-hidden="true" tabindex="-1"></a>    [<span class="fl">31.261733</span><span class="op">,</span> <span class="fl">34.803561</span>]<span class="op">,</span> </span>
<span id="cb227-6"><a href="leaflet.html#cb227-6" aria-hidden="true" tabindex="-1"></a>    [<span class="fl">31.262448</span><span class="op">,</span> <span class="fl">34.804752</span>]</span>
<span id="cb227-7"><a href="leaflet.html#cb227-7" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span> </span>
<span id="cb227-8"><a href="leaflet.html#cb227-8" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">color</span><span class="op">:</span> <span class="st">&quot;red&quot;</span><span class="op">,</span> <span class="dt">fillColor</span><span class="op">:</span> <span class="st">&quot;yellow&quot;</span><span class="op">,</span> <span class="dt">weight</span><span class="op">:</span> <span class="dv">4</span>}</span>
<span id="cb227-9"><a href="leaflet.html#cb227-9" aria-hidden="true" tabindex="-1"></a>)<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span></code></pre></div>
<p>The resulting map <code>example-06-05.html</code>, now with a marker, a line, and a polygon, is shown in Figure <a href="leaflet.html#fig:example-06-05">6.10</a>. Similarly to what we mentioned concerning lines (Section <a href="leaflet.html#adding-lines">6.6.3</a>), it is also possible to use <code>L.polygon</code> to add more complex polygons such as <strong>multi-part</strong> polygons or polygons with <strong>holes</strong> (Table <a href="geojson-1.html#tab:geojson-multi-part1">7.3</a>). As mentioned previously, we will use the GeoJSON format for adding such complex shapes (Chapter <a href="geojson-1.html#geojson-1">7</a>). </p>
<div class="figure" style="text-align: center"><span id="fig:example-06-05"></span>
<iframe src="examples/example-06-05.html" width="100%" height="400px">
</iframe>
<p class="caption">
FIGURE 6.10: <code>example-06-05.html</code> <a href="examples/example-06-05.html" title="View the Example" target="_blank">(Click to view this example on its own)</a>
</p>
</div>
</div>
<div id="other-layer-types" class="section level3" number="6.6.5">
<h3><span class="header-section-number">6.6.5</span> Other layer types</h3>
<p>So far we mentioned about half of the commonly used types of layers in Leaflet<a href="#fn62" class="footnote-ref" id="fnref62"><sup>62</sup></a>, as listed in the first six lines of Table <a href="leaflet.html#tab:leaflet-layer-types">6.2</a>. We haven’t mentioned the rectangle layer, but this is practically a specific case of a polygon layer (Section <a href="leaflet.html#adding-polygons">6.6.4</a>) so there is not much to say about it. You are invited to try the <code>L.rectangle</code> example from Leaflet documentation <a href="https://leafletjs.com/reference-1.7.1.html#rectangle">on your own</a>.</p>
<p>All of the latter layer types, except for tile layers, are vector layers drawn according to coordinate arrays. As mentioned above, the coordinate array method is useful for manually drawing simple shapes, but not very practical for complex vector layers, which are usually loaded from existing external sources. When working with complex predefined vector layers, the most useful type of Leaflet layer is <code>L.geoJSON</code>, specified using the GeoJSON format, which we learn about in Chapter <a href="geojson-1.html#geojson-1">7</a>.</p>
<p>Leaflet also supports adding <a href="https://en.wikipedia.org/wiki/Web_Map_Service"><strong>Web Map Service (WMS)</strong></a> layers using the <code>L.tileLayer.wms</code> function, which are (usually) raster images, dynamically generated by a WMS server (unlike tile layers which are pre-built). Finally, Leaflet supports <strong>grouping</strong> layers using functions called <code>L.layerGroup</code> and <code>L.featureGroup</code>. We will use these later on, in Chapters <a href="geojson-1.html#geojson-1">7</a> and <a href="non-spatial-queries-1.html#non-spatial-queries-1">10</a>–<a href="collaborative-mapping.html#collaborative-mapping">13</a>.</p>
<table>
<caption><span id="tab:leaflet-layer-types">TABLE 6.2: </span> Commonly used Leaflet layer types</caption>
<thead>
<tr class="header">
<th>Layer</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Tile layer</td>
<td><code>L.tileLayer</code></td>
</tr>
<tr class="even">
<td>Marker</td>
<td><code>L.marker</code></td>
</tr>
<tr class="odd">
<td>CircleMarker</td>
<td><code>L.circleMarker</code></td>
</tr>
<tr class="even">
<td>Circle</td>
<td><code>L.circle</code></td>
</tr>
<tr class="odd">
<td>Line</td>
<td><code>L.polyline</code></td>
</tr>
<tr class="even">
<td>Polygon</td>
<td><code>L.polygon</code></td>
</tr>
<tr class="odd">
<td>Rectangle</td>
<td><code>L.rectangle</code></td>
</tr>
<tr class="even">
<td>GeoJSON</td>
<td><code>L.geoJSON</code></td>
</tr>
<tr class="odd">
<td>Tile layer (WMS)</td>
<td><code>L.tileLayer.wms</code></td>
</tr>
<tr class="even">
<td>Layer group</td>
<td><code>L.layerGroup</code></td>
</tr>
<tr class="odd">
<td>Feature group</td>
<td><code>L.featureGroup</code></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="adding-popups" class="section level2" number="6.7">
<h2><span class="header-section-number">6.7</span> Adding popups</h2>
<p><strong>Popups</strong> are informative messages which can be interactively opened and closed to get more information about the various features shown on a map. This is similar to the “identify” tool in GIS software. When the user clicks on a vector feature associated with a popup, an information box is displayed (Figure <a href="leaflet.html#fig:example-06-06">6.11</a>). When the user clicks on the “X” (close) symbol on the top-right corner of the box, on any other element on the map, or on the <strong>Esc</strong> key, the information box disappears. </p>
<p>Popups are added on the map by <em>binding</em> them to a given layer. Binding can be done using the <code>.bindPopup</code> method that any Leaflet layer object has. The <code>.bindPopup</code> method accepts a text string with the popup content. For example, we can add a popup to the line layer named <code>line</code> we created in Section <a href="leaflet.html#adding-lines">6.6.3</a>, using the following expression: </p>
<div class="sourceCode" id="cb228"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb228-1"><a href="leaflet.html#cb228-1" aria-hidden="true" tabindex="-1"></a>line<span class="op">.</span><span class="fu">bindPopup</span>(</span>
<span id="cb228-2"><a href="leaflet.html#cb228-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;This is the path from &lt;b&gt;our department&lt;/b&gt; to the &lt;b&gt;library&lt;/b&gt;.&quot;</span></span>
<span id="cb228-3"><a href="leaflet.html#cb228-3" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span></code></pre></div>
<p>Note that popup content can contain HTML tags. In this case, we just use the <code>&lt;b&gt;</code> tag to specify bold font (Section <a href="html.html#font-formatting">1.6.6</a>), but you can use any HTML elements to add different type of content inside a popup, including links, lists, images, tables, videos, and so on. The resulting map with the popup is given in <code>example-06-06.html</code><a href="#fn63" class="footnote-ref" id="fnref63"><sup>63</sup></a>. Clicking on the line opens a popup, as shown in Figure <a href="leaflet.html#fig:example-06-06">6.11</a>. </p>
<div class="figure" style="text-align: center"><span id="fig:example-06-06"></span>
<iframe src="examples/example-06-06.html" width="100%" height="400px">
</iframe>
<p class="caption">
FIGURE 6.11: <code>example-06-06.html</code> <a href="examples/example-06-06.html" title="View the Example" target="_blank">(Click to view this example on its own)</a>
</p>
</div>
<blockquote>
<ul>
<li>Try to bind a popup with the image of the Leaflet logo to the polygon shown in <code>example-06-06.html</code> (Figure <a href="leaflet.html#fig:example-06-06">6.11</a>), by running the appropriate expression in the console.</li>
<li>Hint: use the code of the <code>&lt;img&gt;</code> element (Section <a href="html.html#html-img">1.6.10.1</a>) from <code>example-01-04.html</code> (Figure <a href="html.html#fig:example-01-04">1.7</a>).</li>
</ul>
</blockquote>
</div>
<div id="adding-a-description" class="section level2" number="6.8">
<h2><span class="header-section-number">6.8</span> Adding a description</h2>
<p>In Section <a href="css.html#example-map-description">2.10</a> we saw an example of adding map title and description using custom HTML and CSS code (Figure <a href="css.html#fig:example-02-11">2.13</a>). The Leaflet library has its own, simplified way to do the same task, using a function named <code>L.control</code>. With <code>L.control</code>, we can add custom map <em>controls</em> for different purposes, specified using custom HTML code. In the present example (<code>example-06-07.html</code>), we are going to use <code>L.control</code> to display a map description panel (Figure <a href="leaflet.html#fig:example-06-07">6.13</a>). </p>
<p>In <code>example-06-07.html</code>, we are using the <code>L.control</code> function to initialize a new map control named <code>legend</code>, and set its position to the bottom-left corner of the screen. The <code>L.control</code> function creates a new HTML element “above” the map, which can be filled with contents such as buttons or inputs (i.e., controls), map legends, or information boxes<a href="#fn64" class="footnote-ref" id="fnref64"><sup>64</sup></a>: </p>
<div class="sourceCode" id="cb229"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb229-1"><a href="leaflet.html#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> legend <span class="op">=</span> L<span class="op">.</span><span class="fu">control</span>({<span class="dt">position</span><span class="op">:</span> <span class="st">&quot;bottomleft&quot;</span>})<span class="op">;</span></span></code></pre></div>
<p>In the present example, we want to fill the control with a map description, composed of few lines of text and an image (Figure <a href="leaflet.html#fig:control-map-description">6.12</a>). We use the <code>.onAdd</code> method of the newly created control to define its contents and behavior. In this case, we are creating a <code>&lt;div&gt;</code> with HTML code which creates the map description: </p>
<div class="sourceCode" id="cb230"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb230-1"><a href="leaflet.html#cb230-1" aria-hidden="true" tabindex="-1"></a>legend<span class="op">.</span><span class="at">onAdd</span> <span class="op">=</span> <span class="kw">function</span>() {</span>
<span id="cb230-2"><a href="leaflet.html#cb230-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> div <span class="op">=</span> L<span class="op">.</span><span class="at">DomUtil</span><span class="op">.</span><span class="fu">create</span>(<span class="st">&quot;div&quot;</span><span class="op">,</span> <span class="st">&quot;legend&quot;</span>)<span class="op">;</span></span>
<span id="cb230-3"><a href="leaflet.html#cb230-3" aria-hidden="true" tabindex="-1"></a>    div<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> </span>
<span id="cb230-4"><a href="leaflet.html#cb230-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;&lt;p&gt;&lt;b&gt;Simple shapes in Leaflet&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&#39;</span> <span class="op">+</span></span>
<span id="cb230-5"><a href="leaflet.html#cb230-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;&lt;p&gt;This map shows an example of adding shapes &#39;</span> <span class="op">+</span> </span>
<span id="cb230-6"><a href="leaflet.html#cb230-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;on a Leaflet map&lt;/p&gt;&#39;</span> <span class="op">+</span></span>
<span id="cb230-7"><a href="leaflet.html#cb230-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;The following shapes were added:&lt;br&gt;&#39;</span> <span class="op">+</span></span>
<span id="cb230-8"><a href="leaflet.html#cb230-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;&lt;p&gt;&lt;ul&gt;&#39;</span> <span class="op">+</span></span>
<span id="cb230-9"><a href="leaflet.html#cb230-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;&lt;li&gt;A marker&lt;/li&gt;&#39;</span> <span class="op">+</span></span>
<span id="cb230-10"><a href="leaflet.html#cb230-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;&lt;li&gt;A line&lt;/li&gt;&#39;</span> <span class="op">+</span></span>
<span id="cb230-11"><a href="leaflet.html#cb230-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;&lt;li&gt;A polygon&lt;/li&gt;&#39;</span> <span class="op">+</span></span>
<span id="cb230-12"><a href="leaflet.html#cb230-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;&lt;/ul&gt;&lt;/p&gt;&#39;</span> <span class="op">+</span></span>
<span id="cb230-13"><a href="leaflet.html#cb230-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;The line layer has a &lt;b&gt;popup&lt;/b&gt;. &#39;</span> <span class="op">+</span> </span>
<span id="cb230-14"><a href="leaflet.html#cb230-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;Click on the line to see it!&lt;hr&gt;&#39;</span> <span class="op">+</span></span>
<span id="cb230-15"><a href="leaflet.html#cb230-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;Created with the Leaflet library&lt;br&gt;&#39;</span> <span class="op">+</span></span>
<span id="cb230-16"><a href="leaflet.html#cb230-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;&lt;img src=&quot;images/leaflet.png&quot;&gt;&#39;</span><span class="op">;</span></span>
<span id="cb230-17"><a href="leaflet.html#cb230-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> div<span class="op">;</span></span>
<span id="cb230-18"><a href="leaflet.html#cb230-18" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:control-map-description"></span>
<img src="images/control_map_description.png" alt="Map description" width="35%" />
<p class="caption">
FIGURE 6.12: Map description
</p>
</div>
<p>The above expression basically creates a <code>&lt;div&gt;</code> element with a class named <code>"legend"</code>, then adds internal HTML content into that element. Adding the HTML code is done with the <code>.innerHTML</code> method, which we learned about in Section <a href="javascript-interactivity.html#modifying-elements">4.3.4</a>. Note that we are using the <code>+</code> operators in order to split the assigned HTML code string into multiple lines and make the code more manageable and easier to read. Finally, the control is added to the map with <code>.addTo</code> method, just like we did for map layers in previous examples in this chapter:</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb231-1"><a href="leaflet.html#cb231-1" aria-hidden="true" tabindex="-1"></a>legend<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span></code></pre></div>
<p>The complete code for adding the map description is as follows:</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb232-1"><a href="leaflet.html#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> legend <span class="op">=</span> L<span class="op">.</span><span class="fu">control</span>({<span class="dt">position</span><span class="op">:</span> <span class="st">&quot;bottomleft&quot;</span>})<span class="op">;</span></span>
<span id="cb232-2"><a href="leaflet.html#cb232-2" aria-hidden="true" tabindex="-1"></a>legend<span class="op">.</span><span class="at">onAdd</span> <span class="op">=</span> <span class="kw">function</span>() {</span>
<span id="cb232-3"><a href="leaflet.html#cb232-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> div <span class="op">=</span> L<span class="op">.</span><span class="at">DomUtil</span><span class="op">.</span><span class="fu">create</span>(<span class="st">&quot;div&quot;</span><span class="op">,</span> <span class="st">&quot;legend&quot;</span>)<span class="op">;</span></span>
<span id="cb232-4"><a href="leaflet.html#cb232-4" aria-hidden="true" tabindex="-1"></a>    div<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> </span>
<span id="cb232-5"><a href="leaflet.html#cb232-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;&lt;p&gt;&lt;b&gt;Simple shapes in Leaflet&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&#39;</span> <span class="op">+</span></span>
<span id="cb232-6"><a href="leaflet.html#cb232-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;&lt;p&gt;This map shows an example of adding shapes &#39;</span> <span class="op">+</span> </span>
<span id="cb232-7"><a href="leaflet.html#cb232-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;on a Leaflet map&lt;/p&gt;&#39;</span> <span class="op">+</span></span>
<span id="cb232-8"><a href="leaflet.html#cb232-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;The following shapes were added:&lt;br&gt;&#39;</span> <span class="op">+</span></span>
<span id="cb232-9"><a href="leaflet.html#cb232-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;&lt;p&gt;&lt;ul&gt;&#39;</span> <span class="op">+</span></span>
<span id="cb232-10"><a href="leaflet.html#cb232-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;&lt;li&gt;A marker&lt;/li&gt;&#39;</span> <span class="op">+</span></span>
<span id="cb232-11"><a href="leaflet.html#cb232-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;&lt;li&gt;A line&lt;/li&gt;&#39;</span> <span class="op">+</span></span>
<span id="cb232-12"><a href="leaflet.html#cb232-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;&lt;li&gt;A polygon&lt;/li&gt;&#39;</span> <span class="op">+</span></span>
<span id="cb232-13"><a href="leaflet.html#cb232-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;&lt;/ul&gt;&lt;/p&gt;&#39;</span> <span class="op">+</span></span>
<span id="cb232-14"><a href="leaflet.html#cb232-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;The line layer has a &lt;b&gt;popup&lt;/b&gt;. &#39;</span> <span class="op">+</span> </span>
<span id="cb232-15"><a href="leaflet.html#cb232-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;Click on the line to see it!&lt;hr&gt;&#39;</span> <span class="op">+</span></span>
<span id="cb232-16"><a href="leaflet.html#cb232-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;Created with the Leaflet library&lt;br&gt;&#39;</span> <span class="op">+</span></span>
<span id="cb232-17"><a href="leaflet.html#cb232-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;&lt;img src=&quot;images/leaflet.png&quot;&gt;&#39;</span><span class="op">;</span></span>
<span id="cb232-18"><a href="leaflet.html#cb232-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> div<span class="op">;</span></span>
<span id="cb232-19"><a href="leaflet.html#cb232-19" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb232-20"><a href="leaflet.html#cb232-20" aria-hidden="true" tabindex="-1"></a>legend<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span></code></pre></div>
<p>We also need some CSS code to give our map description the final styling shown in Figure <a href="leaflet.html#fig:control-map-description">6.12</a>:</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb233-1"><a href="leaflet.html#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="fu">.legend</span> {</span>
<span id="cb233-2"><a href="leaflet.html#cb233-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">width</span>: <span class="dv">250</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb233-3"><a href="leaflet.html#cb233-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">font-size</span>: <span class="dv">16</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb233-4"><a href="leaflet.html#cb233-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">color</span>: <span class="cn">#333333</span><span class="op">;</span></span>
<span id="cb233-5"><a href="leaflet.html#cb233-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">font-family</span>: <span class="st">&quot;Open Sans&quot;</span><span class="op">,</span> Helvetica<span class="op">,</span> <span class="dv">sans-serif</span><span class="op">;</span></span>
<span id="cb233-6"><a href="leaflet.html#cb233-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">padding</span>: <span class="dv">10</span><span class="dt">px</span> <span class="dv">14</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb233-7"><a href="leaflet.html#cb233-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">background-color</span>: <span class="fu">rgba(</span><span class="dv">245</span><span class="op">,</span><span class="dv">245</span><span class="op">,</span><span class="dv">220</span><span class="op">,</span><span class="dv">0.8</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb233-8"><a href="leaflet.html#cb233-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">box-shadow</span>: <span class="dv">0</span> <span class="dv">0</span> <span class="dv">15</span><span class="dt">px</span> <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0.2</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb233-9"><a href="leaflet.html#cb233-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">border-radius</span>: <span class="dv">5</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb233-10"><a href="leaflet.html#cb233-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">border</span>: <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">grey</span><span class="op">;</span></span>
<span id="cb233-11"><a href="leaflet.html#cb233-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb233-12"><a href="leaflet.html#cb233-12" aria-hidden="true" tabindex="-1"></a><span class="fu">.legend</span> img {</span>
<span id="cb233-13"><a href="leaflet.html#cb233-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">width</span>: <span class="dv">200</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb233-14"><a href="leaflet.html#cb233-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">margin</span>: <span class="bu">auto</span><span class="op">;</span></span>
<span id="cb233-15"><a href="leaflet.html#cb233-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">display</span>: <span class="dv">block</span><span class="op">;</span></span>
<span id="cb233-16"><a href="leaflet.html#cb233-16" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Finally, we need to have the <code>leaflet.png</code> image file in the <code>images</code> sub-directory inside the directory where the HTML document is, for the last expression in our HTML code to work. The expression adds the Leaflet library logo in the bottom of the map description (Figure <a href="leaflet.html#fig:control-map-description">6.12</a>): </p>
<div class="sourceCode" id="cb234"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb234-1"><a href="leaflet.html#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;img</span><span class="ot"> src=</span><span class="st">&quot;images/leaflet.png&quot;</span><span class="kw">&gt;</span></span></code></pre></div>
<p>The resulting map <code>example-06-07.html</code>, with the map description information box in the bottom-left corner, is shown in Figure <a href="leaflet.html#fig:example-06-07">6.13</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:example-06-07"></span>
<iframe src="examples/example-06-07.html" width="100%" height="400px">
</iframe>
<p class="caption">
FIGURE 6.13: <code>example-06-07.html</code> <a href="examples/example-06-07.html" title="View the Example" target="_blank">(Click to view this example on its own)</a>
</p>
</div>
</div>
<div id="introducing-map-events" class="section level2" number="6.9">
<h2><span class="header-section-number">6.9</span> Introducing map events</h2>
<p>In Section <a href="javascript-interactivity.html#event-listeners">4.4</a>, we learned how the browser fires events in response to user interactions, and that these events can be handled using JavaScript to make our web page interactive. We also mentioned the event object (Section <a href="javascript-interactivity.html#the-event-object">4.10</a>), which can be used to trigger specific responses according to event properties. Recall the mouse position in <code>example-04-07.html</code> (Figure <a href="javascript-interactivity.html#fig:example-04-07">4.8</a>), where mouse position was printed on screen thanks to the <code>pageX</code> and <code>pageY</code> properties of the event object. In Section <a href="javascript-interactivity.html#the-event-object">4.10</a>, we also mentioned that <em>custom</em> event types and <em>custom</em> event object properties are often defined in JavaScript libraries for specific needs.</p>
<p>The Leaflet library defines specific event types and event properties appropriate for web mapping. These specific events can be captured for the entire map object, or for specific features the map contains. In this context, a popup is an example of a built-in event listener, with a pre-defined behavior: opening on click, closing when the “X” button or any other layer is clicked. Similarly, we can define and customize other Leaflet map interactive behaviors. </p>
<p>One of the most useful types of <strong>map events</strong> are <code>"click"</code> events, and the most important property of a map click event is the spatial location where the user clicked. When the user clicks on the map—in addition to the usual <code>"click"</code> event properties—the event object contains the latitude and longitude of where the click was made. The latitude and longitude are given in the special <code>.latlng</code> property of the <a href="https://leafletjs.com/reference-1.7.1.html#map-event">map event</a> object. The <code>.latlng</code> event object property opens up the possibility of “capturing” the clicked coordinates and doing something useful with them.</p>
<p>For example, in Chapter <a href="spatial-queries-1.html#spatial-queries-1">11</a> we will use the clicked location to query specific features—that are <em>near</em> the clicked location—from a database (Figure <a href="spatial-queries-1.html#fig:example-11-04">11.8</a>). In this section, we will see a simpler example, displaying the clicked coordinates inside a popup, which is opened on the clicked location itself (Figure <a href="leaflet.html#fig:example-06-08">6.15</a>). To display the currently clicked location using a popup, we need to do several things: </p>
<ul>
<li>Add an empty popup object to our map</li>
<li>Write a function that, once called, sets popup location, fills the popup with content, and opens it on the map</li>
<li>Add an event listener stating that each time the map is clicked, the latter function is executed</li>
</ul>
<p>Starting with the first item, an empty popup object can be created with the <code>L.popup</code> function, as follows. This is in contrast to the <code>.bindPopup</code> method we used earlier to bind a popup to an <em>existing</em> layer (Section <a href="leaflet.html#adding-popups">6.7</a>): </p>
<div class="sourceCode" id="cb235"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb235-1"><a href="leaflet.html#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> popup <span class="op">=</span> L<span class="op">.</span><span class="fu">popup</span>()<span class="op">;</span></span></code></pre></div>
<p>In the function that the event listener will refer to, hereby named <code>onMapClick</code> (see below), we will be using the event object parameter <code>e</code>. As mentioned above, when referring to map <code>"click"</code> events, the event object includes the <code>.latlng</code> property. The <code>.latlng</code> property is itself an object of type <code>LatLng</code>, which holds the longitude and latitude of the clicked location. This is basically a JavaScript object with two properties and two numeric values, such as the following one (plus some additional methods, which we don’t need to worry about at the moment): </p>
<div class="sourceCode" id="cb236"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb236-1"><a href="leaflet.html#cb236-1" aria-hidden="true" tabindex="-1"></a>{<span class="dt">lat</span><span class="op">:</span> <span class="fl">31.2596049045682</span><span class="op">,</span> <span class="dt">lng</span><span class="op">:</span> <span class="fl">34.80215549468995</span>}</span></code></pre></div>
<p>A <code>LatLng</code> object can be created with <code>L.latLng</code>, and it can be used for specifying coordinates instead of a simple <code>[lat, lon]</code> array. For example, try running the following expression in the console in any of the above examples. This will add a marker at a location defined using a <code>LatLng</code> object: </p>
<div class="sourceCode" id="cb237"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb237-1"><a href="leaflet.html#cb237-1" aria-hidden="true" tabindex="-1"></a>L<span class="op">.</span><span class="fu">marker</span>(L<span class="op">.</span><span class="fu">latLng</span>(<span class="fl">31.264</span><span class="op">,</span> <span class="fl">34.802</span>))<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span></code></pre></div>
<p>Back to the event listener example. The <code>LatLng</code> object, representing the clicked location, will be used for two purposes:</p>
<ul>
<li>Determining <strong>where</strong> the popup should be opened</li>
<li>Setting the popup <strong>contents</strong></li>
</ul>
<p>These are accomplished with two methods of the popup object, <code>.setLatLng</code> and <code>.setContent</code>. Finally, once popup placement and content are set, the popup will be opened using a third method named <code>.openOn</code>. The event listener function, hereby named <code>onMapClick</code>, thus takes the following form: </p>
<div class="sourceCode" id="cb238"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb238-1"><a href="leaflet.html#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">onMapClick</span>(e) {</span>
<span id="cb238-2"><a href="leaflet.html#cb238-2" aria-hidden="true" tabindex="-1"></a>    popup</span>
<span id="cb238-3"><a href="leaflet.html#cb238-3" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">setLatLng</span>(e<span class="op">.</span><span class="at">latlng</span>)</span>
<span id="cb238-4"><a href="leaflet.html#cb238-4" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">setContent</span>(</span>
<span id="cb238-5"><a href="leaflet.html#cb238-5" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;You clicked the map at -&lt;br&gt;&quot;</span> <span class="op">+</span> </span>
<span id="cb238-6"><a href="leaflet.html#cb238-6" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;&lt;b&gt;lon:&lt;/b&gt; &quot;</span> <span class="op">+</span> e<span class="op">.</span><span class="at">latlng</span><span class="op">.</span><span class="at">lng</span> <span class="op">+</span> <span class="st">&quot;&lt;br&gt;&quot;</span> <span class="op">+</span> </span>
<span id="cb238-7"><a href="leaflet.html#cb238-7" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;&lt;b&gt;lat:&lt;/b&gt; &quot;</span> <span class="op">+</span> e<span class="op">.</span><span class="at">latlng</span><span class="op">.</span><span class="at">lat</span></span>
<span id="cb238-8"><a href="leaflet.html#cb238-8" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb238-9"><a href="leaflet.html#cb238-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">openOn</span>(map)<span class="op">;</span></span>
<span id="cb238-10"><a href="leaflet.html#cb238-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>To better understand what this function does, try running the following code in the console in one of the Leaflet examples from this chapter: </p>
<div class="sourceCode" id="cb239"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb239-1"><a href="leaflet.html#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> myLocation <span class="op">=</span> L<span class="op">.</span><span class="fu">latLng</span>(<span class="fl">31.264</span><span class="op">,</span> <span class="fl">34.802</span>)<span class="op">;</span></span>
<span id="cb239-2"><a href="leaflet.html#cb239-2" aria-hidden="true" tabindex="-1"></a>L<span class="op">.</span><span class="fu">popup</span>()</span>
<span id="cb239-3"><a href="leaflet.html#cb239-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">setLatLng</span>(myLocation)</span>
<span id="cb239-4"><a href="leaflet.html#cb239-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">setContent</span>(</span>
<span id="cb239-5"><a href="leaflet.html#cb239-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;You clicked the map at -&lt;br&gt;&quot;</span> <span class="op">+</span> </span>
<span id="cb239-6"><a href="leaflet.html#cb239-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;&lt;b&gt;lon:&lt;/b&gt; &quot;</span> <span class="op">+</span> myLocation<span class="op">.</span><span class="at">lng</span> <span class="op">+</span> <span class="st">&quot;&lt;br&gt;&quot;</span> <span class="op">+</span> </span>
<span id="cb239-7"><a href="leaflet.html#cb239-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;&lt;b&gt;lat:&lt;/b&gt; &quot;</span> <span class="op">+</span> myLocation<span class="op">.</span><span class="at">lat</span></span>
<span id="cb239-8"><a href="leaflet.html#cb239-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb239-9"><a href="leaflet.html#cb239-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">openOn</span>(map)<span class="op">;</span></span></code></pre></div>
<p>This is basically the same code as the body of the <code>onMapClick</code> function, only that instead of <code>e.latlng</code> we used a specific <code>LatLng</code> instance, named <code>myLocation</code>. As a result of running this code section, you should see a popup with the content shown in Figure <a href="leaflet.html#fig:popup-clicked-location">6.14</a>, opened at the location specified by <code>L.latLng(31.264, 34.802)</code>.</p>
<div class="figure" style="text-align: center"><span id="fig:popup-clicked-location"></span>
<img src="images/popup_clicked_location.png" alt="A popup displaying clicked location coordinates" width="35%" />
<p class="caption">
FIGURE 6.14: A popup displaying clicked location coordinates
</p>
</div>
<p>Finally, we add an event listener (Section <a href="javascript-interactivity.html#event-listeners">4.4</a>) specifying that the <code>onMapClick</code> function should be executed on map click. Note that in this case the element responding to the event is the entire <code>map</code>, so that any click inside the map triggers the <code>onMapClick</code> function<a href="#fn65" class="footnote-ref" id="fnref65"><sup>65</sup></a>: </p>
<div class="sourceCode" id="cb240"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb240-1"><a href="leaflet.html#cb240-1" aria-hidden="true" tabindex="-1"></a>map<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> onMapClick)<span class="op">;</span></span></code></pre></div>
<p>The complete code we need to add to a basic Leaflet map, so that clicked coordinates are displayed in a popup, is shown on the following page: </p>
<div class="sourceCode" id="cb241"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb241-1"><a href="leaflet.html#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> popup <span class="op">=</span> L<span class="op">.</span><span class="fu">popup</span>()<span class="op">;</span></span>
<span id="cb241-2"><a href="leaflet.html#cb241-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">onMapClick</span>(e) {</span>
<span id="cb241-3"><a href="leaflet.html#cb241-3" aria-hidden="true" tabindex="-1"></a>    popup</span>
<span id="cb241-4"><a href="leaflet.html#cb241-4" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">setLatLng</span>(e<span class="op">.</span><span class="at">latlng</span>)</span>
<span id="cb241-5"><a href="leaflet.html#cb241-5" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">setContent</span>(</span>
<span id="cb241-6"><a href="leaflet.html#cb241-6" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;You clicked the map at -&lt;br&gt;&quot;</span> <span class="op">+</span> </span>
<span id="cb241-7"><a href="leaflet.html#cb241-7" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;&lt;b&gt;lon:&lt;/b&gt; &quot;</span> <span class="op">+</span> e<span class="op">.</span><span class="at">latlng</span><span class="op">.</span><span class="at">lng</span> <span class="op">+</span> <span class="st">&quot;&lt;br&gt;&quot;</span> <span class="op">+</span> </span>
<span id="cb241-8"><a href="leaflet.html#cb241-8" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;&lt;b&gt;lat:&lt;/b&gt; &quot;</span> <span class="op">+</span> e<span class="op">.</span><span class="at">latlng</span><span class="op">.</span><span class="at">lat</span></span>
<span id="cb241-9"><a href="leaflet.html#cb241-9" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb241-10"><a href="leaflet.html#cb241-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">openOn</span>(map)<span class="op">;</span></span>
<span id="cb241-11"><a href="leaflet.html#cb241-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb241-12"><a href="leaflet.html#cb241-12" aria-hidden="true" tabindex="-1"></a>map<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> onMapClick)<span class="op">;</span></span></code></pre></div>
<p>The resulting map <code>example-06-08.html</code> is shown in Figure <a href="leaflet.html#fig:example-06-08">6.15</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:example-06-08"></span>
<iframe src="examples/example-06-08.html" width="100%" height="400px">
</iframe>
<p class="caption">
FIGURE 6.15: <code>example-06-08.html</code> <a href="examples/example-06-08.html" title="View the Example" target="_blank">(Click to view this example on its own)</a>
</p>
</div>
<blockquote>
<ul>
<li>Open <code>example-06-08.html</code> (Figure <a href="leaflet.html#fig:example-06-08">6.15</a>) and click anywhere on the map.</li>
<li>As shown in Figure <a href="leaflet.html#fig:example-06-08">6.15</a>, the popup displays the <code>e.latlng</code> coordinates “as is,” with many irrelevant digits.</li>
<li>The first six digits refer to sub-meter (~0.1 m) precision, which is more than enough for most types of applications.</li>
<li>Modify the <code>onMapClick</code> function so that the coordinates are rounded and only the first <em>six</em> digits of longitude and latitude are displayed inside the popup. (Hint: you can search on Google for a JavaScript function to round numbers according to specified number of digits.) </li>
</ul>
</blockquote>
</div>
<div id="exercise-06" class="section level2" number="6.10">
<h2><span class="header-section-number">6.10</span> Exercise</h2>
<ul>
<li>Create a Leaflet map with the location of places you want to visit, and the path you want to travel along between those places.</li>
<li>The map should have the following components:
<ul>
<li>A tile layer</li>
<li>Markers of the visited locations</li>
<li>A line representing the travel path</li>
<li>Popups for each marker, containing location names</li>
<li>A description box, with your name and the list of locations in the right order</li>
</ul></li>
<li>Optional: Check out the <a href="https://leafletjs.com/examples/layers-control/"><em>Layer Groups and Layers Control</em></a> tutorial, and try to add a layer control for showing or hiding the markers and the line layers, and for switching between two or more types of tile layers (Figure <a href="leaflet.html#fig:solution-06">6.16</a>).</li>
</ul>
<div class="figure" style="text-align: center"><span id="fig:solution-06"></span>
<iframe src="examples/solution-06.html" width="100%" height="400px">
</iframe>
<p class="caption">
FIGURE 6.16: <code>solution-06.html</code> <a href="examples/solution-06.html" title="View the Example" target="_blank">(Click to view this example on its own)</a>
</p>
</div>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-crickard2014leaflet" class="csl-entry">
Crickard III, Paul. 2014. <em>Leaflet.js Essentials</em>. Birmingham, UK: Packt Publishing Ltd.
</div>
<div id="ref-dincer2013google" class="csl-entry">
Dincer, Alper, and Balkan Uraz. 2013. <em>Google Maps JavaScript API Cookbook</em>. Birmingham, UK: Packt Publishing Ltd.
</div>
<div id="ref-farkas2016mastering" class="csl-entry">
Farkas, Gábor. 2016. <em>Mastering OpenLayers 3</em>. Birmingham, UK: Packt Publishing Ltd.
</div>
<div id="ref-gratier2015openlayers" class="csl-entry">
Gratier, Thomas, Paul Spencer, and Erik Hazzard. 2015. <em>OpenLayers 3: Beginner’s Guide</em>. Packt Publishing Ltd.
</div>
<div id="ref-janert2019d3" class="csl-entry">
Janert, Philipp K. 2019. <em>D3 for the Impatient: Interactive Graphics for Programmers and Scientists</em>. Sebastopol, CA, USA: O’Reilly Media, Inc.
</div>
<div id="ref-langley2016openlayers" class="csl-entry">
Langley, Peter J, and Antonio Santiago Perez. 2016. <em>OpenLayers 3.x Cookbook</em>. 2nd ed. Birmingham, UK: Packt Publishing Ltd.
</div>
<div id="ref-murray2017interactive" class="csl-entry">
Murray, Scott. 2017. <em>Interactive Data Visualization for the Web: An Introduction to Designing with D3</em>. Sebastopol, CA, USA: O’Reilly Media, Inc.
</div>
<div id="ref-newton2014learning" class="csl-entry">
Newton, Thomas, and Oscar Villarreal. 2014. <em>Learning D3.js Mapping</em>. Birmingham, UK: Packt Publishing Ltd.
</div>
<div id="ref-rubalcava2015arcgis" class="csl-entry">
Rubalcava, Rene. 2015. <em>ArcGIS Web Development</em>. Shelter Island, NY, USA.: Manning Publications Co.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="52">
<li id="fn52"><p>A good introduction to web mapping can be found in the <em>Web Maps 101</em> (<a href="http://maptimeboston.github.io/web-maps-101/#0" class="uri">http://maptimeboston.github.io/web-maps-101/#0</a>) presentation by <em>Maptime Boston</em> (<a href="https://maptimeboston.github.io/resources" class="uri">https://maptimeboston.github.io/resources</a>).<a href="leaflet.html#fnref52" class="footnote-back">↩︎</a></p></li>
<li id="fn53"><p>Check out the <em>What is a web mapping API?</em> (<a href="https://www.e-education.psu.edu/geog585/node/763" class="uri">https://www.e-education.psu.edu/geog585/node/763</a>) article for additional information on pros and cons of different web-mapping libraries.<a href="leaflet.html#fnref53" class="footnote-back">↩︎</a></p></li>
<li id="fn54"><p>Not before!<a href="leaflet.html#fnref54" class="footnote-back">↩︎</a></p></li>
<li id="fn55"><p>See Appendix <a href="associated-files.html#associated-files">A</a> for complete list of files and directory structure; see online version (Section <a href="index.html#online-version">0.7</a>) for downloading the complete set of files for the Leaflet library.<a href="leaflet.html#fnref55" class="footnote-back">↩︎</a></p></li>
<li id="fn56"><p>You can always to refer to the documentation (<a href="https://leafletjs.com/reference-1.7.1.html" class="uri">https://leafletjs.com/reference-1.7.1.html</a>) for the complete list of options for <code>L.map</code>, or any other Leaflet function.<a href="leaflet.html#fnref56" class="footnote-back">↩︎</a></p></li>
<li id="fn57"><p>See the <em>Zoom levels</em> tutorial (<a href="https://leafletjs.com/examples/zoom-levels/" class="uri">https://leafletjs.com/examples/zoom-levels/</a>) for more information on tile layer zoom levels and their implementation in Leaflet.<a href="leaflet.html#fnref57" class="footnote-back">↩︎</a></p></li>
<li id="fn58"><p>In fact, the default OpenStreetMap tile server is not a simple static server. It has a more efficient (and complicated) design, to conserve storage space and computation power. Tiles that are rarely viewed (in the ocean, etc.) are rendered <em>upon request</em>, instead of being stored on the server. See <a href="https://wiki.openstreetmap.org/wiki/Tile_disk_usage" class="uri">https://wiki.openstreetmap.org/wiki/Tile_disk_usage</a> for more details.<a href="leaflet.html#fnref58" class="footnote-back">↩︎</a></p></li>
<li id="fn59"><p>Again, for the complete list of options see the Leaflet documentation (<a href="https://leafletjs.com/reference-1.7.1.html#tilelayer" class="uri">https://leafletjs.com/reference-1.7.1.html#tilelayer</a>).<a href="leaflet.html#fnref59" class="footnote-back">↩︎</a></p></li>
<li id="fn60"><p>For more information, see the <em>Leaflet on Mobile</em> tutorial (<a href="https://leafletjs.com/examples/mobile/" class="uri">https://leafletjs.com/examples/mobile/</a>) and the <em>Using the viewport meta tag</em> article (<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Viewport_meta_tag" class="uri">https://developer.mozilla.org/en-US/docs/Web/HTML/Viewport_meta_tag</a>) by Mozilla.<a href="leaflet.html#fnref60" class="footnote-back">↩︎</a></p></li>
<li id="fn61"><p>Remember that the coordinates arrays that Leaflet accepts follow the <code>[lat, lon]</code> format, <em>not</em> the <code>[lon, lat]</code> format!<a href="leaflet.html#fnref61" class="footnote-back">↩︎</a></p></li>
<li id="fn62"><p>The complete list of Leaflet layer types is given in the Leaflet documentation (<a href="https://leafletjs.com/reference-1.7.1.html" class="uri">https://leafletjs.com/reference-1.7.1.html</a>).<a href="leaflet.html#fnref62" class="footnote-back">↩︎</a></p></li>
<li id="fn63"><p>See the Leaflet <em>Quick Start Tutorial</em> (<a href="https://leafletjs.com/examples/quick-start/" class="uri">https://leafletjs.com/examples/quick-start/</a>) for another overview on adding simple layers with popups in Leaflet.<a href="leaflet.html#fnref63" class="footnote-back">↩︎</a></p></li>
<li id="fn64"><p>In subsequent chapters, we are going to use <code>L.control</code> to display other types of controls, such as a map legend (Section <a href="symbology-and-interactivity.html#adding-a-legend">8.6</a>), a dynamically updated information box (Section <a href="symbology-and-interactivity.html#dynamic-control-contents">8.7.2</a>), and a dropdown menu (Section <a href="non-spatial-queries-1.html#creating-a-dropdown-menu">10.3</a>).<a href="leaflet.html#fnref64" class="footnote-back">↩︎</a></p></li>
<li id="fn65"><p>The <code>.on</code> method—which you may encounter in the Leaflet tutorials and other code examples—is identical to the <code>.addEventListener</code> method. Either one can be used to bind event listeners in Leaflet. In this book, we will be using <code>.addEventListener</code> for uniformity with the plain JavaScript syntax (Section <a href="javascript-interactivity.html#event-listeners">4.4</a>).<a href="leaflet.html#fnref65" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="web-servers-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="geojson-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toc_depth": 2,
"search": false
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "../../mathjax.rstudio.com/2.7.2/MathJaxb198.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>


<!-- Mirrored from 132.72.155.230:3838/js/leaflet.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jan 2022 06:35:16 GMT -->
</html>
